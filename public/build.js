!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/public/",n(n.s=162)}([function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(99),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(249),i=n(266),o=n(12),a=n(0),s=n(272);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e,n){var r=n(98),i=n(100),o=n(7);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){var r=n(16),i=n(61);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(15),i=n(210),o=n(211),a="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?s:a:u&&u in Object(t)?i(t):o(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(9),i=n(5),o=n(125),a=n(0);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e,n){var r=n(220),i=n(223);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e){t.exports=function(t){return t}},function(t,e){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;t.exports=function(t,e,i){if("[object Function]"!==r.call(e))throw new TypeError("iterator must be a function");var o=t.length;if(o===+o)for(var a=0;a<o;a++)e.call(i,t[a],a,t);else for(var s in t)n.call(t,s)&&e.call(i,t[s],s,t)}},function(t,e){t.exports=function(t){return JSON.parse(JSON.stringify(t))}},function(t,e,n){var r=n(1).Symbol;t.exports=r},function(t,e,n){var r=n(8),i=n(3),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";t.exports=function(t){if(!i(t))return!1;var e=r(t);return e==a||e==s||e==o||e==u}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(12),i=n(107),o=n(66);t.exports=function(t,e){return o(i(t,e,r),t+"")}},function(t,e,n){var r=n(67),i=n(50),o=n(113),a=n(0);t.exports=function(t,e){return(a(t)?r:i)(t,o(e))}},function(t,e,n){var r=n(0),i=n(72),o=n(267),a=n(73);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,n){var r=n(31),i=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},function(t,e,n){var r=n(75),i=n(33);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var c=e[s],h=o?o(n[c],t[c],c,n,t):void 0;void 0===h&&(h=t[c]),a?i(n,c,h):r(n,c,h)}return n}},function(t,e){var n="__lodash_placeholder__";t.exports=function(t,e){for(var r=-1,i=t.length,o=0,a=[];++r<i;){var s=t[r];s!==e&&s!==n||(t[r]=n,a[o++]=r)}return a}},function(t,e,n){var r=n(209),i=n(2),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){(function(t){var r=n(1),i=n(212),o="object"==typeof e&&e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(e,n(60)(t))},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?n:e)&&("number"==i||"symbol"!=i&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(105),i=n(240),o=n(241);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},function(t,e,n){var r=n(112),i=n(6);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(262),i=n(64),o=n(263),a=n(264),s=n(120),u=n(8),c=n(103),h=c(r),l=c(i),f=c(o),p=c(a),d=c(s),m=u;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=m(new i)||o&&"[object Promise]"!=m(o.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case h:return"[object DataView]";case l:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=m},function(t,e,n){var r=n(8),i=n(2),o="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||i(t)&&r(t)==o}},function(t,e,n){var r=n(275),i=n(50),o=n(5),a=n(276),s=n(0);t.exports=function(t,e,n){var u=s(t)?r:a,c=arguments.length<3;return u(t,o(e,4),n,c,i)}},function(t,e,n){var r=n(109);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(98),i=n(280),o=n(7);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e,n){var r=n(298);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var r=n(100),i=n(30),o=n(24),a=n(0),s=n(7),u=n(25),c=n(45),h=n(44),l="[object Map]",f="[object Set]",p=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||h(t)||o(t)))return!t.length;var e=i(t);if(e==l||e==f)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(p.call(t,n))return!1;return!0}},function(t,e,n){var r=n(8),i=n(0),o=n(2),a="[object String]";t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&r(t)==a}},function(t,e){t.exports=function(t){return t.placeholder}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],h=!1,l=-1;function f(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!h){var t=s(f);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||h||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(58);function i(t,e){var r=n(13),i=this;"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):i.stack=(new Error).stack||"Cannot get a stacktrace, browser is too old",this.name="AlgoliaSearchError",this.message=t||"Unknown error",e&&r(e,function(t,e){i[e]=t})}function o(t,e){function n(){var n=Array.prototype.slice.call(arguments,0);"string"!=typeof n[0]&&n.unshift(e),i.apply(this,n),this.name="AlgoliaSearch"+t+"Error"}return r(n,i),n}r(i,Error),t.exports={AlgoliaSearchError:i,UnparsableJSON:o("UnparsableJSON","Could not parse the incoming response as JSON, see err.more for details"),RequestTimeout:o("RequestTimeout","Request timedout before getting a response"),Network:o("Network","Network issue, see err.more for details"),JSONPScriptFail:o("JSONPScriptFail","<script> was loaded but did not call our provided callback"),JSONPScriptError:o("JSONPScriptError","<script> unable to load due to an `error` event on it"),Unknown:o("Unknown","Unknown error occured")}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var r=n(13);t.exports=function(t,e){var n=[];return r(t,function(r,i){n.push(e(r,i,t))}),n}},function(t,e,n){(function(r){function i(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=Object({NODE_ENV:"production"}).DEBUG),t}(e=t.exports=n(195)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++i)}),t.splice(o,0,r)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=i,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(i())}).call(e,n(39))},function(t,e,n){var r=n(213),i=n(27),o=n(62),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(11)(Object,"create");t.exports=r},function(t,e,n){var r=n(228),i=n(229),o=n(230),a=n(231),s=n(232);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(17);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(234);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(29),i=n(247)(r);t.exports=i},function(t,e,n){var r=n(47),i=n(251),o=n(252),a=n(253),s=n(254),u=n(255);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,t.exports=c},function(t,e,n){var r=n(20),i=n(21);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(3),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e,n){var r=n(28),i=n(35),o=Math.max;t.exports=function(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var s=null==n?0:i(n);return s<0&&(s=o(a+s,0)),r(t,e,s)}},function(t,e,n){var r=n(302)(n(137));t.exports=r},function(t,e,n){var r=n(54),i=n(3);t.exports=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=r(t.prototype),o=t.apply(n,e);return i(o)?o:n}}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";var r=n(6),i=n(215),o=n(245),a=n(19),s=n(68),u=n(10),c=n(32),h=n(126),l=n(55),f=n(300),p=n(36),d=n(301),m=n(136),y=n(37),v=n(16),g=n(56),b=n(138),_=n(80),w=n(81),S=n(314),E=n(315),T=n(316);function C(t){var e=t?C._parseNumbers(t):{};this.index=e.index||"",this.query=e.query||"",this.facets=e.facets||[],this.disjunctiveFacets=e.disjunctiveFacets||[],this.hierarchicalFacets=e.hierarchicalFacets||[],this.facetsRefinements=e.facetsRefinements||{},this.facetsExcludes=e.facetsExcludes||{},this.disjunctiveFacetsRefinements=e.disjunctiveFacetsRefinements||{},this.numericRefinements=e.numericRefinements||{},this.tagRefinements=e.tagRefinements||[],this.hierarchicalFacetsRefinements=e.hierarchicalFacetsRefinements||{},this.numericFilters=e.numericFilters,this.tagFilters=e.tagFilters,this.optionalTagFilters=e.optionalTagFilters,this.optionalFacetFilters=e.optionalFacetFilters,this.hitsPerPage=e.hitsPerPage,this.maxValuesPerFacet=e.maxValuesPerFacet,this.page=e.page||0,this.queryType=e.queryType,this.typoTolerance=e.typoTolerance,this.minWordSizefor1Typo=e.minWordSizefor1Typo,this.minWordSizefor2Typos=e.minWordSizefor2Typos,this.minProximity=e.minProximity,this.allowTyposOnNumericTokens=e.allowTyposOnNumericTokens,this.ignorePlurals=e.ignorePlurals,this.restrictSearchableAttributes=e.restrictSearchableAttributes,this.advancedSyntax=e.advancedSyntax,this.analytics=e.analytics,this.analyticsTags=e.analyticsTags,this.synonyms=e.synonyms,this.replaceSynonymsInHighlight=e.replaceSynonymsInHighlight,this.optionalWords=e.optionalWords,this.removeWordsIfNoResults=e.removeWordsIfNoResults,this.attributesToRetrieve=e.attributesToRetrieve,this.attributesToHighlight=e.attributesToHighlight,this.highlightPreTag=e.highlightPreTag,this.highlightPostTag=e.highlightPostTag,this.attributesToSnippet=e.attributesToSnippet,this.getRankingInfo=e.getRankingInfo,this.distinct=e.distinct,this.aroundLatLng=e.aroundLatLng,this.aroundLatLngViaIP=e.aroundLatLngViaIP,this.aroundRadius=e.aroundRadius,this.minimumAroundRadius=e.minimumAroundRadius,this.aroundPrecision=e.aroundPrecision,this.insideBoundingBox=e.insideBoundingBox,this.insidePolygon=e.insidePolygon,this.snippetEllipsisText=e.snippetEllipsisText,this.disableExactOnAttributes=e.disableExactOnAttributes,this.enableExactOnSingleWordQuery=e.enableExactOnSingleWordQuery,this.offset=e.offset,this.length=e.length;var n=this;o(e,function(t,e){-1===C.PARAMETERS.indexOf(e)&&(n[e]=t)})}C.PARAMETERS=r(new C),C._parseNumbers=function(t){if(t instanceof C)return t;var e={};if(a(["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"],function(n){var r=t[n];if(y(r)){var i=parseFloat(r);e[n]=f(i)?r:i}}),Array.isArray(t.insideBoundingBox)&&(e.insideBoundingBox=t.insideBoundingBox.map(function(t){return t.map(function(t){return parseFloat(t)})})),t.numericRefinements){var n={};a(t.numericRefinements,function(t,e){n[e]={},a(t,function(t,r){var i=u(t,function(t){return Array.isArray(t)?u(t,function(t){return y(t)?parseFloat(t):t}):y(t)?parseFloat(t):t});n[e][r]=i})}),e.numericRefinements=n}return w({},t,e)},C.make=function(t){var e=new C(t);return a(t.hierarchicalFacets,function(t){if(t.rootPath){var n=e.getHierarchicalRefinement(t.name);n.length>0&&0!==n[0].indexOf(t.rootPath)&&(e=e.clearRefinements(t.name)),0===(n=e.getHierarchicalRefinement(t.name)).length&&(e=e.toggleHierarchicalFacetRefinement(t.name,t.rootPath))}}),e},C.validate=function(t,e){var n=e||{};return t.tagFilters&&n.tagRefinements&&n.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):t.tagRefinements.length>0&&n.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):t.numericFilters&&n.numericRefinements&&!p(n.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):!p(t.numericRefinements)&&n.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},C.prototype={constructor:C,clearRefinements:function(t){var e=T.clearRefinement,n={numericRefinements:this._clearNumericRefinements(t),facetsRefinements:e(this.facetsRefinements,t,"conjunctiveFacet"),facetsExcludes:e(this.facetsExcludes,t,"exclude"),disjunctiveFacetsRefinements:e(this.disjunctiveFacetsRefinements,t,"disjunctiveFacet"),hierarchicalFacetsRefinements:e(this.hierarchicalFacetsRefinements,t,"hierarchicalFacet")};return n.numericRefinements===this.numericRefinements&&n.facetsRefinements===this.facetsRefinements&&n.facetsExcludes===this.facetsExcludes&&n.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&n.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(n)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(t){return t===this.index?this:this.setQueryParameters({index:t})},setQuery:function(t){return t===this.query?this:this.setQueryParameters({query:t})},setPage:function(t){return t===this.page?this:this.setQueryParameters({page:t})},setFacets:function(t){return this.setQueryParameters({facets:t})},setDisjunctiveFacets:function(t){return this.setQueryParameters({disjunctiveFacets:t})},setHitsPerPage:function(t){return this.hitsPerPage===t?this:this.setQueryParameters({hitsPerPage:t})},setTypoTolerance:function(t){return this.typoTolerance===t?this:this.setQueryParameters({typoTolerance:t})},addNumericRefinement:function(t,e,n){var r=S(n);if(this.isNumericRefined(t,e,r))return this;var i=w({},this.numericRefinements);return i[t]=w({},i[t]),i[t][e]?(i[t][e]=i[t][e].slice(),i[t][e].push(r)):i[t][e]=[r],this.setQueryParameters({numericRefinements:i})},getConjunctiveRefinements:function(t){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.facetsRefinements[t]||[]},getDisjunctiveRefinements:function(t){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.disjunctiveFacetsRefinements[t]||[]},getHierarchicalRefinement:function(t){return this.hierarchicalFacetsRefinements[t]||[]},getExcludeRefinements:function(t){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.facetsExcludes[t]||[]},removeNumericRefinement:function(t,e,n){if(void 0!==n){var r=S(n);return this.isNumericRefined(t,e,r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(n,i){return i===t&&n.op===e&&d(n.val,r)})}):this}return void 0!==e?this.isNumericRefined(t,e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(n,r){return r===t&&n.op===e})}):this:this.isNumericRefined(t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,n){return n===t})}):this},getNumericRefinements:function(t){return this.numericRefinements[t]||{}},getNumericRefinement:function(t,e){return this.numericRefinements[t]&&this.numericRefinements[t][e]},_clearNumericRefinements:function(t){if(m(t))return p(this.numericRefinements)?this.numericRefinements:{};if(y(t))return p(this.numericRefinements[t])?this.numericRefinements:h(this.numericRefinements,t);if(v(t)){var e=!1,n=c(this.numericRefinements,function(n,r,i){var o={};return a(r,function(n,r){var s=[];a(n,function(e){t({val:e,op:r},i,"numeric")||s.push(e)}),p(s)?e=!0:(s.length!==n.length&&(e=!0),o[r]=s)}),p(o)||(n[i]=o),n},{});return e?n:this.numericRefinements}},addFacet:function(t){return this.isConjunctiveFacet(t)?this:this.setQueryParameters({facets:this.facets.concat([t])})},addDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([t])})},addHierarchicalFacet:function(t){if(this.isHierarchicalFacet(t.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+t.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([t])})},addFacetRefinement:function(t,e){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return T.isRefined(this.facetsRefinements,t,e)?this:this.setQueryParameters({facetsRefinements:T.addRefinement(this.facetsRefinements,t,e)})},addExcludeRefinement:function(t,e){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return T.isRefined(this.facetsExcludes,t,e)?this:this.setQueryParameters({facetsExcludes:T.addRefinement(this.facetsExcludes,t,e)})},addDisjunctiveFacetRefinement:function(t,e){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return T.isRefined(this.disjunctiveFacetsRefinements,t,e)?this:this.setQueryParameters({disjunctiveFacetsRefinements:T.addRefinement(this.disjunctiveFacetsRefinements,t,e)})},addTagRefinement:function(t){if(this.isTagRefined(t))return this;var e={tagRefinements:this.tagRefinements.concat(t)};return this.setQueryParameters(e)},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:s(this.facets,function(e){return e!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:s(this.disjunctiveFacets,function(e){return e!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:s(this.hierarchicalFacets,function(e){return e.name!==t})}):this},removeFacetRefinement:function(t,e){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return T.isRefined(this.facetsRefinements,t,e)?this.setQueryParameters({facetsRefinements:T.removeRefinement(this.facetsRefinements,t,e)}):this},removeExcludeRefinement:function(t,e){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return T.isRefined(this.facetsExcludes,t,e)?this.setQueryParameters({facetsExcludes:T.removeRefinement(this.facetsExcludes,t,e)}):this},removeDisjunctiveFacetRefinement:function(t,e){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return T.isRefined(this.disjunctiveFacetsRefinements,t,e)?this.setQueryParameters({disjunctiveFacetsRefinements:T.removeRefinement(this.disjunctiveFacetsRefinements,t,e)}):this},removeTagRefinement:function(t){if(!this.isTagRefined(t))return this;var e={tagRefinements:s(this.tagRefinements,function(e){return e!==t})};return this.setQueryParameters(e)},toggleRefinement:function(t,e){return this.toggleFacetRefinement(t,e)},toggleFacetRefinement:function(t,e){if(this.isHierarchicalFacet(t))return this.toggleHierarchicalFacetRefinement(t,e);if(this.isConjunctiveFacet(t))return this.toggleConjunctiveFacetRefinement(t,e);if(this.isDisjunctiveFacet(t))return this.toggleDisjunctiveFacetRefinement(t,e);throw new Error("Cannot refine the undeclared facet "+t+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(t,e){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:T.toggleRefinement(this.facetsRefinements,t,e)})},toggleExcludeFacetRefinement:function(t,e){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:T.toggleRefinement(this.facetsExcludes,t,e)})},toggleDisjunctiveFacetRefinement:function(t,e){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:T.toggleRefinement(this.disjunctiveFacetsRefinements,t,e)})},toggleHierarchicalFacetRefinement:function(t,e){if(!this.isHierarchicalFacet(t))throw new Error(t+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(t)),r={};return void 0!==this.hierarchicalFacetsRefinements[t]&&this.hierarchicalFacetsRefinements[t].length>0&&(this.hierarchicalFacetsRefinements[t][0]===e||0===this.hierarchicalFacetsRefinements[t][0].indexOf(e+n))?-1===e.indexOf(n)?r[t]=[]:r[t]=[e.slice(0,e.lastIndexOf(n))]:r[t]=[e],this.setQueryParameters({hierarchicalFacetsRefinements:_({},r,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(t,e){if(this.isHierarchicalFacetRefined(t))throw new Error(t+" is already refined.");var n={};return n[t]=[e],this.setQueryParameters({hierarchicalFacetsRefinements:_({},n,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(t){if(!this.isHierarchicalFacetRefined(t))throw new Error(t+" is not refined.");var e={};return e[t]=[],this.setQueryParameters({hierarchicalFacetsRefinements:_({},e,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(t){return this.isTagRefined(t)?this.removeTagRefinement(t):this.addTagRefinement(t)},isDisjunctiveFacet:function(t){return l(this.disjunctiveFacets,t)>-1},isHierarchicalFacet:function(t){return void 0!==this.getHierarchicalFacetByName(t)},isConjunctiveFacet:function(t){return l(this.facets,t)>-1},isFacetRefined:function(t,e){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return T.isRefined(this.facetsRefinements,t,e)},isExcludeRefined:function(t,e){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return T.isRefined(this.facetsExcludes,t,e)},isDisjunctiveFacetRefined:function(t,e){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return T.isRefined(this.disjunctiveFacetsRefinements,t,e)},isHierarchicalFacetRefined:function(t,e){if(!this.isHierarchicalFacet(t))throw new Error(t+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this.getHierarchicalRefinement(t);return e?-1!==l(n,e):n.length>0},isNumericRefined:function(t,e,n){if(m(n)&&m(e))return!!this.numericRefinements[t];var r=this.numericRefinements[t]&&!m(this.numericRefinements[t][e]);if(m(n)||!r)return r;var i,o,a=S(n),s=!m((i=this.numericRefinements[t][e],o=a,g(i,function(t){return d(t,o)})));return r&&s},isTagRefined:function(t){return-1!==l(this.tagRefinements,t)},getRefinedDisjunctiveFacets:function(){var t=i(r(this.numericRefinements),this.disjunctiveFacets);return r(this.disjunctiveFacetsRefinements).concat(t).concat(this.getRefinedHierarchicalFacets())},getRefinedHierarchicalFacets:function(){return i(u(this.hierarchicalFacets,"name"),r(this.hierarchicalFacetsRefinements))},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return s(this.disjunctiveFacets,function(e){return-1===l(t,e)})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements"],getQueryParams:function(){var t=this.managedParameters,e={};return o(this,function(n,r){-1===l(t,r)&&void 0!==n&&(e[r]=n)}),e},getQueryParameter:function(t){if(!this.hasOwnProperty(t))throw new Error("Parameter '"+t+"' is not an attribute of SearchParameters (http://algolia.github.io/algoliasearch-helper-js/docs/SearchParameters.html)");return this[t]},setQueryParameter:function(t,e){if(this[t]===e)return this;var n={};return n[t]=e,this.setQueryParameters(n)},setQueryParameters:function(t){if(!t)return this;var e=C.validate(this,t);if(e)throw e;var n=C._parseNumbers(t);return this.mutateMe(function(e){var i=r(t);return a(i,function(t){e[t]=n[t]}),e})},filter:function(t){return E(this,t)},mutateMe:function(t){var e=new this.constructor(this);return t(e,this),e},_getHierarchicalFacetSortBy:function(t){return t.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(t){return t.separator||" > "},_getHierarchicalRootPath:function(t){return t.rootPath||null},_getHierarchicalShowParentLevel:function(t){return"boolean"!=typeof t.showParentLevel||t.showParentLevel},getHierarchicalFacetByName:function(t){return g(this.hierarchicalFacets,{name:t})},getHierarchicalFacetBreadcrumb:function(t){if(!this.isHierarchicalFacet(t))throw new Error("Cannot get the breadcrumb of an unknown hierarchical facet: `"+t+"`");var e=this.getHierarchicalRefinement(t)[0];if(!e)return[];var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(t)),r=e.split(n);return u(r,b)},toString:function(){return JSON.stringify(this,null,2)}},t.exports=C},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e,n){(function(t){var r=n(99),i="object"==typeof e&&e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(e,n(60)(t))},function(t,e,n){var r=n(217),i=n(233),o=n(235),a=n(236),s=n(237);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(11)(n(1),"Map");t.exports=r},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(243),i=n(110)(r);t.exports=i},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(114),i=n(248),o=n(5),a=n(0);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},function(t,e,n){var r=n(256),i=n(2);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,a,t,s))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(114),i=n(119),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return o.call(t,e)}))}:i;t.exports=s},function(t,e,n){var r=n(0),i=n(31),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||a.test(t)||!o.test(t)||null!=e&&t in Object(e)}},function(t,e,n){var r=n(74);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(15),i=n(9),o=n(0),a=n(31),s=1/0,u=r?r.prototype:void 0,c=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-s?"-0":n}},function(t,e,n){var r=n(33),i=n(17),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(101)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(118),i=n(128),o=n(34);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(116);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(8),i=n(76),o=n(2),a="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,h=u.hasOwnProperty,l=c.call(Object);t.exports=function(t){if(!o(t)||r(t)!=a)return!1;var e=i(t);if(null===e)return!0;var n=h.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}},function(t,e,n){var r=n(18),i=n(17),o=n(139),a=n(34),s=Object.prototype,u=s.hasOwnProperty,c=r(function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&o(e[0],e[1],c)&&(r=1);++n<r;)for(var h=e[n],l=a(h),f=-1,p=l.length;++f<p;){var d=l[f],m=t[d];(void 0===m||i(m,s[d])&&!u.call(t,d))&&(t[d]=h[d])}return t});t.exports=c},function(t,e,n){var r=n(310),i=n(313)(function(t,e,n){r(t,e,n)});t.exports=i},function(t,e,n){var r=n(144),i=n(328),o=n(329),a=n(146),s=n(341),u=n(150),c=n(342),h=n(152),l=n(153),f=n(35),p="Expected a function",d=1,m=2,y=8,v=16,g=32,b=64,_=Math.max;t.exports=function(t,e,n,w,S,E,T,C){var x=e&m;if(!x&&"function"!=typeof t)throw new TypeError(p);var I=w?w.length:0;if(I||(e&=~(g|b),w=S=void 0),T=void 0===T?T:_(f(T),0),C=void 0===C?C:f(C),I-=S?S.length:0,e&b){var A=w,R=S;w=S=void 0}var D=x?void 0:u(t),N=[t,e,n,w,S,A,R,E,T,C];if(D&&c(N,D),t=N[0],e=N[1],n=N[2],w=N[3],S=N[4],!(C=N[9]=void 0===N[9]?x?0:t.length:_(N[9]-I,0))&&e&(y|v)&&(e&=~(y|v)),e&&e!=d)O=e==y||e==v?o(t,e,C):e!=g&&e!=(d|g)||S.length?a.apply(void 0,N):s(t,e,n,w);else var O=i(t,e,n);return l((D?r:h)(O,N),t,e)}},function(t,e,n){var r=n(54),i=n(84),o=4294967295;function a(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=o,this.__views__=[]}a.prototype=r(i.prototype),a.prototype.constructor=a,t.exports=a},function(t,e){t.exports=function(){}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),o=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n};t.exports={arrayToObject:o,assign:function(t,e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var i=e[r],o=i.obj[i.prop],a=Object.keys(o),s=0;s<a.length;++s){var u=a[s],c=o[u];"object"==typeof c&&null!==c&&-1===n.indexOf(c)&&(e.push({obj:o,prop:u}),n.push(c))}return function(t){for(var e;t.length;){var n=t.pop();if(e=n.obj[n.prop],Array.isArray(e)){for(var r=[],i=0;i<e.length;++i)void 0!==e[i]&&r.push(e[i]);n.obj[n.prop]=r}}return e}(e)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",r=0;r<e.length;++r){var o=e.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=e.charAt(r):o<128?n+=i[o]:o<2048?n+=i[192|o>>6]+i[128|63&o]:o<55296||o>=57344?n+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(r)),n+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return n},isBuffer:function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,i){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(i.plainObjects||i.allowPrototypes||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var a=e;return Array.isArray(e)&&!Array.isArray(n)&&(a=o(e,i)),Array.isArray(e)&&Array.isArray(n)?(n.forEach(function(n,o){r.call(e,o)?e[o]&&"object"==typeof e[o]?e[o]=t(e[o],n,i):e.push(n):e[o]=n}),e):Object.keys(n).reduce(function(e,o){var a=n[o];return r.call(e,o)?e[o]=t(e[o],a,i):e[o]=a,e},a)}}},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(164),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,n(4))},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i=n(168),o={},a=r&&(document.head||document.getElementsByTagName("head")[0]),s=null,u=0,c=!1,h=function(){},l=null,f="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function d(t){for(var e=0;e<t.length;e++){var n=t[e],r=o[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(y(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(y(n.parts[i]));o[n.id]={id:n.id,refs:1,parts:a}}}}function m(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function y(t){var e,n,r=document.querySelector("style["+f+'~="'+t.id+'"]');if(r){if(c)return h;r.parentNode.removeChild(r)}if(p){var i=u++;r=s||(s=m()),e=b.bind(null,r,i,!1),n=b.bind(null,r,i,!0)}else r=m(),e=function(t,e){var n=e.css,r=e.media,i=e.sourceMap;r&&t.setAttribute("media",r);l.ssrId&&t.setAttribute(f,e.id);i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}t.exports=function(t,e,n,r){c=n,l=r||{};var a=i(t,e);return d(a),function(e){for(var n=[],r=0;r<a.length;r++){var s=a[r];(u=o[s.id]).refs--,n.push(u)}e?d(a=i(t,e)):a=[];for(r=0;r<n.length;r++){var u;if(0===(u=n[r]).refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete o[u.id]}}}};var v,g=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function b(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=g(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t,e,n,r,i,o){var a,s=t=t||{},u=typeof t.default;"object"!==u&&"function"!==u||(a=t,s=t.default);var c,h="function"==typeof s?s.options:s;if(e&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0),n&&(h.functional=!0),i&&(h._scopeId=i),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=c):r&&(c=r),c){var l=h.functional,f=l?h.render:h.beforeCreate;l?(h._injectStyles=c,h.render=function(t,e){return c.call(e),f(t,e)}):h.beforeCreate=f?[].concat(f,c):[c]}return{esModule:a,exports:s,options:h}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(91)),i=o(n(178));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"App",components:{searchResult:i.default},data:()=>({currentResults:[],apiKey:"1438eb53e2798341a2cf40d288211dc3",appId:"I9PO6RR6PN"}),mounted(){r.default.collection("movies").get().then(t=>{t.docs.forEach(t=>{this.currentResults.push({id:t.id})})});r.default.collection("movies").onSnapshot(t=>{this.listenToResults(t)})},methods:{listenToResults(t){t.docs.forEach(t=>{console.log(t)})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(169));n(173);var i=o(n(177));function o(t){return t&&t.__esModule?t:{default:t}}const a=r.default.initializeApp(i.default);a.firestore().settings({timestampsInSnapshots:!0}),e.default=a.firestore()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(172),i=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o="[DEFAULT]",a=[],s=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=r.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){a.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){a=a.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=o),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==o?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;r.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(a.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),a=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},t}();function u(t,e){throw c.create(t,e)}s.prototype.name&&s.prototype.options||s.prototype.delete||console.log("dc");var c=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),h=function t(){var e={},n={},a={},c={__esModule:!0,initializeApp:function(t,n){if(void 0===n&&(n={}),"object"!=typeof n||null===n){var r=n;n={name:r}}var a=n;void 0===a.name&&(a.name=o);var h=a.name;"string"==typeof h&&h||u("bad-app-name",{name:h+""}),i(e,h)&&u("duplicate-app",{name:h});var l=new s(t,a,c);return e[h]=l,f(l,"create"),l},app:h,apps:null,Promise:Promise,SDK_VERSION:"5.5.9",INTERNAL:{registerService:function(t,e,i,o,f){n[t]&&u("duplicate-service",{name:t}),n[t]=e,o&&(a[t]=o,l().forEach(function(t){o("create",t)}));var p=function(e){return void 0===e&&(e=h()),"function"!=typeof e[t]&&u("invalid-app-argument",{name:t}),e[t]()};return void 0!==i&&r.deepExtend(p,i),c[t]=p,s.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,f?e:[])},p},createFirebaseNamespace:t,extendNamespace:function(t){r.deepExtend(c,t)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(t){f(e[t],"delete"),delete e[t]},factories:n,useAsService:p,Promise:Promise,deepExtend:r.deepExtend}};function h(t){return i(e,t=t||o)||u("no-app",{name:t}),e[t]}function l(){return Object.keys(e).map(function(t){return e[t]})}function f(t,e){Object.keys(n).forEach(function(n){var r=p(t,n);null!==r&&a[r]&&a[r](e,t)})}function p(t,e){if("serverAuth"===e)return null;var n=e;return t.options,n}return r.patchProperty(c,"default",c),Object.defineProperty(c,"apps",{get:l}),r.patchProperty(h,"App",s),c}();e.firebase=h,e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.__extends=function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n.d(e,"__assign",function(){return i}),e.__rest=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n},e.__decorate=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},e.__param=function(t,e){return function(n,r){e(n,r,t)}},e.__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},e.__awaiter=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},e.__generator=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},e.__exportStar=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},e.__values=o,e.__read=a,e.__spread=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},e.__await=s,e.__asyncGenerator=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||u(t,e)})})}function u(t,e){try{(n=i[t](e)).value instanceof s?Promise.resolve(n.value.v).then(c,h):l(o[0][2],n)}catch(t){l(o[0][3],t)}var n}function c(t){u("next",t)}function h(t){u("throw",t)}function l(t,e){t(e),o.shift(),o.length&&u(o[0][0],o[0][1])}},e.__asyncDelegator=function(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){t[r]&&(e[r]=function(e){return(n=!n)?{value:s(t[r](e)),done:"return"===r}:i?i(e):e})}},e.__asyncValues=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):o(t)},e.__makeTemplateObject=function(t,e){Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e;return t},e.__importStar=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},e.__importDefault=function(t){return t&&t.__esModule?t:{default:t}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};var i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function s(t){return this instanceof s?(this.v=t,this):new s(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(91),o=(r=i)&&r.__esModule?r:{default:r};e.default={name:"search-result",props:{resultID:{type:String,required:!0}},data(){return{id:this.resultID,data:{}}},methods:{getData(t){o.default.collection("movies").doc(this.id).get().then(t=>{const e={movies:t.data(),id:this.id};return this.data=e}).catch(function(t){console.log("Error getting document:",t)})},listenToChanges(){o.default.collection("movies").doc(this.id).onSnapshot(t=>void 0===t.data()?this.data.movies=!1:t?this.data={id:this.id,movies:t.data()}:void 0)}},mounted(){this.getData(),this.listenToChanges()}}},function(t,e,n){t.exports=function(t,e){return function(n,i,o){if("function"==typeof n&&"object"==typeof i||"object"==typeof o)throw new r.AlgoliaSearchError("index.search usage is index.search(query, params, cb)");0===arguments.length||"function"==typeof n?(o=n,n=""):1!==arguments.length&&"function"!=typeof i||(o=i,i=void 0),"object"==typeof n&&null!==n?(i=n,n=void 0):void 0!==n&&null!==n||(n="");var a,s="";return void 0!==n&&(s+=t+"="+encodeURIComponent(n)),void 0!==i&&(i.additionalUA&&(a=i.additionalUA,delete i.additionalUA),s=this.as._getSearchParams(i,s)),this._search(s,e,o,a)}};var r=n(40)},function(t,e,n){t.exports=function(t,e){var r=n(192),i={};return n(13)(r(t),function(n){!0!==e(n)&&(i[n]=t[n])}),i}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(a(t),function(a){var s=encodeURIComponent(r(a))+n;return i(t[a])?o(t[a],function(t){return s+encodeURIComponent(r(t))}).join(e):s+encodeURIComponent(r(t[a]))}).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){var r=n(208),i=n(24),o=n(0),a=n(25),s=n(26),u=n(44),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),h=!n&&i(t),l=!n&&!h&&a(t),f=!n&&!h&&!l&&u(t),p=n||h||l||f,d=p?r(t.length,String):[],m=d.length;for(var y in t)!e&&!c.call(t,y)||p&&("length"==y||l&&("offset"==y||"parent"==y)||f&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,m))||d.push(y);return d}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(4))},function(t,e,n){var r=n(45),i=n(214),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(63),i=n(238),o=n(239);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(28);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(65),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),u=Array(s);++a<s;)u[a]=o[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=o[a];return c[e]=n(u),r(t,this,c)}}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(11),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e){var n=800,r=16,i=Date.now;t.exports=function(t){var e=0,o=0;return function(){var a=i(),s=r-(a-o);if(o=a,s>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(7),i=n(2);t.exports=function(t){return i(t)&&r(t)}},function(t,e,n){var r=n(246)();t.exports=r},function(t,e,n){var r=n(12);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e,n){var r=n(102),i=n(257),o=n(106),a=1,s=2;t.exports=function(t,e,n,u,c,h){var l=n&a,f=t.length,p=e.length;if(f!=p&&!(l&&p>f))return!1;var d=h.get(t);if(d&&h.get(e))return d==e;var m=-1,y=!0,v=n&s?new r:void 0;for(h.set(t,e),h.set(e,t);++m<f;){var g=t[m],b=e[m];if(u)var _=l?u(b,g,m,e,t,h):u(g,b,m,t,e,h);if(void 0!==_){if(_)continue;y=!1;break}if(v){if(!i(e,function(t,e){if(!o(v,e)&&(g===t||c(g,t,n,u,h)))return v.push(e)})){y=!1;break}}else if(g!==b&&!c(g,b,n,u,h)){y=!1;break}}return h.delete(t),h.delete(e),y}},function(t,e,n){var r=n(1).Uint8Array;t.exports=r},function(t,e,n){var r=n(118),i=n(71),o=n(6);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(70),i=n(0);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(11)(n(1),"WeakMap");t.exports=r},function(t,e,n){var r=n(3);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},function(t,e,n){var r=n(52);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(270),i=n(271);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e,n){var r=n(50),i=n(7);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,function(t,r,i){o[++n]=e(t,r,i)}),o}},function(t,e,n){var r=n(9),i=n(277),o=n(293),a=n(20),s=n(22),u=n(295),c=n(133),h=n(77),l=c(function(t,e){var n={};if(null==t)return n;var c=!1;e=r(e,function(e){return e=a(e,t),c||(c=e.length>1),e}),s(t,h(t),n),c&&(n=i(n,7,u));for(var l=e.length;l--;)o(n,e[l]);return n});t.exports=l},function(t,e,n){(function(t){var r=n(1),i="object"==typeof e&&e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(e,n(60)(t))},function(t,e,n){var r=n(70),i=n(76),o=n(71),a=n(119),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=s},function(t,e,n){var r=n(78);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(54),i=n(76),o=n(45);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e){t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}},function(t,e,n){var r=n(134),i=n(107),o=n(66);t.exports=function(t){return o(i(t,void 0,r),t+"")}},function(t,e,n){var r=n(296);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},function(t,e,n){var r=n(8),i=n(2),o="[object Number]";t.exports=function(t){return"number"==typeof t||i(t)&&r(t)==o}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){var r=n(105),i=n(5),o=n(35),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var u=null==n?0:o(n);return u<0&&(u=a(s+u,0)),r(t,i(e,3),u)}},function(t,e,n){var r=n(74),i=n(303),o=n(304),a=n(305),s=n(306),u=n(73),c=/^\s+|\s+$/g;t.exports=function(t,e,n){if((t=u(t))&&(n||void 0===e))return t.replace(c,"");if(!t||!(e=r(e)))return t;var h=s(t),l=s(e),f=a(h,l),p=o(h,l)+1;return i(h,f,p).join("")}},function(t,e,n){var r=n(17),i=n(7),o=n(26),a=n(3);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},function(t,e,n){var r=n(33),i=n(17);t.exports=function(t,e,n){(void 0===n||i(t[e],n))&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e){t.exports=function(t,e){if("__proto__"!=e)return t[e]}},function(t,e,n){"use strict";var r=n(19),i=n(317),o=n(55),a=n(137),s=n(123),u=n(318),c=n(56),h=n(320),l=n(10),f=n(143),p=n(80),d=n(81),m=n(16),y=n(327),v=n(343),g=n(154),b=n(346);function _(t){var e={};return r(t,function(t,n){e[t]=n}),e}function w(t,e,n){e&&e[n]&&(t.stats=e[n])}function S(t,e){var n=e[0];this._rawResults=e,this.query=n.query,this.parsedQuery=n.parsedQuery,this.hits=n.hits,this.index=n.index,this.hitsPerPage=n.hitsPerPage,this.nbHits=n.nbHits,this.nbPages=n.nbPages,this.page=n.page,this.processingTimeMS=u(e,"processingTimeMS"),this.aroundLatLng=n.aroundLatLng,this.automaticRadius=n.automaticRadius,this.serverUsed=n.serverUsed,this.timeoutCounts=n.timeoutCounts,this.timeoutHits=n.timeoutHits,this.exhaustiveFacetsCount=n.exhaustiveFacetsCount,this.exhaustiveNbHits=n.exhaustiveNbHits,this.userData=n.userData,this.queryID=n.queryID,this.disjunctiveFacets=[],this.hierarchicalFacets=l(t.hierarchicalFacets,function(){return[]}),this.facets=[];var s=t.getRefinedDisjunctiveFacets(),f=_(t.facets),m=_(t.disjunctiveFacets),y=1,v=this;r(n.facets,function(e,r){var i,s,u=(i=t.hierarchicalFacets,s=r,c(i,function(t){return h(t.attributes,s)}));if(u){var l=u.attributes.indexOf(r),p=a(t.hierarchicalFacets,{name:u.name});v.hierarchicalFacets[p][l]={attribute:r,data:e,exhaustive:n.exhaustiveFacetsCount}}else{var d,y=-1!==o(t.disjunctiveFacets,r),g=-1!==o(t.facets,r);y&&(d=m[r],v.disjunctiveFacets[d]={name:r,data:e,exhaustive:n.exhaustiveFacetsCount},w(v.disjunctiveFacets[d],n.facets_stats,r)),g&&(d=f[r],v.facets[d]={name:r,data:e,exhaustive:n.exhaustiveFacetsCount},w(v.facets[d],n.facets_stats,r))}}),this.hierarchicalFacets=i(this.hierarchicalFacets),r(s,function(i){var s=e[y],u=t.getHierarchicalFacetByName(i);r(s.facets,function(e,i){var c;if(u){c=a(t.hierarchicalFacets,{name:u.name});var h=a(v.hierarchicalFacets[c],{attribute:i});if(-1===h)return;v.hierarchicalFacets[c][h].data=d({},v.hierarchicalFacets[c][h].data,e)}else{c=m[i];var l=n.facets&&n.facets[i]||{};v.disjunctiveFacets[c]={name:i,data:p({},e,l),exhaustive:s.exhaustiveFacetsCount},w(v.disjunctiveFacets[c],s.facets_stats,i),t.disjunctiveFacetsRefinements[i]&&r(t.disjunctiveFacetsRefinements[i],function(e){!v.disjunctiveFacets[c].data[e]&&o(t.disjunctiveFacetsRefinements[i],e)>-1&&(v.disjunctiveFacets[c].data[e]=0)})}}),y++}),r(t.getRefinedHierarchicalFacets(),function(n){var i=t.getHierarchicalFacetByName(n),o=t._getHierarchicalFacetSeparator(i),s=t.getHierarchicalRefinement(n);if(!(0===s.length||s[0].split(o).length<2)){var u=e[y];r(u.facets,function(e,n){var r=a(t.hierarchicalFacets,{name:i.name}),u=a(v.hierarchicalFacets[r],{attribute:n});if(-1!==u){var c={};if(s.length>0){var h=s[0].split(o)[0];c[h]=v.hierarchicalFacets[r][u].data[h]}v.hierarchicalFacets[r][u].data=p(c,e,v.hierarchicalFacets[r][u].data)}}),y++}}),r(t.facetsExcludes,function(t,e){var i=f[e];v.facets[i]={name:e,data:n.facets[e],exhaustive:n.exhaustiveFacetsCount},r(t,function(t){v.facets[i]=v.facets[i]||{name:e},v.facets[i].data=v.facets[i].data||{},v.facets[i].data[t]=0})}),this.hierarchicalFacets=l(this.hierarchicalFacets,b(t)),this.facets=i(this.facets),this.disjunctiveFacets=i(this.disjunctiveFacets),this._state=t}function E(t,e){if(!e.data||0===e.data.length)return e;var n=t(l(e.data,y(E,t)));return d({},e,{data:n})}function T(t,e){return e.sort(t)}function C(t,e){var n=c(t,{name:e});return n&&n.stats}function x(t,e,n,r,i){var o=c(i,{name:n}),a=s(o,"data["+r+"]"),u=s(o,"exhaustive");return{type:e,attributeName:n,name:r,count:a||0,exhaustive:u||!1}}S.prototype.getFacetByName=function(t){var e={name:t};return c(this.facets,e)||c(this.disjunctiveFacets,e)||c(this.hierarchicalFacets,e)},S.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],S.prototype.getFacetValues=function(t,e){var n=function(t,e){var n={name:e};if(t._state.isConjunctiveFacet(e)){var r=c(t.facets,n);return r?l(r.data,function(n,r){return{name:r,count:n,isRefined:t._state.isFacetRefined(e,r),isExcluded:t._state.isExcludeRefined(e,r)}}):[]}if(t._state.isDisjunctiveFacet(e)){var i=c(t.disjunctiveFacets,n);return i?l(i.data,function(n,r){return{name:r,count:n,isRefined:t._state.isDisjunctiveFacetRefined(e,r)}}):[]}if(t._state.isHierarchicalFacet(e))return c(t.hierarchicalFacets,n)}(this,t);if(!n)throw new Error(t+" is not a retrieved facet.");var r=p({},e,{sortBy:S.DEFAULT_SORT});if(Array.isArray(r.sortBy)){var i=g(r.sortBy,S.DEFAULT_SORT);return Array.isArray(n)?f(n,i[0],i[1]):E(v(f,i[0],i[1]),n)}if(m(r.sortBy))return Array.isArray(n)?n.sort(r.sortBy):E(y(T,r.sortBy),n);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},S.prototype.getFacetStats=function(t){if(this._state.isConjunctiveFacet(t))return C(this.facets,t);if(this._state.isDisjunctiveFacet(t))return C(this.disjunctiveFacets,t);throw new Error(t+" is not present in `facets` or `disjunctiveFacets`")},S.prototype.getRefinements=function(){var t=this._state,e=this,n=[];return r(t.facetsRefinements,function(i,o){r(i,function(r){n.push(x(t,"facet",o,r,e.facets))})}),r(t.facetsExcludes,function(i,o){r(i,function(r){n.push(x(t,"exclude",o,r,e.facets))})}),r(t.disjunctiveFacetsRefinements,function(i,o){r(i,function(r){n.push(x(t,"disjunctive",o,r,e.disjunctiveFacets))})}),r(t.hierarchicalFacetsRefinements,function(i,o){r(i,function(r){n.push(function(t,e,n,r){for(var i=c(r,{name:e}),o=t.getHierarchicalFacetByName(e),a=n.split(o.separator),u=a[a.length-1],h=0;void 0!==i&&h<a.length;++h)i=c(i.data,{name:a[h]});var l=s(i,"count"),f=s(i,"exhaustive");return{type:"hierarchical",attributeName:e,name:u,count:l||0,exhaustive:f||!1}}(t,o,r,e.hierarchicalFacets))})}),r(t.numericRefinements,function(t,e){r(t,function(t,i){r(t,function(t){n.push({type:"numeric",attributeName:e,name:t,numericValue:t,operator:i})})})}),r(t.tagRefinements,function(t){n.push({type:"tag",attributeName:"_tags",name:t})}),n},t.exports=S},function(t,e,n){var r=n(323),i=n(0);t.exports=function(t,e,n,o){return null==t?[]:(i(e)||(e=null==e?[]:[e]),i(n=o?void 0:n)||(n=null==n?[]:[n]),r(t,e,n))}},function(t,e,n){var r=n(12),i=n(145),o=i?function(t,e){return i.set(t,e),t}:r;t.exports=o},function(t,e,n){var r=n(120),i=r&&new r;t.exports=i},function(t,e,n){var r=n(147),i=n(148),o=n(330),a=n(57),s=n(149),u=n(38),c=n(340),h=n(23),l=n(1),f=1,p=2,d=8,m=16,y=128,v=512;t.exports=function t(e,n,g,b,_,w,S,E,T,C){var x=n&y,I=n&f,A=n&p,R=n&(d|m),D=n&v,N=A?void 0:a(e);return function f(){for(var p=arguments.length,d=Array(p),m=p;m--;)d[m]=arguments[m];if(R)var y=u(f),v=o(d,y);if(b&&(d=r(d,b,_,R)),w&&(d=i(d,w,S,R)),p-=v,R&&p<C){var O=h(d,y);return s(e,n,t,f.placeholder,g,d,O,E,T,C-p)}var k=I?g:this,P=A?k[e]:e;return p=d.length,E?d=c(d,E):D&&p>1&&d.reverse(),x&&T<p&&(d.length=T),this&&this!==l&&this instanceof f&&(P=N||a(P)),P.apply(k,d)}}},function(t,e){var n=Math.max;t.exports=function(t,e,r,i){for(var o=-1,a=t.length,s=r.length,u=-1,c=e.length,h=n(a-s,0),l=Array(c+h),f=!i;++u<c;)l[u]=e[u];for(;++o<s;)(f||o<a)&&(l[r[o]]=t[o]);for(;h--;)l[u++]=t[o++];return l}},function(t,e){var n=Math.max;t.exports=function(t,e,r,i){for(var o=-1,a=t.length,s=-1,u=r.length,c=-1,h=e.length,l=n(a-u,0),f=Array(l+h),p=!i;++o<l;)f[o]=t[o];for(var d=o;++c<h;)f[d+c]=e[c];for(;++s<u;)(p||o<a)&&(f[d+r[s]]=t[o++]);return f}},function(t,e,n){var r=n(331),i=n(152),o=n(153),a=1,s=2,u=4,c=8,h=32,l=64;t.exports=function(t,e,n,f,p,d,m,y,v,g){var b=e&c;e|=b?h:l,(e&=~(b?l:h))&u||(e&=~(a|s));var _=[t,e,p,b?d:void 0,b?m:void 0,b?void 0:d,b?void 0:m,y,v,g],w=n.apply(void 0,_);return r(t)&&i(w,_),w.placeholder=f,o(w,t,e)}},function(t,e,n){var r=n(145),i=n(332),o=r?function(t){return r.get(t)}:i;t.exports=o},function(t,e,n){var r=n(54),i=n(84);function o(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}o.prototype=r(i.prototype),o.prototype.constructor=o,t.exports=o},function(t,e,n){var r=n(144),i=n(110)(r);t.exports=i},function(t,e,n){var r=n(337),i=n(338),o=n(66),a=n(339);t.exports=function(t,e,n){var s=e+"";return o(t,i(s,a(r(s),n)))}},function(t,e,n){"use strict";var r=n(32),i=n(56),o=n(344);t.exports=function(t,e){return r(t,function(t,n){var r=n.split(":");if(e&&1===r.length){var a=i(e,function(t){return o(t,n[0])});a&&(r=a.split(":"))}return t[0].push(r[0]),t[1].push(r[1]),t},[[],[]])}},function(t,e,n){var r=n(52),i=n(348),o=n(20);t.exports=function(t,e,n){for(var a=-1,s=e.length,u={};++a<s;){var c=e[a],h=r(t,c);n(h,c)&&i(u,o(c,t),h)}return u}},function(t,e,n){(function(t,r){var i=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),u=r[n];n<o;u=r[++n])m(u)||!_(u)?a+=" "+u:a+=" "+s(u);return a},e.deprecate=function(n,i){if(g(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var o,a={};function s(t,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),h(r,t,r.depth)}function u(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function c(t,e){return t}function h(t,n,r){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return v(i)||(i=h(t,i,r)),i}var o=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(v(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(y(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(E(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return l(n)}var c,_="",T=!1,C=["{","}"];(p(n)&&(T=!0,C=["[","]"]),E(n))&&(_=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(_=" "+RegExp.prototype.toString.call(n)),w(n)&&(_=" "+Date.prototype.toUTCString.call(n)),S(n)&&(_=" "+l(n)),0!==a.length||T&&0!=n.length?r<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=T?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)I(e,String(a))?o.push(f(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))}),o}(t,n,r,s,a):a.map(function(e){return f(t,n,r,s,e,T)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,_,C)):C[0]+_+C[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),I(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=m(n)?h(t,u.value,null):h(t,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),g(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function m(t){return null===t}function y(t){return"number"==typeof t}function v(t){return"string"==typeof t}function g(t){return void 0===t}function b(t){return _(t)&&"[object RegExp]"===T(t)}function _(t){return"object"==typeof t&&null!==t}function w(t){return _(t)&&"[object Date]"===T(t)}function S(t){return _(t)&&("[object Error]"===T(t)||t instanceof Error)}function E(t){return"function"==typeof t}function T(t){return Object.prototype.toString.call(t)}function C(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(g(o)&&(o=Object({NODE_ENV:"production"}).NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=r.pid;a[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else a[t]=function(){};return a[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=v,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=g,e.isRegExp=b,e.isObject=_,e.isDate=w,e.isError=S,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(350);var x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;console.log("%s - %s",(t=new Date,n=[C(t.getHours()),C(t.getMinutes()),C(t.getSeconds())].join(":"),[t.getDate(),x[t.getMonth()],n].join(" ")),e.format.apply(e,arguments))},e.inherits=n(58),e._extend=function(t,e){if(!e||!_(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,n(4),n(39))},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,a,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(c=n.slice()).length,u=0;u<a;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var a;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";var r=n(352),i=n(59),o=n(355),a=n(358),s=n(19),u=n(359),c=n(10),h=n(361),l=n(362),f=n(37),p=n(79),d=n(36),m=n(159),y=n(85).encode;function v(t){return p(t)?l(t,v):Array.isArray(t)?c(t,v):f(t)?y(t):t}var g=["dFR","fR","nR","hFR","tR"],b=r.ENCODED_PARAMETERS;function _(t,e,n,r){if(null!==t&&(n=n.replace(t,""),r=r.replace(t,"")),n=e[n]||n,r=e[r]||r,-1!==b.indexOf(n)||-1!==b.indexOf(r)){if("q"===n)return-1;if("q"===r)return 1;var i=-1!==g.indexOf(n),o=-1!==g.indexOf(r);if(i&&!o)return 1;if(o&&!i)return-1}return n.localeCompare(r)}e.getStateFromQueryString=function(t,e){var n=e&&e.prefix||"",a=e&&e.mapping||{},s=m(a),c=o.parse(t),l=new RegExp("^"+n),f=h(c,function(t,e){var i=n&&l.test(e)?e.replace(l,""):e;return r.decode(s[i]||i)||i}),p=i._parseNumbers(f);return u(p,i.PARAMETERS)},e.getUnrecognizedParametersInQueryString=function(t,e){var n=e&&e.prefix,i=e&&e.mapping||{},a=m(i),u={},c=o.parse(t);if(n){var h=new RegExp("^"+n);s(c,function(t,e){h.test(e)||(u[e]=t)})}else s(c,function(t,e){r.decode(a[e]||e)||(u[e]=t)});return u},e.getQueryStringFromState=function(t,e){var n=e&&e.moreAttributes,i=e&&e.prefix||"",s=e&&e.mapping||{},u=e&&e.safe||!1,c=m(s),l=u?t:v(t),f=h(l,function(t,e){var n=r.encode(e);return i+(s[n]||n)}),p=""===i?null:new RegExp("^"+i),y=a(_,null,p,c);if(!d(n)){var g=o.stringify(f,{encode:u,sort:y}),b=o.stringify(n,{encode:u});return g?g+"&"+b:b}return o.stringify(f,{encode:u,sort:y})}},function(t,e,n){var r=n(108),i=n(353),o=n(12),a=Object.prototype.toString,s=i(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=a.call(e)),t[e]=n},r(o));t.exports=s},function(t,e,n){"use strict";var r=String.prototype.replace,i=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,i,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(t,e,n){"use strict";t.exports="2.26.1"},function(t,e,n){"use strict";var r=a(n(163)),i=a(n(165)),o=a(n(184));function a(t){return t&&t.__esModule?t:{default:t}}r.default.use(o.default),new r.default({el:"#search-ui",render:t=>t(i.default)})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,n){
/*!
 * Vue.js v2.5.21
 * (c) 2014-2018 Evan You
 * Released under the MIT License.
 */
var r=Object.freeze({});function i(t){return void 0===t||null===t}function o(t){return void 0!==t&&null!==t}function a(t){return!0===t}function s(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function u(t){return null!==t&&"object"==typeof t}var c=Object.prototype.toString;function h(t){return"[object Object]"===c.call(t)}function l(t){return"[object RegExp]"===c.call(t)}function f(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function p(t){return null==t?"":"object"==typeof t?JSON.stringify(t,null,2):String(t)}function d(t){var e=parseFloat(t);return isNaN(e)?t:e}function m(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}var y=m("slot,component",!0),v=m("key,ref,slot,slot-scope,is");function g(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function _(t,e){return b.call(t,e)}function w(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var S=/-(\w)/g,E=w(function(t){return t.replace(S,function(t,e){return e?e.toUpperCase():""})}),T=w(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),C=/\B([A-Z])/g,x=w(function(t){return t.replace(C,"-$1").toLowerCase()});var I=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n};function A(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r}function R(t,e){for(var n in e)t[n]=e[n];return t}function D(t){for(var e={},n=0;n<t.length;n++)t[n]&&R(e,t[n]);return e}function N(t,e,n){}var O=function(t,e,n){return!1},k=function(t){return t};function P(t,e){if(t===e)return!0;var n=u(t),r=u(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every(function(t,n){return P(t,e[n])});if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(i||o)return!1;var a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every(function(n){return P(t[n],e[n])})}catch(t){return!1}}function F(t,e){for(var n=0;n<t.length;n++)if(P(t[n],e))return n;return-1}function M(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var j="data-server-rendered",L=["component","directive","filter"],q=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],B={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:O,isReservedAttr:O,isUnknownElement:O,getTagNamespace:N,parsePlatformTagName:k,mustUseProp:O,async:!0,_lifecycleHooks:q};function U(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function V(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var Q=/[^\w.$]/;var H,z="__proto__"in{},K="undefined"!=typeof window,$="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,W=$&&WXEnvironment.platform.toLowerCase(),G=K&&window.navigator.userAgent.toLowerCase(),J=G&&/msie|trident/.test(G),X=G&&G.indexOf("msie 9.0")>0,Y=G&&G.indexOf("edge/")>0,Z=(G&&G.indexOf("android"),G&&/iphone|ipad|ipod|ios/.test(G)||"ios"===W),tt=(G&&/chrome\/\d+/.test(G),{}.watch),et=!1;if(K)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){et=!0}}),window.addEventListener("test-passive",null,nt)}catch(t){}var rt=function(){return void 0===H&&(H=!K&&!$&&void 0!==t&&(t.process&&"server"===t.process.env.VUE_ENV)),H},it=K&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ot(t){return"function"==typeof t&&/native code/.test(t.toString())}var at,st="undefined"!=typeof Symbol&&ot(Symbol)&&"undefined"!=typeof Reflect&&ot(Reflect.ownKeys);at="undefined"!=typeof Set&&ot(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ut=N,ct=0,ht=function(){this.id=ct++,this.subs=[]};ht.prototype.addSub=function(t){this.subs.push(t)},ht.prototype.removeSub=function(t){g(this.subs,t)},ht.prototype.depend=function(){ht.target&&ht.target.addDep(this)},ht.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},ht.target=null;var lt=[];function ft(t){lt.push(t),ht.target=t}function pt(){lt.pop(),ht.target=lt[lt.length-1]}var dt=function(t,e,n,r,i,o,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},mt={child:{configurable:!0}};mt.child.get=function(){return this.componentInstance},Object.defineProperties(dt.prototype,mt);var yt=function(t){void 0===t&&(t="");var e=new dt;return e.text=t,e.isComment=!0,e};function vt(t){return new dt(void 0,void 0,void 0,String(t))}function gt(t){var e=new dt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var bt=Array.prototype,_t=Object.create(bt);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=bt[t];V(_t,t,function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var i,o=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&a.observeArray(i),a.dep.notify(),o})});var wt=Object.getOwnPropertyNames(_t),St=!0;function Et(t){St=t}var Tt=function(t){var e;this.value=t,this.dep=new ht,this.vmCount=0,V(t,"__ob__",this),Array.isArray(t)?(z?(e=_t,t.__proto__=e):function(t,e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];V(t,o,e[o])}}(t,_t,wt),this.observeArray(t)):this.walk(t)};function Ct(t,e){var n;if(u(t)&&!(t instanceof dt))return _(t,"__ob__")&&t.__ob__ instanceof Tt?n=t.__ob__:St&&!rt()&&(Array.isArray(t)||h(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Tt(t)),e&&n&&n.vmCount++,n}function xt(t,e,n,r,i){var o=new ht,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set;s&&!u||2!==arguments.length||(n=t[e]);var c=!i&&Ct(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return ht.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(e)&&function t(e){for(var n=void 0,r=0,i=e.length;r<i;r++)(n=e[r])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&t(n)}(e))),e},set:function(e){var r=s?s.call(t):n;e===r||e!=e&&r!=r||s&&!u||(u?u.call(t,e):n=e,c=!i&&Ct(e),o.notify())}})}}function It(t,e,n){if(Array.isArray(t)&&f(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(xt(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function At(t,e){if(Array.isArray(t)&&f(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||_(t,e)&&(delete t[e],n&&n.dep.notify())}}Tt.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)xt(t,e[n])},Tt.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Ct(t[e])};var Rt=B.optionMergeStrategies;function Dt(t,e){if(!e)return t;for(var n,r,i,o=Object.keys(e),a=0;a<o.length;a++)r=t[n=o[a]],i=e[n],_(t,n)?r!==i&&h(r)&&h(i)&&Dt(r,i):It(t,n,i);return t}function Nt(t,e,n){return n?function(){var r="function"==typeof e?e.call(n,n):e,i="function"==typeof t?t.call(n,n):t;return r?Dt(r,i):i}:e?t?function(){return Dt("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Ot(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t}function kt(t,e,n,r){var i=Object.create(t||null);return e?R(i,e):i}Rt.data=function(t,e,n){return n?Nt(t,e,n):e&&"function"!=typeof e?t:Nt(t,e)},q.forEach(function(t){Rt[t]=Ot}),L.forEach(function(t){Rt[t+"s"]=kt}),Rt.watch=function(t,e,n,r){if(t===tt&&(t=void 0),e===tt&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};for(var o in R(i,t),e){var a=i[o],s=e[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},Rt.props=Rt.methods=Rt.inject=Rt.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return R(i,t),e&&R(i,e),i},Rt.provide=Nt;var Pt=function(t,e){return void 0===e?t:e};function Ft(t,e,n){if("function"==typeof e&&(e=e.options),function(t,e){var n=t.props;if(n){var r,i,o={};if(Array.isArray(n))for(r=n.length;r--;)"string"==typeof(i=n[r])&&(o[E(i)]={type:null});else if(h(n))for(var a in n)i=n[a],o[E(a)]=h(i)?i:{type:i};t.props=o}}(e),function(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(h(n))for(var o in n){var a=n[o];r[o]=h(a)?R({from:o},a):{from:a}}}}(e),function(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"==typeof r&&(e[n]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(t=Ft(t,e.extends,n)),e.mixins))for(var r=0,i=e.mixins.length;r<i;r++)t=Ft(t,e.mixins[r],n);var o,a={};for(o in t)s(o);for(o in e)_(t,o)||s(o);function s(r){var i=Rt[r]||Pt;a[r]=i(t[r],e[r],n,r)}return a}function Mt(t,e,n,r){if("string"==typeof n){var i=t[e];if(_(i,n))return i[n];var o=E(n);if(_(i,o))return i[o];var a=T(o);return _(i,a)?i[a]:i[n]||i[o]||i[a]}}function jt(t,e,n,r){var i=e[t],o=!_(n,t),a=n[t],s=Bt(Boolean,i.type);if(s>-1)if(o&&!_(i,"default"))a=!1;else if(""===a||a===x(t)){var u=Bt(String,i.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=function(t,e,n){if(!_(e,"default"))return;var r=e.default;0;if(t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n])return t._props[n];return"function"==typeof r&&"Function"!==Lt(e.type)?r.call(t):r}(r,i,t);var c=St;Et(!0),Ct(a),Et(c)}return a}function Lt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function qt(t,e){return Lt(t)===Lt(e)}function Bt(t,e){if(!Array.isArray(e))return qt(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(qt(e[n],t))return n;return-1}function Ut(t,e,n){if(e)for(var r=e;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{if(!1===i[o].call(r,t,e,n))return}catch(t){Vt(t,r,"errorCaptured hook")}}Vt(t,e,n)}function Vt(t,e,n){if(B.errorHandler)try{return B.errorHandler.call(null,t,e,n)}catch(t){Qt(t,null,"config.errorHandler")}Qt(t,e,n)}function Qt(t,e,n){if(!K&&!$||"undefined"==typeof console)throw t;console.error(t)}var Ht,zt,Kt=[],$t=!1;function Wt(){$t=!1;var t=Kt.slice(0);Kt.length=0;for(var e=0;e<t.length;e++)t[e]()}var Gt=!1;if(void 0!==n&&ot(n))zt=function(){n(Wt)};else if("undefined"==typeof MessageChannel||!ot(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())zt=function(){setTimeout(Wt,0)};else{var Jt=new MessageChannel,Xt=Jt.port2;Jt.port1.onmessage=Wt,zt=function(){Xt.postMessage(1)}}if("undefined"!=typeof Promise&&ot(Promise)){var Yt=Promise.resolve();Ht=function(){Yt.then(Wt),Z&&setTimeout(N)}}else Ht=zt;function Zt(t,e){var n;if(Kt.push(function(){if(t)try{t.call(e)}catch(t){Ut(t,e,"nextTick")}else n&&n(e)}),$t||($t=!0,Gt?zt():Ht()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){n=t})}var te=new at;function ee(t){!function t(e,n){var r,i;var o=Array.isArray(e);if(!o&&!u(e)||Object.isFrozen(e)||e instanceof dt)return;if(e.__ob__){var a=e.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(o)for(r=e.length;r--;)t(e[r],n);else for(i=Object.keys(e),r=i.length;r--;)t(e[i[r]],n)}(t,te),te.clear()}var ne,re=w(function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),r="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=r?t.slice(1):t,once:n,capture:r,passive:e}});function ie(t){function e(){var t=arguments,n=e.fns;if(!Array.isArray(n))return n.apply(null,arguments);for(var r=n.slice(),i=0;i<r.length;i++)r[i].apply(null,t)}return e.fns=t,e}function oe(t,e,n,r,o,s){var u,c,h,l;for(u in t)c=t[u],h=e[u],l=re(u),i(c)||(i(h)?(i(c.fns)&&(c=t[u]=ie(c)),a(l.once)&&(c=t[u]=o(l.name,c,l.capture)),n(l.name,c,l.capture,l.passive,l.params)):c!==h&&(h.fns=c,t[u]=h));for(u in e)i(t[u])&&r((l=re(u)).name,e[u],l.capture)}function ae(t,e,n){var r;t instanceof dt&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function u(){n.apply(this,arguments),g(r.fns,u)}i(s)?r=ie([u]):o(s.fns)&&a(s.merged)?(r=s).fns.push(u):r=ie([s,u]),r.merged=!0,t[e]=r}function se(t,e,n,r,i){if(o(e)){if(_(e,n))return t[n]=e[n],i||delete e[n],!0;if(_(e,r))return t[n]=e[r],i||delete e[r],!0}return!1}function ue(t){return s(t)?[vt(t)]:Array.isArray(t)?function t(e,n){var r=[];var u,c,h,l;for(u=0;u<e.length;u++)i(c=e[u])||"boolean"==typeof c||(h=r.length-1,l=r[h],Array.isArray(c)?c.length>0&&(ce((c=t(c,(n||"")+"_"+u))[0])&&ce(l)&&(r[h]=vt(l.text+c[0].text),c.shift()),r.push.apply(r,c)):s(c)?ce(l)?r[h]=vt(l.text+c):""!==c&&r.push(vt(c)):ce(c)&&ce(l)?r[h]=vt(l.text+c.text):(a(e._isVList)&&o(c.tag)&&i(c.key)&&o(n)&&(c.key="__vlist"+n+"_"+u+"__"),r.push(c)));return r}(t):void 0}function ce(t){return o(t)&&o(t.text)&&!1===t.isComment}function he(t,e){return(t.__esModule||st&&"Module"===t[Symbol.toStringTag])&&(t=t.default),u(t)?e.extend(t):t}function le(t){return t.isComment&&t.asyncFactory}function fe(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(o(n)&&(o(n.componentOptions)||le(n)))return n}}function pe(t,e){ne.$on(t,e)}function de(t,e){ne.$off(t,e)}function me(t,e){var n=ne;return function r(){null!==e.apply(null,arguments)&&n.$off(t,r)}}function ye(t,e,n){ne=t,oe(e,n||{},pe,de,me),ne=void 0}function ve(t,e){var n={};if(!t)return n;for(var r=0,i=t.length;r<i;r++){var o=t[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(ge)&&delete n[c];return n}function ge(t){return t.isComment&&!t.asyncFactory||" "===t.text}function be(t,e){e=e||{};for(var n=0;n<t.length;n++)Array.isArray(t[n])?be(t[n],e):e[t[n].key]=t[n].fn;return e}var _e=null;function we(t){var e=_e;return _e=t,function(){_e=e}}function Se(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Ee(t,e){if(e){if(t._directInactive=!1,Se(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Ee(t.$children[n]);Te(t,"activated")}}function Te(t,e){ft();var n=t.$options[e];if(n)for(var r=0,i=n.length;r<i;r++)try{n[r].call(t)}catch(n){Ut(n,t,e+" hook")}t._hasHookEvent&&t.$emit("hook:"+e),pt()}var Ce=[],xe=[],Ie={},Ae=!1,Re=!1,De=0;function Ne(){var t,e;for(Re=!0,Ce.sort(function(t,e){return t.id-e.id}),De=0;De<Ce.length;De++)(t=Ce[De]).before&&t.before(),e=t.id,Ie[e]=null,t.run();var n=xe.slice(),r=Ce.slice();De=Ce.length=xe.length=0,Ie={},Ae=Re=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Ee(t[e],!0)}(n),function(t){var e=t.length;for(;e--;){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Te(r,"updated")}}(r),it&&B.devtools&&it.emit("flush")}var Oe=0,ke=function(t,e,n,r,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++Oe,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new at,this.newDepIds=new at,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!Q.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}(e),this.getter||(this.getter=N)),this.value=this.lazy?void 0:this.get()};ke.prototype.get=function(){var t;ft(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;Ut(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ee(t),pt(),this.cleanupDeps()}return t},ke.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},ke.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},ke.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==Ie[e]){if(Ie[e]=!0,Re){for(var n=Ce.length-1;n>De&&Ce[n].id>t.id;)n--;Ce.splice(n+1,0,t)}else Ce.push(t);Ae||(Ae=!0,Zt(Ne))}}(this)},ke.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||u(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){Ut(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},ke.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ke.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},ke.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||g(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var Pe={enumerable:!0,configurable:!0,get:N,set:N};function Fe(t,e,n){Pe.get=function(){return this[e][n]},Pe.set=function(t){this[e][n]=t},Object.defineProperty(t,n,Pe)}function Me(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var n=t.$options.propsData||{},r=t._props={},i=t.$options._propKeys=[],o=!t.$parent;o||Et(!1);var a=function(o){i.push(o);var a=jt(o,e,n,t);xt(r,o,a),o in t||Fe(t,"_props",o)};for(var s in e)a(s);Et(!0)}(t,e.props),e.methods&&function(t,e){t.$options.props;for(var n in e)t[n]="function"!=typeof e[n]?N:I(e[n],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;h(e=t._data="function"==typeof e?function(t,e){ft();try{return t.call(e,e)}catch(t){return Ut(t,e,"data()"),{}}finally{pt()}}(e,t):e||{})||(e={});var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);for(;i--;){var o=n[i];0,r&&_(r,o)||U(o)||Fe(t,"_data",o)}Ct(e,!0)}(t):Ct(t._data={},!0),e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),r=rt();for(var i in e){var o=e[i],a="function"==typeof o?o:o.get;0,r||(n[i]=new ke(t,a||N,N,je)),i in t||Le(t,i,o)}}(t,e.computed),e.watch&&e.watch!==tt&&function(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)Ue(t,n,r[i]);else Ue(t,n,r)}}(t,e.watch)}var je={lazy:!0};function Le(t,e,n){var r=!rt();"function"==typeof n?(Pe.get=r?qe(e):Be(n),Pe.set=N):(Pe.get=n.get?r&&!1!==n.cache?qe(e):Be(n.get):N,Pe.set=n.set||N),Object.defineProperty(t,e,Pe)}function qe(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),ht.target&&e.depend(),e.value}}function Be(t){return function(){return t.call(this,this)}}function Ue(t,e,n,r){return h(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,r)}function Ve(t,e){if(t){for(var n=Object.create(null),r=st?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):Object.keys(t),i=0;i<r.length;i++){for(var o=r[i],a=t[o].from,s=e;s;){if(s._provided&&_(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[o]){var u=t[o].default;n[o]="function"==typeof u?u.call(e):u}else 0}return n}}function Qe(t,e){var n,r,i,a,s;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=e(t[r],r);else if("number"==typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(u(t))for(a=Object.keys(t),n=new Array(a.length),r=0,i=a.length;r<i;r++)s=a[r],n[r]=e(t[s],s,r);return o(n)||(n=[]),n._isVList=!0,n}function He(t,e,n,r){var i,o=this.$scopedSlots[t];o?(n=n||{},r&&(n=R(R({},r),n)),i=o(n)||e):i=this.$slots[t]||e;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function ze(t){return Mt(this.$options,"filters",t)||k}function Ke(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function $e(t,e,n,r,i){var o=B.keyCodes[e]||n;return i&&r&&!B.keyCodes[e]?Ke(i,r):o?Ke(o,t):r?x(r)!==e:void 0}function We(t,e,n,r,i){if(n)if(u(n)){var o;Array.isArray(n)&&(n=D(n));var a=function(a){if("class"===a||"style"===a||v(a))o=t;else{var s=t.attrs&&t.attrs.type;o=r||B.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var u=E(a);a in o||u in o||(o[a]=n[a],i&&((t.on||(t.on={}))["update:"+u]=function(t){n[a]=t}))};for(var s in n)a(s)}else;return t}function Ge(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e?r:(Xe(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),r)}function Je(t,e,n){return Xe(t,"__once__"+e+(n?"_"+n:""),!0),t}function Xe(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&Ye(t[r],e+"_"+r,n);else Ye(t,e,n)}function Ye(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function Ze(t,e){if(e)if(h(e)){var n=t.on=t.on?R({},t.on):{};for(var r in e){var i=n[r],o=e[r];n[r]=i?[].concat(i,o):o}}else;return t}function tn(t){t._o=Je,t._n=d,t._s=p,t._l=Qe,t._t=He,t._q=P,t._i=F,t._m=Ge,t._f=ze,t._k=$e,t._b=We,t._v=vt,t._e=yt,t._u=be,t._g=Ze}function en(t,e,n,i,o){var s,u=o.options;_(i,"_uid")?(s=Object.create(i))._original=i:(s=i,i=i._original);var c=a(u._compiled),h=!c;this.data=t,this.props=e,this.children=n,this.parent=i,this.listeners=t.on||r,this.injections=Ve(u.inject,i),this.slots=function(){return ve(n,i)},c&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=t.scopedSlots||r),u._scopeId?this._c=function(t,e,n,r){var o=ln(s,t,e,n,r,h);return o&&!Array.isArray(o)&&(o.fnScopeId=u._scopeId,o.fnContext=i),o}:this._c=function(t,e,n,r){return ln(s,t,e,n,r,h)}}function nn(t,e,n,r,i){var o=gt(t);return o.fnContext=n,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function rn(t,e){for(var n in e)t[E(n)]=e[n]}tn(en.prototype);var on={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;on.prepatch(n,n)}else{(t.componentInstance=function(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;o(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns);return new t.componentOptions.Ctor(n)}(t,_e)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions;!function(t,e,n,i,o){var a=!!(o||t.$options._renderChildren||i.data.scopedSlots||t.$scopedSlots!==r);if(t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=o,t.$attrs=i.data.attrs||r,t.$listeners=n||r,e&&t.$options.props){Et(!1);for(var s=t._props,u=t.$options._propKeys||[],c=0;c<u.length;c++){var h=u[c],l=t.$options.props;s[h]=jt(h,l,e,t)}Et(!0),t.$options.propsData=e}n=n||r;var f=t.$options._parentListeners;t.$options._parentListeners=n,ye(t,n,f),a&&(t.$slots=ve(o,i.context),t.$forceUpdate())}(e.componentInstance=t.componentInstance,n.propsData,n.listeners,e,n.children)},insert:function(t){var e,n=t.context,r=t.componentInstance;r._isMounted||(r._isMounted=!0,Te(r,"mounted")),t.data.keepAlive&&(n._isMounted?((e=r)._inactive=!1,xe.push(e)):Ee(r,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?function t(e,n){if(!(n&&(e._directInactive=!0,Se(e))||e._inactive)){e._inactive=!0;for(var r=0;r<e.$children.length;r++)t(e.$children[r]);Te(e,"deactivated")}}(e,!0):e.$destroy())}},an=Object.keys(on);function sn(t,e,n,s,c){if(!i(t)){var h=n.$options._base;if(u(t)&&(t=h.extend(t)),"function"==typeof t){var l;if(i(t.cid)&&void 0===(t=function(t,e,n){if(a(t.error)&&o(t.errorComp))return t.errorComp;if(o(t.resolved))return t.resolved;if(a(t.loading)&&o(t.loadingComp))return t.loadingComp;if(!o(t.contexts)){var r=t.contexts=[n],s=!0,c=function(t){for(var e=0,n=r.length;e<n;e++)r[e].$forceUpdate();t&&(r.length=0)},h=M(function(n){t.resolved=he(n,e),s||c(!0)}),l=M(function(e){o(t.errorComp)&&(t.error=!0,c(!0))}),f=t(h,l);return u(f)&&("function"==typeof f.then?i(t.resolved)&&f.then(h,l):o(f.component)&&"function"==typeof f.component.then&&(f.component.then(h,l),o(f.error)&&(t.errorComp=he(f.error,e)),o(f.loading)&&(t.loadingComp=he(f.loading,e),0===f.delay?t.loading=!0:setTimeout(function(){i(t.resolved)&&i(t.error)&&(t.loading=!0,c(!1))},f.delay||200)),o(f.timeout)&&setTimeout(function(){i(t.resolved)&&l(null)},f.timeout))),s=!1,t.loading?t.loadingComp:t.resolved}t.contexts.push(n)}(l=t,h,n)))return function(t,e,n,r,i){var o=yt();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}(l,e,n,s,c);e=e||{},pn(t),o(e.model)&&function(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.props||(e.props={}))[n]=e.model.value;var i=e.on||(e.on={}),a=i[r],s=e.model.callback;o(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(i[r]=[s].concat(a)):i[r]=s}(t.options,e);var f=function(t,e,n){var r=e.options.props;if(!i(r)){var a={},s=t.attrs,u=t.props;if(o(s)||o(u))for(var c in r){var h=x(c);se(a,u,c,h,!0)||se(a,s,c,h,!1)}return a}}(e,t);if(a(t.options.functional))return function(t,e,n,i,a){var s=t.options,u={},c=s.props;if(o(c))for(var h in c)u[h]=jt(h,c,e||r);else o(n.attrs)&&rn(u,n.attrs),o(n.props)&&rn(u,n.props);var l=new en(n,u,a,i,t),f=s.render.call(null,l._c,l);if(f instanceof dt)return nn(f,n,l.parent,s);if(Array.isArray(f)){for(var p=ue(f)||[],d=new Array(p.length),m=0;m<p.length;m++)d[m]=nn(p[m],n,l.parent,s);return d}}(t,f,e,n,s);var p=e.on;if(e.on=e.nativeOn,a(t.options.abstract)){var d=e.slot;e={},d&&(e.slot=d)}!function(t){for(var e=t.hook||(t.hook={}),n=0;n<an.length;n++){var r=an[n],i=e[r],o=on[r];i===o||i&&i._merged||(e[r]=i?un(o,i):o)}}(e);var m=t.options.name||c;return new dt("vue-component-"+t.cid+(m?"-"+m:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:f,listeners:p,tag:c,children:s},l)}}}function un(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}var cn=1,hn=2;function ln(t,e,n,r,c,h){return(Array.isArray(n)||s(n))&&(c=r,r=n,n=void 0),a(h)&&(c=hn),function(t,e,n,r,s){if(o(n)&&o(n.__ob__))return yt();o(n)&&o(n.is)&&(e=n.is);if(!e)return yt();0;Array.isArray(r)&&"function"==typeof r[0]&&((n=n||{}).scopedSlots={default:r[0]},r.length=0);s===hn?r=ue(r):s===cn&&(r=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(r));var c,h;if("string"==typeof e){var l;h=t.$vnode&&t.$vnode.ns||B.getTagNamespace(e),c=B.isReservedTag(e)?new dt(B.parsePlatformTagName(e),n,r,void 0,void 0,t):n&&n.pre||!o(l=Mt(t.$options,"components",e))?new dt(e,n,r,void 0,void 0,t):sn(l,n,t,r,e)}else c=sn(e,n,t,r);return Array.isArray(c)?c:o(c)?(o(h)&&function t(e,n,r){e.ns=n;"foreignObject"===e.tag&&(n=void 0,r=!0);if(o(e.children))for(var s=0,u=e.children.length;s<u;s++){var c=e.children[s];o(c.tag)&&(i(c.ns)||a(r)&&"svg"!==c.tag)&&t(c,n,r)}}(c,h),o(n)&&function(t){u(t.style)&&ee(t.style);u(t.class)&&ee(t.class)}(n),c):yt()}(t,e,n,r,c)}var fn=0;function pn(t){var e=t.options;if(t.super){var n=pn(t.super);if(n!==t.superOptions){t.superOptions=n;var r=function(t){var e,n=t.options,r=t.extendOptions,i=t.sealedOptions;for(var o in n)n[o]!==i[o]&&(e||(e={}),e[o]=dn(n[o],r[o],i[o]));return e}(t);r&&R(t.extendOptions,r),(e=t.options=Ft(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function dn(t,e,n){if(Array.isArray(t)){var r=[];n=Array.isArray(n)?n:[n],e=Array.isArray(e)?e:[e];for(var i=0;i<t.length;i++)(e.indexOf(t[i])>=0||n.indexOf(t[i])<0)&&r.push(t[i]);return r}return t}function mn(t){this._init(t)}function yn(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var o=t.name||n.options.name;var a=function(t){this._init(t)};return(a.prototype=Object.create(n.prototype)).constructor=a,a.cid=e++,a.options=Ft(n.options,t),a.super=n,a.options.props&&function(t){var e=t.options.props;for(var n in e)Fe(t.prototype,"_props",n)}(a),a.options.computed&&function(t){var e=t.options.computed;for(var n in e)Le(t.prototype,n,e[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,L.forEach(function(t){a[t]=n[t]}),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=R({},a.options),i[r]=a,a}}function vn(t){return t&&(t.Ctor.options.name||t.tag)}function gn(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!l(t)&&t.test(e)}function bn(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var a=n[o];if(a){var s=vn(a.componentOptions);s&&!e(s)&&_n(n,o,r,i)}}}function _n(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,g(n,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=fn++,e._isVue=!0,t&&t._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=Ft(pn(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&ye(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,i=n&&n.context;t.$slots=ve(e._renderChildren,i),t.$scopedSlots=r,t._c=function(e,n,r,i){return ln(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return ln(t,e,n,r,i,!0)};var o=n&&n.data;xt(t,"$attrs",o&&o.attrs||r,null,!0),xt(t,"$listeners",e._parentListeners||r,null,!0)}(e),Te(e,"beforeCreate"),function(t){var e=Ve(t.$options.inject,t);e&&(Et(!1),Object.keys(e).forEach(function(n){xt(t,n,e[n])}),Et(!0))}(e),Me(e),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(e),Te(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(mn),function(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=It,t.prototype.$delete=At,t.prototype.$watch=function(t,e,n){if(h(e))return Ue(this,t,e,n);(n=n||{}).user=!0;var r=new ke(this,t,e,n);if(n.immediate)try{e.call(this,r.value)}catch(t){Ut(t,this,'callback for immediate watcher "'+r.expression+'"')}return function(){r.teardown()}}}(mn),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)r.$on(t[i],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)n.$off(t[r],e);return n}var o=n._events[t];if(!o)return n;if(!e)return n._events[t]=null,n;if(e)for(var a,s=o.length;s--;)if((a=o[s])===e||a.fn===e){o.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?A(n):n;for(var r=A(arguments,1),i=0,o=n.length;i<o;i++)try{n[i].apply(e,r)}catch(n){Ut(n,e,'event handler for "'+t+'"')}}return e}}(mn),function(t){t.prototype._update=function(t,e){var n=this,r=n.$el,i=n._vnode,o=we(n);n._vnode=t,n.$el=i?n.__patch__(i,t):n.__patch__(n.$el,t,e,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Te(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||g(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Te(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(mn),function(t){tn(t.prototype),t.prototype.$nextTick=function(t){return Zt(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,i=n.render,o=n._parentVnode;o&&(e.$scopedSlots=o.data.scopedSlots||r),e.$vnode=o;try{t=i.call(e._renderProxy,e.$createElement)}catch(n){Ut(n,e,"render"),t=e._vnode}return t instanceof dt||(t=yt()),t.parent=o,t}}(mn);var wn=[String,RegExp,Array],Sn={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:wn,exclude:wn,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)_n(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",function(e){bn(t,function(t){return gn(e,t)})}),this.$watch("exclude",function(e){bn(t,function(t){return!gn(e,t)})})},render:function(){var t=this.$slots.default,e=fe(t),n=e&&e.componentOptions;if(n){var r=vn(n),i=this.include,o=this.exclude;if(i&&(!r||!gn(i,r))||o&&r&&gn(o,r))return e;var a=this.cache,s=this.keys,u=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;a[u]?(e.componentInstance=a[u].componentInstance,g(s,u),s.push(u)):(a[u]=e,s.push(u),this.max&&s.length>parseInt(this.max)&&_n(a,s[0],s,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return B}};Object.defineProperty(t,"config",e),t.util={warn:ut,extend:R,mergeOptions:Ft,defineReactive:xt},t.set=It,t.delete=At,t.nextTick=Zt,t.options=Object.create(null),L.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,R(t.options.components,Sn),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=A(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Ft(this.options,t),this}}(t),yn(t),function(t){L.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&h(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}(t)}(mn),Object.defineProperty(mn.prototype,"$isServer",{get:rt}),Object.defineProperty(mn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(mn,"FunctionalRenderContext",{value:en}),mn.version="2.5.21";var En=m("style,class"),Tn=m("input,textarea,option,select,progress"),Cn=function(t,e,n){return"value"===n&&Tn(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},xn=m("contenteditable,draggable,spellcheck"),In=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),An="http://www.w3.org/1999/xlink",Rn=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Dn=function(t){return Rn(t)?t.slice(6,t.length):""},Nn=function(t){return null==t||!1===t};function On(t){for(var e=t.data,n=t,r=t;o(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=kn(r.data,e));for(;o(n=n.parent);)n&&n.data&&(e=kn(e,n.data));return function(t,e){if(o(t)||o(e))return Pn(t,Fn(e));return""}(e.staticClass,e.class)}function kn(t,e){return{staticClass:Pn(t.staticClass,e.staticClass),class:o(t.class)?[t.class,e.class]:e.class}}function Pn(t,e){return t?e?t+" "+e:t:e||""}function Fn(t){return Array.isArray(t)?function(t){for(var e,n="",r=0,i=t.length;r<i;r++)o(e=Fn(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}(t):u(t)?function(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}(t):"string"==typeof t?t:""}var Mn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},jn=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Ln=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),qn=function(t){return jn(t)||Ln(t)};function Bn(t){return Ln(t)?"svg":"math"===t?"math":void 0}var Un=Object.create(null);var Vn=m("text,number,password,search,email,tel,url");function Qn(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}var Hn=Object.freeze({createElement:function(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)},createElementNS:function(t,e){return document.createElementNS(Mn[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),zn={create:function(t,e){Kn(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Kn(t,!0),Kn(e))},destroy:function(t){Kn(t,!0)}};function Kn(t,e){var n=t.data.ref;if(o(n)){var r=t.context,i=t.componentInstance||t.elm,a=r.$refs;e?Array.isArray(a[n])?g(a[n],i):a[n]===i&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(i)<0&&a[n].push(i):a[n]=[i]:a[n]=i}}var $n=new dt("",{},[]),Wn=["create","activate","update","remove","destroy"];function Gn(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&o(t.data)===o(e.data)&&function(t,e){if("input"!==t.tag)return!0;var n,r=o(n=t.data)&&o(n=n.attrs)&&n.type,i=o(n=e.data)&&o(n=n.attrs)&&n.type;return r===i||Vn(r)&&Vn(i)}(t,e)||a(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&i(e.asyncFactory.error))}function Jn(t,e,n){var r,i,a={};for(r=e;r<=n;++r)o(i=t[r].key)&&(a[i]=r);return a}var Xn={create:Yn,update:Yn,destroy:function(t){Yn(t,$n)}};function Yn(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n,r,i,o=t===$n,a=e===$n,s=tr(t.data.directives,t.context),u=tr(e.data.directives,e.context),c=[],h=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,nr(i,"update",e,t),i.def&&i.def.componentUpdated&&h.push(i)):(nr(i,"bind",e,t),i.def&&i.def.inserted&&c.push(i));if(c.length){var l=function(){for(var n=0;n<c.length;n++)nr(c[n],"inserted",e,t)};o?ae(e,"insert",l):l()}h.length&&ae(e,"postpatch",function(){for(var n=0;n<h.length;n++)nr(h[n],"componentUpdated",e,t)});if(!o)for(n in s)u[n]||nr(s[n],"unbind",t,t,a)}(t,e)}var Zn=Object.create(null);function tr(t,e){var n,r,i=Object.create(null);if(!t)return i;for(n=0;n<t.length;n++)(r=t[n]).modifiers||(r.modifiers=Zn),i[er(r)]=r,r.def=Mt(e.$options,"directives",r.name);return i}function er(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function nr(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(r){Ut(r,n.context,"directive "+t.name+" "+e+" hook")}}var rr=[zn,Xn];function ir(t,e){var n=e.componentOptions;if(!(o(n)&&!1===n.Ctor.options.inheritAttrs||i(t.data.attrs)&&i(e.data.attrs))){var r,a,s=e.elm,u=t.data.attrs||{},c=e.data.attrs||{};for(r in o(c.__ob__)&&(c=e.data.attrs=R({},c)),c)a=c[r],u[r]!==a&&or(s,r,a);for(r in(J||Y)&&c.value!==u.value&&or(s,"value",c.value),u)i(c[r])&&(Rn(r)?s.removeAttributeNS(An,Dn(r)):xn(r)||s.removeAttribute(r))}}function or(t,e,n){t.tagName.indexOf("-")>-1?ar(t,e,n):In(e)?Nn(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):xn(e)?t.setAttribute(e,Nn(n)||"false"===n?"false":"true"):Rn(e)?Nn(n)?t.removeAttributeNS(An,Dn(e)):t.setAttributeNS(An,e,n):ar(t,e,n)}function ar(t,e,n){if(Nn(n))t.removeAttribute(e);else{if(J&&!X&&("TEXTAREA"===t.tagName||"INPUT"===t.tagName)&&"placeholder"===e&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var sr={create:ir,update:ir};function ur(t,e){var n=e.elm,r=e.data,a=t.data;if(!(i(r.staticClass)&&i(r.class)&&(i(a)||i(a.staticClass)&&i(a.class)))){var s=On(e),u=n._transitionClasses;o(u)&&(s=Pn(s,Fn(u))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var cr,hr,lr,fr,pr,dr,mr={create:ur,update:ur},yr=/[\w).+\-_$\]]/;function vr(t){var e,n,r,i,o,a=!1,s=!1,u=!1,c=!1,h=0,l=0,f=0,p=0;for(r=0;r<t.length;r++)if(n=e,e=t.charCodeAt(r),a)39===e&&92!==n&&(a=!1);else if(s)34===e&&92!==n&&(s=!1);else if(u)96===e&&92!==n&&(u=!1);else if(c)47===e&&92!==n&&(c=!1);else if(124!==e||124===t.charCodeAt(r+1)||124===t.charCodeAt(r-1)||h||l||f){switch(e){case 34:s=!0;break;case 39:a=!0;break;case 96:u=!0;break;case 40:f++;break;case 41:f--;break;case 91:l++;break;case 93:l--;break;case 123:h++;break;case 125:h--}if(47===e){for(var d=r-1,m=void 0;d>=0&&" "===(m=t.charAt(d));d--);m&&yr.test(m)||(c=!0)}}else void 0===i?(p=r+1,i=t.slice(0,r).trim()):y();function y(){(o||(o=[])).push(t.slice(p,r).trim()),p=r+1}if(void 0===i?i=t.slice(0,r).trim():0!==p&&y(),o)for(r=0;r<o.length;r++)i=gr(i,o[r]);return i}function gr(t,e){var n=e.indexOf("(");if(n<0)return'_f("'+e+'")('+t+")";var r=e.slice(0,n),i=e.slice(n+1);return'_f("'+r+'")('+t+(")"!==i?","+i:i)}function br(t){console.error("[Vue compiler]: "+t)}function _r(t,e){return t?t.map(function(t){return t[e]}).filter(function(t){return t}):[]}function wr(t,e,n){(t.props||(t.props=[])).push({name:e,value:n}),t.plain=!1}function Sr(t,e,n){(t.attrs||(t.attrs=[])).push({name:e,value:n}),t.plain=!1}function Er(t,e,n){t.attrsMap[e]=n,t.attrsList.push({name:e,value:n})}function Tr(t,e,n,r,i,o){(t.directives||(t.directives=[])).push({name:e,rawName:n,value:r,arg:i,modifiers:o}),t.plain=!1}function Cr(t,e,n,i,o,a){var s;i=i||r,"click"===e&&(i.right?(e="contextmenu",delete i.right):i.middle&&(e="mouseup")),i.capture&&(delete i.capture,e="!"+e),i.once&&(delete i.once,e="~"+e),i.passive&&(delete i.passive,e="&"+e),i.native?(delete i.native,s=t.nativeEvents||(t.nativeEvents={})):s=t.events||(t.events={});var u={value:n.trim()};i!==r&&(u.modifiers=i);var c=s[e];Array.isArray(c)?o?c.unshift(u):c.push(u):s[e]=c?o?[u,c]:[c,u]:u,t.plain=!1}function xr(t,e,n){var r=Ir(t,":"+e)||Ir(t,"v-bind:"+e);if(null!=r)return vr(r);if(!1!==n){var i=Ir(t,e);if(null!=i)return JSON.stringify(i)}}function Ir(t,e,n){var r;if(null!=(r=t.attrsMap[e]))for(var i=t.attrsList,o=0,a=i.length;o<a;o++)if(i[o].name===e){i.splice(o,1);break}return n&&delete t.attrsMap[e],r}function Ar(t,e,n){var r=n||{},i=r.number,o="$$v";r.trim&&(o="(typeof $$v === 'string'? $$v.trim(): $$v)"),i&&(o="_n("+o+")");var a=Rr(e,o);t.model={value:"("+e+")",expression:JSON.stringify(e),callback:"function ($$v) {"+a+"}"}}function Rr(t,e){var n=function(t){if(t=t.trim(),cr=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<cr-1)return(fr=t.lastIndexOf("."))>-1?{exp:t.slice(0,fr),key:'"'+t.slice(fr+1)+'"'}:{exp:t,key:null};hr=t,fr=pr=dr=0;for(;!Nr();)Or(lr=Dr())?Pr(lr):91===lr&&kr(lr);return{exp:t.slice(0,pr),key:t.slice(pr+1,dr)}}(t);return null===n.key?t+"="+e:"$set("+n.exp+", "+n.key+", "+e+")"}function Dr(){return hr.charCodeAt(++fr)}function Nr(){return fr>=cr}function Or(t){return 34===t||39===t}function kr(t){var e=1;for(pr=fr;!Nr();)if(Or(t=Dr()))Pr(t);else if(91===t&&e++,93===t&&e--,0===e){dr=fr;break}}function Pr(t){for(var e=t;!Nr()&&(t=Dr())!==e;);}var Fr,Mr="__r",jr="__c";function Lr(t,e,n){var r=Fr;return function i(){null!==e.apply(null,arguments)&&Br(t,i,n,r)}}function qr(t,e,n,r){var i;e=(i=e)._withTask||(i._withTask=function(){Gt=!0;try{return i.apply(null,arguments)}finally{Gt=!1}}),Fr.addEventListener(t,e,et?{capture:n,passive:r}:n)}function Br(t,e,n,r){(r||Fr).removeEventListener(t,e._withTask||e,n)}function Ur(t,e){if(!i(t.data.on)||!i(e.data.on)){var n=e.data.on||{},r=t.data.on||{};Fr=e.elm,function(t){if(o(t[Mr])){var e=J?"change":"input";t[e]=[].concat(t[Mr],t[e]||[]),delete t[Mr]}o(t[jr])&&(t.change=[].concat(t[jr],t.change||[]),delete t[jr])}(n),oe(n,r,qr,Br,Lr,e.context),Fr=void 0}}var Vr={create:Ur,update:Ur};function Qr(t,e){if(!i(t.data.domProps)||!i(e.data.domProps)){var n,r,a=e.elm,s=t.data.domProps||{},u=e.data.domProps||{};for(n in o(u.__ob__)&&(u=e.data.domProps=R({},u)),s)i(u[n])&&(a[n]="");for(n in u){if(r=u[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),r===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n){a._value=r;var c=i(r)?"":String(r);Hr(a,c)&&(a.value=c)}else a[n]=r}}}function Hr(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,e)||function(t,e){var n=t.value,r=t._vModifiers;if(o(r)){if(r.lazy)return!1;if(r.number)return d(n)!==d(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}(t,e))}var zr={create:Qr,update:Qr},Kr=w(function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach(function(t){if(t){var r=t.split(n);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e});function $r(t){var e=Wr(t.style);return t.staticStyle?R(t.staticStyle,e):e}function Wr(t){return Array.isArray(t)?D(t):"string"==typeof t?Kr(t):t}var Gr,Jr=/^--/,Xr=/\s*!important$/,Yr=function(t,e,n){if(Jr.test(e))t.style.setProperty(e,n);else if(Xr.test(n))t.style.setProperty(e,n.replace(Xr,""),"important");else{var r=ti(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},Zr=["Webkit","Moz","ms"],ti=w(function(t){if(Gr=Gr||document.createElement("div").style,"filter"!==(t=E(t))&&t in Gr)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<Zr.length;n++){var r=Zr[n]+e;if(r in Gr)return r}});function ei(t,e){var n=e.data,r=t.data;if(!(i(n.staticStyle)&&i(n.style)&&i(r.staticStyle)&&i(r.style))){var a,s,u=e.elm,c=r.staticStyle,h=r.normalizedStyle||r.style||{},l=c||h,f=Wr(e.data.style)||{};e.data.normalizedStyle=o(f.__ob__)?R({},f):f;var p=function(t,e){var n,r={};if(e)for(var i=t;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=$r(i.data))&&R(r,n);(n=$r(t.data))&&R(r,n);for(var o=t;o=o.parent;)o.data&&(n=$r(o.data))&&R(r,n);return r}(e,!0);for(s in l)i(p[s])&&Yr(u,s,"");for(s in p)(a=p[s])!==l[s]&&Yr(u,s,null==a?"":a)}}var ni={create:ei,update:ei},ri=/\s+/;function ii(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(ri).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function oi(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(ri).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function ai(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&R(e,si(t.name||"v")),R(e,t),e}return"string"==typeof t?si(t):void 0}}var si=w(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),ui=K&&!X,ci="transition",hi="animation",li="transition",fi="transitionend",pi="animation",di="animationend";ui&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(li="WebkitTransition",fi="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(pi="WebkitAnimation",di="webkitAnimationEnd"));var mi=K?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function yi(t){mi(function(){mi(t)})}function vi(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),ii(t,e))}function gi(t,e){t._transitionClasses&&g(t._transitionClasses,e),oi(t,e)}function bi(t,e,n){var r=wi(t,e),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===ci?fi:di,u=0,c=function(){t.removeEventListener(s,h),n()},h=function(e){e.target===t&&++u>=a&&c()};setTimeout(function(){u<a&&c()},o+1),t.addEventListener(s,h)}var _i=/\b(transform|all)(,|$)/;function wi(t,e){var n,r=window.getComputedStyle(t),i=(r[li+"Delay"]||"").split(", "),o=(r[li+"Duration"]||"").split(", "),a=Si(i,o),s=(r[pi+"Delay"]||"").split(", "),u=(r[pi+"Duration"]||"").split(", "),c=Si(s,u),h=0,l=0;return e===ci?a>0&&(n=ci,h=a,l=o.length):e===hi?c>0&&(n=hi,h=c,l=u.length):l=(n=(h=Math.max(a,c))>0?a>c?ci:hi:null)?n===ci?o.length:u.length:0,{type:n,timeout:h,propCount:l,hasTransform:n===ci&&_i.test(r[li+"Property"])}}function Si(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return Ei(e)+Ei(t[n])}))}function Ei(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Ti(t,e){var n=t.elm;o(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=ai(t.data.transition);if(!i(r)&&!o(n._enterCb)&&1===n.nodeType){for(var a=r.css,s=r.type,c=r.enterClass,h=r.enterToClass,l=r.enterActiveClass,f=r.appearClass,p=r.appearToClass,m=r.appearActiveClass,y=r.beforeEnter,v=r.enter,g=r.afterEnter,b=r.enterCancelled,_=r.beforeAppear,w=r.appear,S=r.afterAppear,E=r.appearCancelled,T=r.duration,C=_e,x=_e.$vnode;x&&x.parent;)C=(x=x.parent).context;var I=!C._isMounted||!t.isRootInsert;if(!I||w||""===w){var A=I&&f?f:c,R=I&&m?m:l,D=I&&p?p:h,N=I&&_||y,O=I&&"function"==typeof w?w:v,k=I&&S||g,P=I&&E||b,F=d(u(T)?T.enter:T);0;var j=!1!==a&&!X,L=Ii(O),q=n._enterCb=M(function(){j&&(gi(n,D),gi(n,R)),q.cancelled?(j&&gi(n,A),P&&P(n)):k&&k(n),n._enterCb=null});t.data.show||ae(t,"insert",function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),O&&O(n,q)}),N&&N(n),j&&(vi(n,A),vi(n,R),yi(function(){gi(n,A),q.cancelled||(vi(n,D),L||(xi(F)?setTimeout(q,F):bi(n,s,q)))})),t.data.show&&(e&&e(),O&&O(n,q)),j||L||q()}}}function Ci(t,e){var n=t.elm;o(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=ai(t.data.transition);if(i(r)||1!==n.nodeType)return e();if(!o(n._leaveCb)){var a=r.css,s=r.type,c=r.leaveClass,h=r.leaveToClass,l=r.leaveActiveClass,f=r.beforeLeave,p=r.leave,m=r.afterLeave,y=r.leaveCancelled,v=r.delayLeave,g=r.duration,b=!1!==a&&!X,_=Ii(p),w=d(u(g)?g.leave:g);0;var S=n._leaveCb=M(function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(gi(n,h),gi(n,l)),S.cancelled?(b&&gi(n,c),y&&y(n)):(e(),m&&m(n)),n._leaveCb=null});v?v(E):E()}function E(){S.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),f&&f(n),b&&(vi(n,c),vi(n,l),yi(function(){gi(n,c),S.cancelled||(vi(n,h),_||(xi(w)?setTimeout(S,w):bi(n,s,S)))})),p&&p(n,S),b||_||S())}}function xi(t){return"number"==typeof t&&!isNaN(t)}function Ii(t){if(i(t))return!1;var e=t.fns;return o(e)?Ii(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Ai(t,e){!0!==e.data.show&&Ti(e)}var Ri=function(t){var e,n,r={},u=t.modules,c=t.nodeOps;for(e=0;e<Wn.length;++e)for(r[Wn[e]]=[],n=0;n<u.length;++n)o(u[n][Wn[e]])&&r[Wn[e]].push(u[n][Wn[e]]);function h(t){var e=c.parentNode(t);o(e)&&c.removeChild(e,t)}function l(t,e,n,i,s,u,h){if(o(t.elm)&&o(u)&&(t=u[h]=gt(t)),t.isRootInsert=!s,!function(t,e,n,i){var s=t.data;if(o(s)){var u=o(t.componentInstance)&&s.keepAlive;if(o(s=s.hook)&&o(s=s.init)&&s(t,!1),o(t.componentInstance))return f(t,e),p(n,t.elm,i),a(u)&&function(t,e,n,i){for(var a,s=t;s.componentInstance;)if(s=s.componentInstance._vnode,o(a=s.data)&&o(a=a.transition)){for(a=0;a<r.activate.length;++a)r.activate[a]($n,s);e.push(s);break}p(n,t.elm,i)}(t,e,n,i),!0}}(t,e,n,i)){var l=t.data,m=t.children,y=t.tag;o(y)?(t.elm=t.ns?c.createElementNS(t.ns,y):c.createElement(y,t),g(t),d(t,m,e),o(l)&&v(t,e),p(n,t.elm,i)):a(t.isComment)?(t.elm=c.createComment(t.text),p(n,t.elm,i)):(t.elm=c.createTextNode(t.text),p(n,t.elm,i))}}function f(t,e){o(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,y(t)?(v(t,e),g(t)):(Kn(t),e.push(t))}function p(t,e,n){o(t)&&(o(n)?c.parentNode(n)===t&&c.insertBefore(t,e,n):c.appendChild(t,e))}function d(t,e,n){if(Array.isArray(e))for(var r=0;r<e.length;++r)l(e[r],n,t.elm,null,!0,e,r);else s(t.text)&&c.appendChild(t.elm,c.createTextNode(String(t.text)))}function y(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return o(t.tag)}function v(t,n){for(var i=0;i<r.create.length;++i)r.create[i]($n,t);o(e=t.data.hook)&&(o(e.create)&&e.create($n,t),o(e.insert)&&n.push(t))}function g(t){var e;if(o(e=t.fnScopeId))c.setStyleScope(t.elm,e);else for(var n=t;n;)o(e=n.context)&&o(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e),n=n.parent;o(e=_e)&&e!==t.context&&e!==t.fnContext&&o(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e)}function b(t,e,n,r,i,o){for(;r<=i;++r)l(n[r],o,t,e,!1,n,r)}function _(t){var e,n,i=t.data;if(o(i))for(o(e=i.hook)&&o(e=e.destroy)&&e(t),e=0;e<r.destroy.length;++e)r.destroy[e](t);if(o(e=t.children))for(n=0;n<t.children.length;++n)_(t.children[n])}function w(t,e,n,r){for(;n<=r;++n){var i=e[n];o(i)&&(o(i.tag)?(S(i),_(i)):h(i.elm))}}function S(t,e){if(o(e)||o(t.data)){var n,i=r.remove.length+1;for(o(e)?e.listeners+=i:e=function(t,e){function n(){0==--n.listeners&&h(t)}return n.listeners=e,n}(t.elm,i),o(n=t.componentInstance)&&o(n=n._vnode)&&o(n.data)&&S(n,e),n=0;n<r.remove.length;++n)r.remove[n](t,e);o(n=t.data.hook)&&o(n=n.remove)?n(t,e):e()}else h(t.elm)}function E(t,e,n,r){for(var i=n;i<r;i++){var a=e[i];if(o(a)&&Gn(t,a))return i}}function T(t,e,n,s,u,h){if(t!==e){o(e.elm)&&o(s)&&(e=s[u]=gt(e));var f=e.elm=t.elm;if(a(t.isAsyncPlaceholder))o(e.asyncFactory.resolved)?I(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(a(e.isStatic)&&a(t.isStatic)&&e.key===t.key&&(a(e.isCloned)||a(e.isOnce)))e.componentInstance=t.componentInstance;else{var p,d=e.data;o(d)&&o(p=d.hook)&&o(p=p.prepatch)&&p(t,e);var m=t.children,v=e.children;if(o(d)&&y(e)){for(p=0;p<r.update.length;++p)r.update[p](t,e);o(p=d.hook)&&o(p=p.update)&&p(t,e)}i(e.text)?o(m)&&o(v)?m!==v&&function(t,e,n,r,a){for(var s,u,h,f=0,p=0,d=e.length-1,m=e[0],y=e[d],v=n.length-1,g=n[0],_=n[v],S=!a;f<=d&&p<=v;)i(m)?m=e[++f]:i(y)?y=e[--d]:Gn(m,g)?(T(m,g,r,n,p),m=e[++f],g=n[++p]):Gn(y,_)?(T(y,_,r,n,v),y=e[--d],_=n[--v]):Gn(m,_)?(T(m,_,r,n,v),S&&c.insertBefore(t,m.elm,c.nextSibling(y.elm)),m=e[++f],_=n[--v]):Gn(y,g)?(T(y,g,r,n,p),S&&c.insertBefore(t,y.elm,m.elm),y=e[--d],g=n[++p]):(i(s)&&(s=Jn(e,f,d)),i(u=o(g.key)?s[g.key]:E(g,e,f,d))?l(g,r,t,m.elm,!1,n,p):Gn(h=e[u],g)?(T(h,g,r,n,p),e[u]=void 0,S&&c.insertBefore(t,h.elm,m.elm)):l(g,r,t,m.elm,!1,n,p),g=n[++p]);f>d?b(t,i(n[v+1])?null:n[v+1].elm,n,p,v,r):p>v&&w(0,e,f,d)}(f,m,v,n,h):o(v)?(o(t.text)&&c.setTextContent(f,""),b(f,null,v,0,v.length-1,n)):o(m)?w(0,m,0,m.length-1):o(t.text)&&c.setTextContent(f,""):t.text!==e.text&&c.setTextContent(f,e.text),o(d)&&o(p=d.hook)&&o(p=p.postpatch)&&p(t,e)}}}function C(t,e,n){if(a(n)&&o(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var x=m("attrs,class,staticClass,staticStyle,key");function I(t,e,n,r){var i,s=e.tag,u=e.data,c=e.children;if(r=r||u&&u.pre,e.elm=t,a(e.isComment)&&o(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(o(u)&&(o(i=u.hook)&&o(i=i.init)&&i(e,!0),o(i=e.componentInstance)))return f(e,n),!0;if(o(s)){if(o(c))if(t.hasChildNodes())if(o(i=u)&&o(i=i.domProps)&&o(i=i.innerHTML)){if(i!==t.innerHTML)return!1}else{for(var h=!0,l=t.firstChild,p=0;p<c.length;p++){if(!l||!I(l,c[p],n,r)){h=!1;break}l=l.nextSibling}if(!h||l)return!1}else d(e,c,n);if(o(u)){var m=!1;for(var y in u)if(!x(y)){m=!0,v(e,n);break}!m&&u.class&&ee(u.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,s){if(!i(e)){var u,h=!1,f=[];if(i(t))h=!0,l(e,f);else{var p=o(t.nodeType);if(!p&&Gn(t,e))T(t,e,f,null,null,s);else{if(p){if(1===t.nodeType&&t.hasAttribute(j)&&(t.removeAttribute(j),n=!0),a(n)&&I(t,e,f))return C(e,f,!0),t;u=t,t=new dt(c.tagName(u).toLowerCase(),{},[],void 0,u)}var d=t.elm,m=c.parentNode(d);if(l(e,f,d._leaveCb?null:m,c.nextSibling(d)),o(e.parent))for(var v=e.parent,g=y(e);v;){for(var b=0;b<r.destroy.length;++b)r.destroy[b](v);if(v.elm=e.elm,g){for(var S=0;S<r.create.length;++S)r.create[S]($n,v);var E=v.data.hook.insert;if(E.merged)for(var x=1;x<E.fns.length;x++)E.fns[x]()}else Kn(v);v=v.parent}o(m)?w(0,[t],0,0):o(t.tag)&&_(t)}}return C(e,f,h),e.elm}o(t)&&_(t)}}({nodeOps:Hn,modules:[sr,mr,Vr,zr,ni,K?{create:Ai,activate:Ai,remove:function(t,e){!0!==t.data.show?Ci(t,e):e()}}:{}].concat(rr)});X&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&ji(t,"input")});var Di={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?ae(n,"postpatch",function(){Di.componentUpdated(t,e,n)}):Ni(t,e,n.context),t._vOptions=[].map.call(t.options,Pi)):("textarea"===n.tag||Vn(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",Fi),t.addEventListener("compositionend",Mi),t.addEventListener("change",Mi),X&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Ni(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,Pi);if(i.some(function(t,e){return!P(t,r[e])}))(t.multiple?e.value.some(function(t){return ki(t,i)}):e.value!==e.oldValue&&ki(e.value,i))&&ji(t,"change")}}};function Ni(t,e,n){Oi(t,e,n),(J||Y)&&setTimeout(function(){Oi(t,e,n)},0)}function Oi(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,u=t.options.length;s<u;s++)if(a=t.options[s],i)o=F(r,Pi(a))>-1,a.selected!==o&&(a.selected=o);else if(P(Pi(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));i||(t.selectedIndex=-1)}}function ki(t,e){return e.every(function(e){return!P(e,t)})}function Pi(t){return"_value"in t?t._value:t.value}function Fi(t){t.target.composing=!0}function Mi(t){t.target.composing&&(t.target.composing=!1,ji(t.target,"input"))}function ji(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function Li(t){return!t.componentInstance||t.data&&t.data.transition?t:Li(t.componentInstance._vnode)}var qi={model:Di,show:{bind:function(t,e,n){var r=e.value,i=(n=Li(n)).data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,Ti(n,function(){t.style.display=o})):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value;!r!=!e.oldValue&&((n=Li(n)).data&&n.data.transition?(n.data.show=!0,r?Ti(n,function(){t.style.display=t.__vOriginalDisplay}):Ci(n,function(){t.style.display="none"})):t.style.display=r?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}}},Bi={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Ui(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Ui(fe(e.children)):t}function Vi(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var o in i)e[E(o)]=i[o];return e}function Qi(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var Hi=function(t){return t.tag||le(t)},zi=function(t){return"show"===t.name},Ki={name:"transition",props:Bi,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(Hi)).length){0;var r=this.mode;0;var i=n[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return i;var o=Ui(i);if(!o)return i;if(this._leaving)return Qi(t,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var u=(o.data||(o.data={})).transition=Vi(this),c=this._vnode,h=Ui(c);if(o.data.directives&&o.data.directives.some(zi)&&(o.data.show=!0),h&&h.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(o,h)&&!le(h)&&(!h.componentInstance||!h.componentInstance._vnode.isComment)){var l=h.data.transition=R({},u);if("out-in"===r)return this._leaving=!0,ae(l,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),Qi(t,i);if("in-out"===r){if(le(o))return c;var f,p=function(){f()};ae(u,"afterEnter",p),ae(u,"enterCancelled",p),ae(l,"delayLeave",function(t){f=t})}}return i}}},$i=R({tag:String,moveClass:String},Bi);function Wi(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function Gi(t){t.data.newPos=t.elm.getBoundingClientRect()}function Ji(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}delete $i.mode;var Xi={Transition:Ki,TransitionGroup:{props:$i,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var i=we(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=Vi(this),s=0;s<i.length;s++){var u=i[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),n[u.key]=u,(u.data||(u.data={})).transition=a;else;}if(r){for(var c=[],h=[],l=0;l<r.length;l++){var f=r[l];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?c.push(f):h.push(f)}this.kept=t(e,null,c),this.removed=h}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Wi),t.forEach(Gi),t.forEach(Ji),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,r=n.style;vi(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(fi,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(fi,t),n._moveCb=null,gi(n,e))})}}))},methods:{hasMove:function(t,e){if(!ui)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){oi(n,t)}),ii(n,e),n.style.display="none",this.$el.appendChild(n);var r=wi(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}}};mn.config.mustUseProp=Cn,mn.config.isReservedTag=qn,mn.config.isReservedAttr=En,mn.config.getTagNamespace=Bn,mn.config.isUnknownElement=function(t){if(!K)return!0;if(qn(t))return!1;if(t=t.toLowerCase(),null!=Un[t])return Un[t];var e=document.createElement(t);return t.indexOf("-")>-1?Un[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Un[t]=/HTMLUnknownElement/.test(e.toString())},R(mn.options.directives,qi),R(mn.options.components,Xi),mn.prototype.__patch__=K?Ri:N,mn.prototype.$mount=function(t,e){return function(t,e,n){return t.$el=e,t.$options.render||(t.$options.render=yt),Te(t,"beforeMount"),new ke(t,function(){t._update(t._render(),n)},N,{before:function(){t._isMounted&&!t._isDestroyed&&Te(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Te(t,"mounted")),t}(this,t=t&&K?Qn(t):void 0,e)},K&&setTimeout(function(){B.devtools&&it&&it.emit("init",mn)},0);var Yi=/\{\{((?:.|\r?\n)+?)\}\}/g,Zi=/[-.*+?^${}()|[\]\/\\]/g,to=w(function(t){var e=t[0].replace(Zi,"\\$&"),n=t[1].replace(Zi,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+n,"g")});function eo(t,e){var n=e?to(e):Yi;if(n.test(t)){for(var r,i,o,a=[],s=[],u=n.lastIndex=0;r=n.exec(t);){(i=r.index)>u&&(s.push(o=t.slice(u,i)),a.push(JSON.stringify(o)));var c=vr(r[1].trim());a.push("_s("+c+")"),s.push({"@binding":c}),u=i+r[0].length}return u<t.length&&(s.push(o=t.slice(u)),a.push(JSON.stringify(o))),{expression:a.join("+"),tokens:s}}}var no={staticKeys:["staticClass"],transformNode:function(t,e){e.warn;var n=Ir(t,"class");n&&(t.staticClass=JSON.stringify(n));var r=xr(t,"class",!1);r&&(t.classBinding=r)},genData:function(t){var e="";return t.staticClass&&(e+="staticClass:"+t.staticClass+","),t.classBinding&&(e+="class:"+t.classBinding+","),e}};var ro,io={staticKeys:["staticStyle"],transformNode:function(t,e){e.warn;var n=Ir(t,"style");n&&(t.staticStyle=JSON.stringify(Kr(n)));var r=xr(t,"style",!1);r&&(t.styleBinding=r)},genData:function(t){var e="";return t.staticStyle&&(e+="staticStyle:"+t.staticStyle+","),t.styleBinding&&(e+="style:("+t.styleBinding+"),"),e}},oo=function(t){return(ro=ro||document.createElement("div")).innerHTML=t,ro.textContent},ao=m("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),so=m("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),uo=m("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),co=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,ho="[a-zA-Z_][\\w\\-\\.]*",lo="((?:"+ho+"\\:)?"+ho+")",fo=new RegExp("^<"+lo),po=/^\s*(\/?)>/,mo=new RegExp("^<\\/"+lo+"[^>]*>"),yo=/^<!DOCTYPE [^>]+>/i,vo=/^<!\--/,go=/^<!\[/,bo=m("script,style,textarea",!0),_o={},wo={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t"},So=/&(?:lt|gt|quot|amp);/g,Eo=/&(?:lt|gt|quot|amp|#10|#9);/g,To=m("pre,textarea",!0),Co=function(t,e){return t&&To(t)&&"\n"===e[0]};function xo(t,e){var n=e?Eo:So;return t.replace(n,function(t){return wo[t]})}var Io,Ao,Ro,Do,No,Oo,ko,Po,Fo=/^@|^v-on:/,Mo=/^v-|^@|^:/,jo=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Lo=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,qo=/^\(|\)$/g,Bo=/:(.*)$/,Uo=/^:|^v-bind:/,Vo=/\.[^.]+/g,Qo=w(oo);function Ho(t,e,n){return{type:1,tag:t,attrsList:e,attrsMap:function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t[n].name]=t[n].value;return e}(e),parent:n,children:[]}}function zo(t,e){Io=e.warn||br,Oo=e.isPreTag||O,ko=e.mustUseProp||O,Po=e.getTagNamespace||O,Ro=_r(e.modules,"transformNode"),Do=_r(e.modules,"preTransformNode"),No=_r(e.modules,"postTransformNode"),Ao=e.delimiters;var n,r,i=[],o=!1!==e.preserveWhitespace,a=!1,s=!1;function u(t){t.pre&&(a=!1),Oo(t.tag)&&(s=!1);for(var n=0;n<No.length;n++)No[n](t,e)}return function(t,e){for(var n,r,i=[],o=e.expectHTML,a=e.isUnaryTag||O,s=e.canBeLeftOpenTag||O,u=0;t;){if(n=t,r&&bo(r)){var c=0,h=r.toLowerCase(),l=_o[h]||(_o[h]=new RegExp("([\\s\\S]*?)(</"+h+"[^>]*>)","i")),f=t.replace(l,function(t,n,r){return c=r.length,bo(h)||"noscript"===h||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Co(h,n)&&(n=n.slice(1)),e.chars&&e.chars(n),""});u+=t.length-f.length,t=f,x(h,u-c,u)}else{var p=t.indexOf("<");if(0===p){if(vo.test(t)){var d=t.indexOf("--\x3e");if(d>=0){e.shouldKeepComment&&e.comment(t.substring(4,d)),E(d+3);continue}}if(go.test(t)){var m=t.indexOf("]>");if(m>=0){E(m+2);continue}}var y=t.match(yo);if(y){E(y[0].length);continue}var v=t.match(mo);if(v){var g=u;E(v[0].length),x(v[1],g,u);continue}var b=T();if(b){C(b),Co(b.tagName,t)&&E(1);continue}}var _=void 0,w=void 0,S=void 0;if(p>=0){for(w=t.slice(p);!(mo.test(w)||fo.test(w)||vo.test(w)||go.test(w)||(S=w.indexOf("<",1))<0);)p+=S,w=t.slice(p);_=t.substring(0,p),E(p)}p<0&&(_=t,t=""),e.chars&&_&&e.chars(_)}if(t===n){e.chars&&e.chars(t);break}}function E(e){u+=e,t=t.substring(e)}function T(){var e=t.match(fo);if(e){var n,r,i={tagName:e[1],attrs:[],start:u};for(E(e[0].length);!(n=t.match(po))&&(r=t.match(co));)E(r[0].length),i.attrs.push(r);if(n)return i.unarySlash=n[1],E(n[0].length),i.end=u,i}}function C(t){var n=t.tagName,u=t.unarySlash;o&&("p"===r&&uo(n)&&x(r),s(n)&&r===n&&x(n));for(var c=a(n)||!!u,h=t.attrs.length,l=new Array(h),f=0;f<h;f++){var p=t.attrs[f],d=p[3]||p[4]||p[5]||"",m="a"===n&&"href"===p[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;l[f]={name:p[1],value:xo(d,m)}}c||(i.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:l}),r=n),e.start&&e.start(n,l,c,t.start,t.end)}function x(t,n,o){var a,s;if(null==n&&(n=u),null==o&&(o=u),t)for(s=t.toLowerCase(),a=i.length-1;a>=0&&i[a].lowerCasedTag!==s;a--);else a=0;if(a>=0){for(var c=i.length-1;c>=a;c--)e.end&&e.end(i[c].tag,n,o);i.length=a,r=a&&i[a-1].tag}else"br"===s?e.start&&e.start(t,[],!0,n,o):"p"===s&&(e.start&&e.start(t,[],!1,n,o),e.end&&e.end(t,n,o))}x()}(t,{warn:Io,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,start:function(t,o,c){var h=r&&r.ns||Po(t);J&&"svg"===h&&(o=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];Jo.test(r.name)||(r.name=r.name.replace(Xo,""),e.push(r))}return e}(o));var l,f=Ho(t,o,r);h&&(f.ns=h),"style"!==(l=f).tag&&("script"!==l.tag||l.attrsMap.type&&"text/javascript"!==l.attrsMap.type)||rt()||(f.forbidden=!0);for(var p=0;p<Do.length;p++)f=Do[p](f,e)||f;function d(t){0}if(a||(!function(t){null!=Ir(t,"v-pre")&&(t.pre=!0)}(f),f.pre&&(a=!0)),Oo(f.tag)&&(s=!0),a?function(t){var e=t.attrsList.length;if(e)for(var n=t.attrs=new Array(e),r=0;r<e;r++)n[r]={name:t.attrsList[r].name,value:JSON.stringify(t.attrsList[r].value)};else t.pre||(t.plain=!0)}(f):f.processed||($o(f),function(t){var e=Ir(t,"v-if");if(e)t.if=e,Wo(t,{exp:e,block:t});else{null!=Ir(t,"v-else")&&(t.else=!0);var n=Ir(t,"v-else-if");n&&(t.elseif=n)}}(f),function(t){null!=Ir(t,"v-once")&&(t.once=!0)}(f),Ko(f,e)),n?i.length||n.if&&(f.elseif||f.else)&&(d(),Wo(n,{exp:f.elseif,block:f})):(n=f,d()),r&&!f.forbidden)if(f.elseif||f.else)!function(t,e){var n=function(t){var e=t.length;for(;e--;){if(1===t[e].type)return t[e];t.pop()}}(e.children);n&&n.if&&Wo(n,{exp:t.elseif,block:t})}(f,r);else if(f.slotScope){r.plain=!1;var m=f.slotTarget||'"default"';(r.scopedSlots||(r.scopedSlots={}))[m]=f}else r.children.push(f),f.parent=r;c?u(f):(r=f,i.push(f))},end:function(){var t=i[i.length-1],e=t.children[t.children.length-1];e&&3===e.type&&" "===e.text&&!s&&t.children.pop(),i.length-=1,r=i[i.length-1],u(t)},chars:function(t){if(r&&(!J||"textarea"!==r.tag||r.attrsMap.placeholder!==t)){var e,n,i=r.children;if(t=s||t.trim()?"script"===(e=r).tag||"style"===e.tag?t:Qo(t):o&&i.length?" ":"")!a&&" "!==t&&(n=eo(t,Ao))?i.push({type:2,expression:n.expression,tokens:n.tokens,text:t}):" "===t&&i.length&&" "===i[i.length-1].text||i.push({type:3,text:t})}},comment:function(t){r.children.push({type:3,text:t,isComment:!0})}}),n}function Ko(t,e){var n,r;!function(t){var e=xr(t,"key");if(e){t.key=e}}(t),t.plain=!t.key&&!t.attrsList.length,(r=xr(n=t,"ref"))&&(n.ref=r,n.refInFor=function(t){for(var e=t;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}(n)),function(t){if("slot"===t.tag)t.slotName=xr(t,"name");else{var e;"template"===t.tag?(e=Ir(t,"scope"),t.slotScope=e||Ir(t,"slot-scope")):(e=Ir(t,"slot-scope"))&&(t.slotScope=e);var n=xr(t,"slot");n&&(t.slotTarget='""'===n?'"default"':n,"template"===t.tag||t.slotScope||Sr(t,"slot",n))}}(t),function(t){var e;(e=xr(t,"is"))&&(t.component=e);null!=Ir(t,"inline-template")&&(t.inlineTemplate=!0)}(t);for(var i=0;i<Ro.length;i++)t=Ro[i](t,e)||t;!function(t){var e,n,r,i,o,a,s,u=t.attrsList;for(e=0,n=u.length;e<n;e++){if(r=i=u[e].name,o=u[e].value,Mo.test(r))if(t.hasBindings=!0,(a=Go(r))&&(r=r.replace(Vo,"")),Uo.test(r))r=r.replace(Uo,""),o=vr(o),s=!1,a&&(a.prop&&(s=!0,"innerHtml"===(r=E(r))&&(r="innerHTML")),a.camel&&(r=E(r)),a.sync&&Cr(t,"update:"+E(r),Rr(o,"$event"))),s||!t.component&&ko(t.tag,t.attrsMap.type,r)?wr(t,r,o):Sr(t,r,o);else if(Fo.test(r))r=r.replace(Fo,""),Cr(t,r,o,a,!1);else{var c=(r=r.replace(Mo,"")).match(Bo),h=c&&c[1];h&&(r=r.slice(0,-(h.length+1))),Tr(t,r,i,o,h,a)}else Sr(t,r,JSON.stringify(o)),!t.component&&"muted"===r&&ko(t.tag,t.attrsMap.type,r)&&wr(t,r,"true")}}(t)}function $o(t){var e;if(e=Ir(t,"v-for")){var n=function(t){var e=t.match(jo);if(!e)return;var n={};n.for=e[2].trim();var r=e[1].trim().replace(qo,""),i=r.match(Lo);i?(n.alias=r.replace(Lo,"").trim(),n.iterator1=i[1].trim(),i[2]&&(n.iterator2=i[2].trim())):n.alias=r;return n}(e);n&&R(t,n)}}function Wo(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function Go(t){var e=t.match(Vo);if(e){var n={};return e.forEach(function(t){n[t.slice(1)]=!0}),n}}var Jo=/^xmlns:NS\d+/,Xo=/^NS\d+:/;function Yo(t){return Ho(t.tag,t.attrsList.slice(),t.parent)}var Zo=[no,io,{preTransformNode:function(t,e){if("input"===t.tag){var n,r=t.attrsMap;if(!r["v-model"])return;if((r[":type"]||r["v-bind:type"])&&(n=xr(t,"type")),r.type||n||!r["v-bind"]||(n="("+r["v-bind"]+").type"),n){var i=Ir(t,"v-if",!0),o=i?"&&("+i+")":"",a=null!=Ir(t,"v-else",!0),s=Ir(t,"v-else-if",!0),u=Yo(t);$o(u),Er(u,"type","checkbox"),Ko(u,e),u.processed=!0,u.if="("+n+")==='checkbox'"+o,Wo(u,{exp:u.if,block:u});var c=Yo(t);Ir(c,"v-for",!0),Er(c,"type","radio"),Ko(c,e),Wo(u,{exp:"("+n+")==='radio'"+o,block:c});var h=Yo(t);return Ir(h,"v-for",!0),Er(h,":type",n),Ko(h,e),Wo(u,{exp:i,block:h}),a?u.else=!0:s&&(u.elseif=s),u}}}}];var ta,ea,na={expectHTML:!0,modules:Zo,directives:{model:function(t,e,n){n;var r=e.value,i=e.modifiers,o=t.tag,a=t.attrsMap.type;if(t.component)return Ar(t,r,i),!1;if("select"===o)!function(t,e,n){var r='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(n&&n.number?"_n(val)":"val")+"});";r=r+" "+Rr(e,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),Cr(t,"change",r,null,!0)}(t,r,i);else if("input"===o&&"checkbox"===a)!function(t,e,n){var r=n&&n.number,i=xr(t,"value")||"null",o=xr(t,"true-value")||"true",a=xr(t,"false-value")||"false";wr(t,"checked","Array.isArray("+e+")?_i("+e+","+i+")>-1"+("true"===o?":("+e+")":":_q("+e+","+o+")")),Cr(t,"change","var $$a="+e+",$$el=$event.target,$$c=$$el.checked?("+o+"):("+a+");if(Array.isArray($$a)){var $$v="+(r?"_n("+i+")":i)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Rr(e,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Rr(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Rr(e,"$$c")+"}",null,!0)}(t,r,i);else if("input"===o&&"radio"===a)!function(t,e,n){var r=n&&n.number,i=xr(t,"value")||"null";wr(t,"checked","_q("+e+","+(i=r?"_n("+i+")":i)+")"),Cr(t,"change",Rr(e,i),null,!0)}(t,r,i);else if("input"===o||"textarea"===o)!function(t,e,n){var r=t.attrsMap.type,i=n||{},o=i.lazy,a=i.number,s=i.trim,u=!o&&"range"!==r,c=o?"change":"range"===r?Mr:"input",h="$event.target.value";s&&(h="$event.target.value.trim()"),a&&(h="_n("+h+")");var l=Rr(e,h);u&&(l="if($event.target.composing)return;"+l),wr(t,"value","("+e+")"),Cr(t,c,l,null,!0),(s||a)&&Cr(t,"blur","$forceUpdate()")}(t,r,i);else if(!B.isReservedTag(o))return Ar(t,r,i),!1;return!0},text:function(t,e){e.value&&wr(t,"textContent","_s("+e.value+")")},html:function(t,e){e.value&&wr(t,"innerHTML","_s("+e.value+")")}},isPreTag:function(t){return"pre"===t},isUnaryTag:ao,mustUseProp:Cn,canBeLeftOpenTag:so,isReservedTag:qn,getTagNamespace:Bn,staticKeys:function(t){return t.reduce(function(t,e){return t.concat(e.staticKeys||[])},[]).join(",")}(Zo)},ra=w(function(t){return m("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(t?","+t:""))});function ia(t,e){t&&(ta=ra(e.staticKeys||""),ea=e.isReservedTag||O,function t(e){e.static=function(t){if(2===t.type)return!1;if(3===t.type)return!0;return!(!t.pre&&(t.hasBindings||t.if||t.for||y(t.tag)||!ea(t.tag)||function(t){for(;t.parent;){if("template"!==(t=t.parent).tag)return!1;if(t.for)return!0}return!1}(t)||!Object.keys(t).every(ta)))}(e);if(1===e.type){if(!ea(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var n=0,r=e.children.length;n<r;n++){var i=e.children[n];t(i),i.static||(e.static=!1)}if(e.ifConditions)for(var o=1,a=e.ifConditions.length;o<a;o++){var s=e.ifConditions[o].block;t(s),s.static||(e.static=!1)}}}(t),function t(e,n){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=n),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var r=0,i=e.children.length;r<i;r++)t(e.children[r],n||!!e.for);if(e.ifConditions)for(var o=1,a=e.ifConditions.length;o<a;o++)t(e.ifConditions[o].block,n)}}(t,!1))}var oa=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,aa=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,sa={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},ua={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},ca=function(t){return"if("+t+")return null;"},ha={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:ca("$event.target !== $event.currentTarget"),ctrl:ca("!$event.ctrlKey"),shift:ca("!$event.shiftKey"),alt:ca("!$event.altKey"),meta:ca("!$event.metaKey"),left:ca("'button' in $event && $event.button !== 0"),middle:ca("'button' in $event && $event.button !== 1"),right:ca("'button' in $event && $event.button !== 2")};function la(t,e){var n=e?"nativeOn:{":"on:{";for(var r in t)n+='"'+r+'":'+fa(r,t[r])+",";return n.slice(0,-1)+"}"}function fa(t,e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map(function(e){return fa(t,e)}).join(",")+"]";var n=aa.test(e.value),r=oa.test(e.value);if(e.modifiers){var i="",o="",a=[];for(var s in e.modifiers)if(ha[s])o+=ha[s],sa[s]&&a.push(s);else if("exact"===s){var u=e.modifiers;o+=ca(["ctrl","shift","alt","meta"].filter(function(t){return!u[t]}).map(function(t){return"$event."+t+"Key"}).join("||"))}else a.push(s);return a.length&&(i+=function(t){return"if(!('button' in $event)&&"+t.map(pa).join("&&")+")return null;"}(a)),o&&(i+=o),"function($event){"+i+(n?"return "+e.value+"($event)":r?"return ("+e.value+")($event)":e.value)+"}"}return n||r?e.value:"function($event){"+e.value+"}"}function pa(t){var e=parseInt(t,10);if(e)return"$event.keyCode!=="+e;var n=sa[t],r=ua[t];return"_k($event.keyCode,"+JSON.stringify(t)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(r)+")"}var da={on:function(t,e){t.wrapListeners=function(t){return"_g("+t+","+e.value+")"}},bind:function(t,e){t.wrapData=function(n){return"_b("+n+",'"+t.tag+"',"+e.value+","+(e.modifiers&&e.modifiers.prop?"true":"false")+(e.modifiers&&e.modifiers.sync?",true":"")+")"}},cloak:N},ma=function(t){this.options=t,this.warn=t.warn||br,this.transforms=_r(t.modules,"transformCode"),this.dataGenFns=_r(t.modules,"genData"),this.directives=R(R({},da),t.directives);var e=t.isReservedTag||O;this.maybeComponent=function(t){return!(e(t.tag)&&!t.component)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function ya(t,e){var n=new ma(e);return{render:"with(this){return "+(t?va(t,n):'_c("div")')+"}",staticRenderFns:n.staticRenderFns}}function va(t,e){if(t.parent&&(t.pre=t.pre||t.parent.pre),t.staticRoot&&!t.staticProcessed)return ga(t,e);if(t.once&&!t.onceProcessed)return ba(t,e);if(t.for&&!t.forProcessed)return function(t,e,n,r){var i=t.for,o=t.alias,a=t.iterator1?","+t.iterator1:"",s=t.iterator2?","+t.iterator2:"";0;return t.forProcessed=!0,(r||"_l")+"(("+i+"),function("+o+a+s+"){return "+(n||va)(t,e)+"})"}(t,e);if(t.if&&!t.ifProcessed)return _a(t,e);if("template"!==t.tag||t.slotTarget||e.pre){if("slot"===t.tag)return function(t,e){var n=t.slotName||'"default"',r=Ea(t,e),i="_t("+n+(r?","+r:""),o=t.attrs&&"{"+t.attrs.map(function(t){return E(t.name)+":"+t.value}).join(",")+"}",a=t.attrsMap["v-bind"];!o&&!a||r||(i+=",null");o&&(i+=","+o);a&&(i+=(o?"":",null")+","+a);return i+")"}(t,e);var n;if(t.component)n=function(t,e,n){var r=e.inlineTemplate?null:Ea(e,n,!0);return"_c("+t+","+wa(e,n)+(r?","+r:"")+")"}(t.component,t,e);else{var r;(!t.plain||t.pre&&e.maybeComponent(t))&&(r=wa(t,e));var i=t.inlineTemplate?null:Ea(t,e,!0);n="_c('"+t.tag+"'"+(r?","+r:"")+(i?","+i:"")+")"}for(var o=0;o<e.transforms.length;o++)n=e.transforms[o](t,n);return n}return Ea(t,e)||"void 0"}function ga(t,e){t.staticProcessed=!0;var n=e.pre;return t.pre&&(e.pre=t.pre),e.staticRenderFns.push("with(this){return "+va(t,e)+"}"),e.pre=n,"_m("+(e.staticRenderFns.length-1)+(t.staticInFor?",true":"")+")"}function ba(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return _a(t,e);if(t.staticInFor){for(var n="",r=t.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o("+va(t,e)+","+e.onceId+++","+n+")":va(t,e)}return ga(t,e)}function _a(t,e,n,r){return t.ifProcessed=!0,function t(e,n,r,i){if(!e.length)return i||"_e()";var o=e.shift();return o.exp?"("+o.exp+")?"+a(o.block)+":"+t(e,n,r,i):""+a(o.block);function a(t){return r?r(t,n):t.once?ba(t,n):va(t,n)}}(t.ifConditions.slice(),e,n,r)}function wa(t,e){var n="{",r=function(t,e){var n=t.directives;if(!n)return;var r,i,o,a,s="directives:[",u=!1;for(r=0,i=n.length;r<i;r++){o=n[r],a=!0;var c=e.directives[o.name];c&&(a=!!c(t,o,e.warn)),a&&(u=!0,s+='{name:"'+o.name+'",rawName:"'+o.rawName+'"'+(o.value?",value:("+o.value+"),expression:"+JSON.stringify(o.value):"")+(o.arg?',arg:"'+o.arg+'"':"")+(o.modifiers?",modifiers:"+JSON.stringify(o.modifiers):"")+"},")}if(u)return s.slice(0,-1)+"]"}(t,e);r&&(n+=r+","),t.key&&(n+="key:"+t.key+","),t.ref&&(n+="ref:"+t.ref+","),t.refInFor&&(n+="refInFor:true,"),t.pre&&(n+="pre:true,"),t.component&&(n+='tag:"'+t.tag+'",');for(var i=0;i<e.dataGenFns.length;i++)n+=e.dataGenFns[i](t);if(t.attrs&&(n+="attrs:{"+xa(t.attrs)+"},"),t.props&&(n+="domProps:{"+xa(t.props)+"},"),t.events&&(n+=la(t.events,!1)+","),t.nativeEvents&&(n+=la(t.nativeEvents,!0)+","),t.slotTarget&&!t.slotScope&&(n+="slot:"+t.slotTarget+","),t.scopedSlots&&(n+=function(t,e){return"scopedSlots:_u(["+Object.keys(t).map(function(n){return Sa(n,t[n],e)}).join(",")+"])"}(t.scopedSlots,e)+","),t.model&&(n+="model:{value:"+t.model.value+",callback:"+t.model.callback+",expression:"+t.model.expression+"},"),t.inlineTemplate){var o=function(t,e){var n=t.children[0];0;if(1===n.type){var r=ya(n,e.options);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map(function(t){return"function(){"+t+"}"}).join(",")+"]}"}}(t,e);o&&(n+=o+",")}return n=n.replace(/,$/,"")+"}",t.wrapData&&(n=t.wrapData(n)),t.wrapListeners&&(n=t.wrapListeners(n)),n}function Sa(t,e,n){return e.for&&!e.forProcessed?function(t,e,n){var r=e.for,i=e.alias,o=e.iterator1?","+e.iterator1:"",a=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,"_l(("+r+"),function("+i+o+a+"){return "+Sa(t,e,n)+"})"}(t,e,n):"{key:"+t+",fn:"+("function("+String(e.slotScope)+"){return "+("template"===e.tag?e.if?"("+e.if+")?"+(Ea(e,n)||"undefined")+":undefined":Ea(e,n)||"undefined":va(e,n))+"}")+"}"}function Ea(t,e,n,r,i){var o=t.children;if(o.length){var a=o[0];if(1===o.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag){var s=n?e.maybeComponent(a)?",1":",0":"";return""+(r||va)(a,e)+s}var u=n?function(t,e){for(var n=0,r=0;r<t.length;r++){var i=t[r];if(1===i.type){if(Ta(i)||i.ifConditions&&i.ifConditions.some(function(t){return Ta(t.block)})){n=2;break}(e(i)||i.ifConditions&&i.ifConditions.some(function(t){return e(t.block)}))&&(n=1)}}return n}(o,e.maybeComponent):0,c=i||Ca;return"["+o.map(function(t){return c(t,e)}).join(",")+"]"+(u?","+u:"")}}function Ta(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function Ca(t,e){return 1===t.type?va(t,e):3===t.type&&t.isComment?(r=t,"_e("+JSON.stringify(r.text)+")"):"_v("+(2===(n=t).type?n.expression:Ia(JSON.stringify(n.text)))+")";var n,r}function xa(t){for(var e="",n=0;n<t.length;n++){var r=t[n];e+='"'+r.name+'":'+Ia(r.value)+","}return e.slice(0,-1)}function Ia(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");function Aa(t,e){try{return new Function(t)}catch(n){return e.push({err:n,code:t}),N}}var Ra,Da,Na=(Ra=function(t,e){var n=zo(t.trim(),e);!1!==e.optimize&&ia(n,e);var r=ya(n,e);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}},function(t){function e(e,n){var r=Object.create(t),i=[],o=[];if(r.warn=function(t,e){(e?o:i).push(t)},n)for(var a in n.modules&&(r.modules=(t.modules||[]).concat(n.modules)),n.directives&&(r.directives=R(Object.create(t.directives||null),n.directives)),n)"modules"!==a&&"directives"!==a&&(r[a]=n[a]);var s=Ra(e,r);return s.errors=i,s.tips=o,s}return{compile:e,compileToFunctions:function(t){var e=Object.create(null);return function(n,r,i){(r=R({},r)).warn,delete r.warn;var o=r.delimiters?String(r.delimiters)+n:n;if(e[o])return e[o];var a=t(n,r),s={},u=[];return s.render=Aa(a.render,u),s.staticRenderFns=a.staticRenderFns.map(function(t){return Aa(t,u)}),e[o]=s}}(e)}})(na),Oa=(Na.compile,Na.compileToFunctions);function ka(t){return(Da=Da||document.createElement("div")).innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',Da.innerHTML.indexOf("&#10;")>0}var Pa=!!K&&ka(!1),Fa=!!K&&ka(!0),Ma=w(function(t){var e=Qn(t);return e&&e.innerHTML}),ja=mn.prototype.$mount;mn.prototype.$mount=function(t,e){if((t=t&&Qn(t))===document.body||t===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(r=Ma(r));else{if(!r.nodeType)return this;r=r.innerHTML}else t&&(r=function(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}(t));if(r){0;var i=Oa(r,{shouldDecodeNewlines:Pa,shouldDecodeNewlinesForHref:Fa,delimiters:n.delimiters,comments:n.comments},this),o=i.render,a=i.staticRenderFns;n.render=o,n.staticRenderFns=a}}return ja.call(this,t,e)},mn.compile=Oa,e.default=mn}.call(e,n(4),n(86).setImmediate)},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,u=1,c={},h=!1,l=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){d(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,r=function(t){var e=l.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},f.clearImmediate=p}function p(t){delete c[t]}function d(t){if(h)setTimeout(d,0,t);else{var e=c[t];if(e){h=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{p(t),h=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(4),n(39))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(90),i=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var a=n(183);var s=function(t){n(166)},u=n(89)(i.a,a.a,!1,s,null,null);e.default=u.exports},function(t,e,n){var r=n(167);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(88)("222954af",r,!0,{})},function(t,e,n){(t.exports=n(87)(!1)).push([t.i,"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#2c3e50;margin-top:60px}h1,h2{font-weight:400}.search-result__item{width:100%;margin-left:auto;margin-right:auto;display:flex;flex-direction:column}@media(min-width:480px){.search-result__item{width:80%}}@media(min-width:768px){.search-result__item{width:50%}}",""])},function(t,e){t.exports=function(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o[0],s={id:t+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}},function(t,e,n){"use strict";n(170);var r,i=(r=n(92))&&"object"==typeof r&&"default"in r?r.default:r;t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){var r=n(171),i=(n.n(r),setTimeout);function o(){}function a(t){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function s(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,a._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void c(e.promise,t)}u(e.promise,r)}else(1===t._state?u:c)(e.promise,t._value)})):t._deferreds.push(e)}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof a)return t._state=3,t._value=e,void h(t);if("function"==typeof n)return void l((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,h(t)}catch(e){c(t,e)}var r,i}function c(t,e){t._state=2,t._value=e,h(t)}function h(t){2===t._state&&0===t._deferreds.length&&a._immediateFn(function(){t._handled||a._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,u(e,t))},function(t){n||(n=!0,c(e,t))})}catch(t){if(n)return;n=!0,c(e,t)}}a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var n=new this.constructor(o);return s(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},a.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},a.all=function(t){return new a(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){o(t,e)},n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)o(a,r[a])})},a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(t){return new a(function(e,n){n(t)})},a.race=function(t){return new a(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},a._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){i(t,0)},a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var f=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();function p(t,e){return t(e={exports:{}},e.exports),e.exports}f.Promise||(f.Promise=a);var d=p(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),m=p(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),y=(m.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),v=function(t){if(!y(t))throw TypeError(t+" is not an object!");return t},g=function(t){try{return!!t()}catch(t){return!0}},b=!g(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),_=d.document,w=y(_)&&y(_.createElement),S=function(t){return w?_.createElement(t):{}},E=!b&&!g(function(){return 7!=Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a}),T=function(t,e){if(!y(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!y(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},C=Object.defineProperty,x={f:b?Object.defineProperty:function(t,e,n){if(v(t),e=T(e,!0),v(n),E)try{return C(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},I=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},A=b?function(t,e,n){return x.f(t,e,I(1,n))}:function(t,e,n){return t[e]=n,t},R={}.hasOwnProperty,D=function(t,e){return R.call(t,e)},N=0,O=Math.random(),k=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++N+O).toString(36))},P=p(function(t){var e=k("src"),n=Function.toString,r=(""+n).split("toString");m.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,i,o){var a="function"==typeof i;a&&(D(i,"name")||A(i,"name",n)),t[n]!==i&&(a&&(D(i,e)||A(i,e,t[n]?""+t[n]:r.join(String(n)))),t===d?t[n]=i:o?t[n]?t[n]=i:A(t,n,i):(delete t[n],A(t,n,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),F=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},M=function(t,e,n){var r,i,o,a,s=t&M.F,u=t&M.G,c=t&M.S,h=t&M.P,l=t&M.B,f=u?d:c?d[e]||(d[e]={}):(d[e]||{}).prototype,p=u?m:m[e]||(m[e]={}),y=p.prototype||(p.prototype={});for(r in u&&(n=e),n)o=((i=!s&&f&&void 0!==f[r])?f:n)[r],a=l&&i?F(o,d):h&&"function"==typeof o?F(Function.call,o):o,f&&P(f,r,o,t&M.U),p[r]!=o&&A(p,r,a),h&&y[r]!=o&&(y[r]=o)};d.core=m,M.F=1,M.G=2,M.S=4,M.P=8,M.B=16,M.W=32,M.U=64,M.R=128;var j=M,L={}.toString,q=function(t){return L.call(t).slice(8,-1)},B=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==q(t)?t.split(""):Object(t)},U=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},V=function(t){return Object(U(t))},Q=Math.ceil,H=Math.floor,z=function(t){return isNaN(t=+t)?0:(t>0?H:Q)(t)},K=Math.min,$=function(t){return t>0?K(z(t),9007199254740991):0},W=Array.isArray||function(t){return"Array"==q(t)},G=d["__core-js_shared__"]||(d["__core-js_shared__"]={}),J=function(t){return G[t]||(G[t]={})},X=p(function(t){var e=J("wks"),n=d.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:k)("Symbol."+t))}).store=e}),Y=X("species"),Z=function(t,e){return new(function(t){var e;return W(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!W(e.prototype)||(e=void 0),y(e)&&null===(e=e[Y])&&(e=void 0)),void 0===e?Array:e}(t))(e)},tt=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,s=5==t||a,u=e||Z;return function(e,c,h){for(var l,f,p=V(e),d=B(p),m=F(c,h,3),y=$(d.length),v=0,g=n?u(e,y):r?u(e,0):void 0;y>v;v++)if((s||v in d)&&(f=m(l=d[v],v,p),t))if(n)g[v]=f;else if(f)switch(t){case 3:return!0;case 5:return l;case 6:return v;case 2:g.push(l)}else if(o)return!1;return a?-1:i||o?o:g}},et=X("unscopables"),nt=Array.prototype;void 0==nt[et]&&A(nt,et,{});var rt=function(t){nt[et][t]=!0},it=tt(5),ot=!0;"find"in[]&&Array(1).find(function(){ot=!1}),j(j.P+j.F*ot,"Array",{find:function(t){return it(this,t,arguments.length>1?arguments[1]:void 0)}}),rt("find");m.Array.find;var at=tt(6),st=!0;"findIndex"in[]&&Array(1).findIndex(function(){st=!1}),j(j.P+j.F*st,"Array",{findIndex:function(t){return at(this,t,arguments.length>1?arguments[1]:void 0)}}),rt("findIndex");m.Array.findIndex;var ut,ct=function(t){return B(U(t))},ht=Math.max,lt=Math.min,ft=J("keys"),pt=function(t){return ft[t]||(ft[t]=k(t))},dt=(ut=!1,function(t,e,n){var r,i=ct(t),o=$(i.length),a=function(t,e){return(t=z(t))<0?ht(t+e,0):lt(t,e)}(n,o);if(ut&&e!=e){for(;o>a;)if((r=i[a++])!=r)return!0}else for(;o>a;a++)if((ut||a in i)&&i[a]===e)return ut||a||0;return!ut&&-1}),mt=pt("IE_PROTO"),yt=function(t,e){var n,r=ct(t),i=0,o=[];for(n in r)n!=mt&&D(r,n)&&o.push(n);for(;e.length>i;)D(r,n=e[i++])&&(~dt(o,n)||o.push(n));return o},vt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),gt=Object.keys||function(t){return yt(t,vt)},bt={f:Object.getOwnPropertySymbols},_t={f:{}.propertyIsEnumerable},wt=Object.assign,St=!wt||g(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=wt({},t)[n]||Object.keys(wt({},e)).join("")!=r})?function(t,e){for(var n=V(t),r=arguments.length,i=1,o=bt.f,a=_t.f;r>i;)for(var s,u=B(arguments[i++]),c=o?gt(u).concat(o(u)):gt(u),h=c.length,l=0;h>l;)a.call(u,s=c[l++])&&(n[s]=u[s]);return n}:wt;j(j.S+j.F,"Object",{assign:St});m.Object.assign;var Et=X("match"),Tt=function(t,e,n){if(y(r=e)&&(void 0!==(i=r[Et])?i:"RegExp"==q(r)))throw TypeError("String#"+n+" doesn't accept regex!");var r,i;return String(U(t))},Ct=X("match"),xt="".startsWith;j(j.P+j.F*function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[Ct]=!1,!"/./"[t](e)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var e=Tt(this,t,"startsWith"),n=$(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return xt?xt.call(e,r,n):e.slice(n,n+r.length)===r}});m.String.startsWith;j(j.P,"String",{repeat:function(t){var e=String(U(this)),n="",r=z(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});m.String.repeat;var It=p(function(t){var e=k("meta"),n=x.f,r=0,i=Object.isExtensible||function(){return!0},o=!g(function(){return i(Object.preventExtensions({}))}),a=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!y(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!D(t,e)){if(!i(t))return"F";if(!n)return"E";a(t)}return t[e].i},getWeak:function(t,n){if(!D(t,e)){if(!i(t))return!0;if(!n)return!1;a(t)}return t[e].w},onFreeze:function(t){return o&&s.NEED&&i(t)&&!D(t,e)&&a(t),t}}}),At=(It.KEY,It.NEED,It.fastKey,It.getWeak,It.onFreeze,x.f),Rt=X("toStringTag"),Dt=function(t,e,n){t&&!D(t=n?t:t.prototype,Rt)&&At(t,Rt,{configurable:!0,value:e})},Nt={f:X},Ot=x.f,kt=function(t){var e=m.Symbol||(m.Symbol=d.Symbol||{});"_"==t.charAt(0)||t in e||Ot(e,t,{value:Nt.f(t)})},Pt=b?Object.defineProperties:function(t,e){v(t);for(var n,r=gt(e),i=r.length,o=0;i>o;)x.f(t,n=r[o++],e[n]);return t},Ft=d.document,Mt=Ft&&Ft.documentElement,jt=pt("IE_PROTO"),Lt=function(){},qt=function(){var t,e=S("iframe"),n=vt.length;for(e.style.display="none",Mt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),qt=t.F;n--;)delete qt.prototype[vt[n]];return qt()},Bt=Object.create||function(t,e){var n;return null!==t?(Lt.prototype=v(t),n=new Lt,Lt.prototype=null,n[jt]=t):n=qt(),void 0===e?n:Pt(n,e)},Ut=vt.concat("length","prototype"),Vt={f:Object.getOwnPropertyNames||function(t){return yt(t,Ut)}},Qt=Vt.f,Ht={}.toString,zt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Kt={f:function(t){return zt&&"[object Window]"==Ht.call(t)?function(t){try{return Qt(t)}catch(t){return zt.slice()}}(t):Qt(ct(t))}},$t=Object.getOwnPropertyDescriptor,Wt={f:b?$t:function(t,e){if(t=ct(t),e=T(e,!0),E)try{return $t(t,e)}catch(t){}if(D(t,e))return I(!_t.f.call(t,e),t[e])}},Gt=It.KEY,Jt=Wt.f,Xt=x.f,Yt=Kt.f,Zt=d.Symbol,te=d.JSON,ee=te&&te.stringify,ne=X("_hidden"),re=X("toPrimitive"),ie={}.propertyIsEnumerable,oe=J("symbol-registry"),ae=J("symbols"),se=J("op-symbols"),ue=Object.prototype,ce="function"==typeof Zt,he=d.QObject,le=!he||!he.prototype||!he.prototype.findChild,fe=b&&g(function(){return 7!=Bt(Xt({},"a",{get:function(){return Xt(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Jt(ue,e);r&&delete ue[e],Xt(t,e,n),r&&t!==ue&&Xt(ue,e,r)}:Xt,pe=function(t){var e=ae[t]=Bt(Zt.prototype);return e._k=t,e},de=ce&&"symbol"==typeof Zt.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Zt},me=function(t,e,n){return t===ue&&me(se,e,n),v(t),e=T(e,!0),v(n),D(ae,e)?(n.enumerable?(D(t,ne)&&t[ne][e]&&(t[ne][e]=!1),n=Bt(n,{enumerable:I(0,!1)})):(D(t,ne)||Xt(t,ne,I(1,{})),t[ne][e]=!0),fe(t,e,n)):Xt(t,e,n)},ye=function(t,e){v(t);for(var n,r=function(t){var e=gt(t),n=bt.f;if(n)for(var r,i=n(t),o=_t.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}(e=ct(e)),i=0,o=r.length;o>i;)me(t,n=r[i++],e[n]);return t},ve=function(t){var e=ie.call(this,t=T(t,!0));return!(this===ue&&D(ae,t)&&!D(se,t))&&(!(e||!D(this,t)||!D(ae,t)||D(this,ne)&&this[ne][t])||e)},ge=function(t,e){if(t=ct(t),e=T(e,!0),t!==ue||!D(ae,e)||D(se,e)){var n=Jt(t,e);return!n||!D(ae,e)||D(t,ne)&&t[ne][e]||(n.enumerable=!0),n}},be=function(t){for(var e,n=Yt(ct(t)),r=[],i=0;n.length>i;)D(ae,e=n[i++])||e==ne||e==Gt||r.push(e);return r},_e=function(t){for(var e,n=t===ue,r=Yt(n?se:ct(t)),i=[],o=0;r.length>o;)!D(ae,e=r[o++])||n&&!D(ue,e)||i.push(ae[e]);return i};ce||(P((Zt=function(){if(this instanceof Zt)throw TypeError("Symbol is not a constructor!");var t=k(arguments.length>0?arguments[0]:void 0),e=function(n){this===ue&&e.call(se,n),D(this,ne)&&D(this[ne],t)&&(this[ne][t]=!1),fe(this,t,I(1,n))};return b&&le&&fe(ue,t,{configurable:!0,set:e}),pe(t)}).prototype,"toString",function(){return this._k}),Wt.f=ge,x.f=me,Vt.f=Kt.f=be,_t.f=ve,bt.f=_e,b&&P(ue,"propertyIsEnumerable",ve,!0),Nt.f=function(t){return pe(X(t))}),j(j.G+j.W+j.F*!ce,{Symbol:Zt});for(var we="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Se=0;we.length>Se;)X(we[Se++]);for(var Ee=gt(X.store),Te=0;Ee.length>Te;)kt(Ee[Te++]);j(j.S+j.F*!ce,"Symbol",{for:function(t){return D(oe,t+="")?oe[t]:oe[t]=Zt(t)},keyFor:function(t){if(!de(t))throw TypeError(t+" is not a symbol!");for(var e in oe)if(oe[e]===t)return e},useSetter:function(){le=!0},useSimple:function(){le=!1}}),j(j.S+j.F*!ce,"Object",{create:function(t,e){return void 0===e?Bt(t):ye(Bt(t),e)},defineProperty:me,defineProperties:ye,getOwnPropertyDescriptor:ge,getOwnPropertyNames:be,getOwnPropertySymbols:_e}),te&&j(j.S+j.F*(!ce||g(function(){var t=Zt();return"[null]"!=ee([t])||"{}"!=ee({a:t})||"{}"!=ee(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(y(e)||void 0!==t)&&!de(t))return W(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!de(e))return e}),r[1]=e,ee.apply(te,r)}}),Zt.prototype[re]||A(Zt.prototype,re,Zt.prototype.valueOf),Dt(Zt,"Symbol"),Dt(Math,"Math",!0),Dt(d.JSON,"JSON",!0);var Ce=X("toStringTag"),xe="Arguments"==q(function(){return arguments}()),Ie={};Ie[X("toStringTag")]="z",Ie+""!="[object z]"&&P(Object.prototype,"toString",function(){return"[object "+(void 0===(t=this)?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ce))?n:xe?q(e):"Object"==(r=q(e))&&"function"==typeof e.callee?"Arguments":r)+"]";var t,e,n,r},!0),kt("asyncIterator"),kt("observable");m.Symbol;var Ae={},Re={};A(Re,X("iterator"),function(){return this});var De,Ne=function(t,e,n){t.prototype=Bt(Re,{next:I(1,n)}),Dt(t,e+" Iterator")},Oe=pt("IE_PROTO"),ke=Object.prototype,Pe=Object.getPrototypeOf||function(t){return t=V(t),D(t,Oe)?t[Oe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ke:null},Fe=X("iterator"),Me=!([].keys&&"next"in[].keys()),je=function(){return this},Le=function(t,e,n,r,i,o,a){Ne(n,e,r);var s,u,c,h=function(t){if(!Me&&t in d)return d[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},l=e+" Iterator",f="values"==i,p=!1,d=t.prototype,m=d[Fe]||d["@@iterator"]||i&&d[i],y=m||h(i),v=i?f?h("entries"):y:void 0,g="Array"==e&&d.entries||m;if(g&&(c=Pe(g.call(new t)))!==Object.prototype&&c.next&&(Dt(c,l,!0),"function"!=typeof c[Fe]&&A(c,Fe,je)),f&&m&&"values"!==m.name&&(p=!0,y=function(){return m.call(this)}),(Me||p||!d[Fe])&&A(d,Fe,y),Ae[e]=y,Ae[l]=je,i)if(s={values:f?y:h("values"),keys:o?y:h("keys"),entries:v},a)for(u in s)u in d||P(d,u,s[u]);else j(j.P+j.F*(Me||p),e,s);return s},qe=(De=!0,function(t,e){var n,r,i=String(U(t)),o=z(e),a=i.length;return o<0||o>=a?De?"":void 0:(n=i.charCodeAt(o))<55296||n>56319||o+1===a||(r=i.charCodeAt(o+1))<56320||r>57343?De?i.charAt(o):n:De?i.slice(o,o+2):r-56320+(n-55296<<10)+65536});Le(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=qe(e,n),this._i+=t.length,{value:t,done:!1})});var Be=function(t,e){return{value:e,done:!!t}},Ue=Le(Array,"Array",function(t,e){this._t=ct(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Be(1)):Be(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Ae.Arguments=Ae.Array,rt("keys"),rt("values"),rt("entries");for(var Ve=X("iterator"),Qe=X("toStringTag"),He=Ae.Array,ze={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Ke=gt(ze),$e=0;$e<Ke.length;$e++){var We,Ge=Ke[$e],Je=ze[Ge],Xe=d[Ge],Ye=Xe&&Xe.prototype;if(Ye&&(Ye[Ve]||A(Ye,Ve,He),Ye[Qe]||A(Ye,Qe,Ge),Ae[Ge]=He,Je))for(We in Ue)Ye[We]||P(Ye,We,Ue[We],!0)}Nt.f("iterator")}.call(e,n(86).setImmediate,n(4))},function(t,e){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(t){return t&&DataView.prototype.isPrototypeOf(t)},i=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};h.prototype.append=function(t,e){t=s(t),e=u(e);var n=this.map[t];this.map[t]=n?n+","+e:e},h.prototype.delete=function(t){delete this.map[s(t)]},h.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},h.prototype.set=function(t,e){this.map[s(t)]=u(e)},h.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},h.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),c(t)},h.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},h.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),c(t)},e.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},m.call(y.prototype),m.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var a=[301,302,303,307,308];g.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.Headers=h,t.Request=y,t.Response=g,t.fetch=function(t,n){return new Promise(function(r,i){var o=new y(t,n),a=new XMLHttpRequest;a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;r(new g(i,n))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&e.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function h(t){this.map={},t instanceof h?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function p(t){var e=new FileReader,n=f(e);return e.readAsArrayBuffer(t),n}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&r(t))this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!i(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t,e,n,r=l(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=f(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(t,e){var n,r,i=(e=e||{}).body;if(t instanceof y){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),o.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function v(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function g(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(93),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!=s){var h=a<<4&240|s>>2;if(r.push(h),64!=u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=h(t[n],e[n]));return t}var l=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}(),f=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},p="FirebaseError",d=Error.captureStackTrace;var m=function(){return function(t,e){if(this.code=t,this.message=e,d)d(this,y.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=p,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}}();m.prototype=Object.create(Error.prototype),m.prototype.constructor=m,m.prototype.name=p;var y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new m(i,n);for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=e[a]);return o},t}();function v(t){return JSON.parse(t)}var g=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=v(c(o[0])||""),n=v(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},b=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},_=function(t,e){return b(e,function(e,n){t[e]=n}),t},w=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},S=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return r.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782);i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(function(){return function(){this.blockSize=-1}}());var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function T(){}function C(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.assert=o,e.assertionError=a,e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.CONSTANTS=i,e.deepCopy=function(t){return h(void 0,t)},e.deepExtend=h,e.patchProperty=function(t,e,n){t[e]=n},e.Deferred=l,e.getUA=f,e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.ErrorFactory=y,e.FirebaseError=m,e.patchCapture=function(t){var e=d;return d=t,e},e.jsonEval=v,e.stringify=function(t){return JSON.stringify(t)},e.decode=g,e.isAdmin=function(t){var e=g(t).claims;return"object"==typeof e&&!0===e.admin},e.issuedAtTime=function(t){var e=g(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.isValidFormat=function(t){var e=g(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e,n,r=g(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&i>=e&&i<=n},e.clone=function(t){return _({},t)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},e.extend=_,e.findKey=w,e.findValue=function(t,e,n){var r=w(t,e,n);return r&&t[r]},e.forEach=b,e.getAnyKey=function(t){for(var e in t)return e},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.querystring=function(t){var e=[];return b(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},e.Sha1=S,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.createSubscribe=function(t,e){var n=new E(t,e);return n.subscribe.bind(n)},e.errorPrefix=C,e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(C(t,e,r)+"must be a valid firebase namespace.")},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;o(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(174);n.n(r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=(r=n(92))&&"object"==typeof r&&"default"in r?r.default:r,a=n(175),s=n(93),u=n(176),c=o.SDK_VERSION,h=new a.Logger("@firebase/firestore");function l(){return h.logLevel===a.LogLevel.DEBUG?i.DEBUG:h.logLevel===a.LogLevel.SILENT?i.SILENT:i.ERROR}function f(t){switch(t){case i.DEBUG:h.logLevel=a.LogLevel.DEBUG;break;case i.ERROR:h.logLevel=a.LogLevel.ERROR;break;case i.SILENT:h.logLevel=a.LogLevel.SILENT;break;default:h.error("Firestore ("+c+"): Invalid value passed to `setLogLevel`")}}function p(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(h.logLevel<=a.LogLevel.DEBUG){var i=n.map(m);h.debug.apply(h,["Firestore ("+c+") ["+t+"]: "+e].concat(i))}}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(h.logLevel<=a.LogLevel.ERROR){var r=e.map(m);h.error.apply(h,["Firestore ("+c+"): "+t].concat(r))}}function m(t){if("string"==typeof t)return t;var e=g.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function y(t){var e="FIRESTORE ("+c+") INTERNAL ASSERTION FAILED: "+t;throw d(e),new Error(e)}function v(t,e){t||y(e)}!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT"}(i||(i={}));var g=function(){function t(){}return t.setPlatform=function(e){t.platform&&y("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||y("Platform not set"),t.platform},t}();function b(){return g.getPlatform().emptyByteString}var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return s.__extends(e,t),e}(Error);function S(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new w(_.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function T(t,e){return void 0!==t?t:e}function C(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function x(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function I(t){for(var e in v(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function A(t,e,n){if(e.length!==n)throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires "+H(n,"argument")+", but was called with "+H(e.length,"argument")+".")}function R(t,e,n){if(e.length<n)throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires at least "+H(n,"argument")+", but was called with "+H(e.length,"argument")+".")}function D(t,e,n,r){if(e.length<n||e.length>r)throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+H(e.length,"argument")+".")}function N(t,e,n,r){j(t,e,Q(n)+" argument",r)}function O(t,e,n,r){void 0!==r&&N(t,e,n,r)}function k(t,e,n,r){j(t,e,n+" option",r)}function P(t,e,n,r){void 0!==r&&k(t,e,n,r)}function F(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+q(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+q(r[o]))}(t,e,n,r,i)}function M(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(q(u))}var c=q(r);throw new w(_.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function j(t,e,n,r){if(!("object"===e?L(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=q(r);throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function L(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function q(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":y("Unknown wrong type: "+typeof t)}function B(t,e,n){if(void 0===n)throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Q(e)+" argument, but it was undefined.")}function U(t,e,n){x(e,function(e,r){if(n.indexOf(e)<0)throw new w(_.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function V(t,e,n,r){var i=q(r);return new w(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+Q(n)+" argument to be a "+e+", but it was: "+i)}function Q(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function H(t,e){return t+" "+e+(1===t?"":"s")}var z=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return v(20===e.length,"Invalid auto ID: "+e),e},t}();function K(t,e){return t<e?-1:t>e?1:0}function $(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function W(){if("undefined"==typeof Uint8Array)throw new w(_.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function G(){if(!g.getPlatform().base64Available)throw new w(_.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var J,X,Y=function(){function t(t){G(),this._binaryString=t}return t.fromBase64String=function(e){A("Blob.fromBase64String",arguments,1),N("Blob.fromBase64String","string",1,e),G();try{return new t(g.getPlatform().atob(e))}catch(t){throw new w(_.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(A("Blob.fromUint8Array",arguments,1),W(),!(e instanceof Uint8Array))throw V("Blob.fromUint8Array","Uint8Array",1,e);return new t(Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join(""))},t.prototype.toBase64=function(){return A("Blob.toBase64",arguments,0),G(),g.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){A("Blob.toUint8Array",arguments,0),W();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return K(this._binaryString,t._binaryString)},t}(),Z=S(Y,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),tt=function(){function t(t,e){if(A("GeoPoint",arguments,2),N("GeoPoint","number",1,t),N("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new w(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new w(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return K(this._lat,t._lat)||K(this._long,t._long)},t}(),et=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new w(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new w(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new w(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new w(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?K(this.nanoseconds,t.nanoseconds):K(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),nt=function(){return function(t,e,n,r){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r}}(),rt="(default)",it=function(){function t(t,e){this.projectId=t,this.database=e||rt}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===rt},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return K(this.projectId,t.projectId)||K(this.database,t.database)},t}(),ot=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&y("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&y("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):"string"==typeof e?n.push(e):y("Unknown parameter type for Path.child(): "+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,v(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return v(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return v(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return v(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},t.prototype.get=function(t){return v(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new w(_.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(ot),st=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.isValidIdentifier=function(t){return st.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new w(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new w(_.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new w(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new w(_.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(ot),ct=function(){function t(e){this.path=e,v(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.isEqual=function(t){return null!==t&&0===at.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return at.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new at(e.slice()))},t.fromPathString=function(e){return new t(at.fromString(e))},t.EMPTY=new t(new at([])),t}(),ht=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return ct.comparator(t.key,e.key)},t}(),lt=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n)||this;return a.data=r,a.proto=o,a.hasLocalMutations=!!i.hasLocalMutations,a.hasCommittedMutations=!!i.hasCommittedMutations,a}return s.__extends(e,t),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):y("Trying to compare documents on fields that don't exist")},e}(ht),ft=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return s.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ht),pt=function(t){function e(e,n){return t.call(this,e,n)||this}return s.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ht),dt=function(){function t(t,e){this.comparator=t,this.root=e||yt.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yt.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new mt(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new mt(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new mt(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new mt(this.root,t,this.comparator,!0)},t}(),mt=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){v(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),yt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw y("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw y("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw y("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),vt=function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new yt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();yt.EMPTY=new vt,function(t){t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue"}(J||(J={})),function(t){t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous"}(X||(X={}));var gt=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(X.Estimate,n);case"previous":return new t(X.Previous,n);case"none":case void 0:return new t(X.Default,n);default:return y("fromSnapshotOptions() called with invalid options.")}},t}(),bt=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return v(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),K(this.typeOrder,t.typeOrder)},t}(),_t=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=J.NullValue,e.internalValue=null,e}return s.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(bt),wt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=J.BooleanValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?K(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(bt),St=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=J.NumberValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue,r=t.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(t);var n,r},e}(bt);function Et(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Tt=function(t){function e(e){return t.call(this,e)||this}return s.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Et(this.internalValue,t.internalValue)},e}(St),Ct=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return s.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Et(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(St),xt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=J.StringValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?K(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(bt),It=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=J.TimestampValue,n}return s.__extends(e,t),e.prototype.value=function(t){return t&&t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof At?-1:this.defaultCompareTo(t)},e}(bt),At=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=J.TimestampValue,r}return s.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===X.Estimate?new It(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===X.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof It?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(bt),Rt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=J.BlobValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(bt),Dt=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=J.RefValue,r}return s.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&(this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId))},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:ct.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(bt),Nt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=J.GeoPointValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(bt),Ot=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=J.ObjectValue,n}return s.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=K(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return K(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(v(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(v(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){v(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e&&n.internalValue.get(t)||void 0}),n},e.prototype.toString=function(){return JSON.stringify(this.value())},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new dt(K)),e}(bt),kt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=J.ArrayValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return K(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return JSON.stringify(this.value())},e}(bt),Pt=Number,Ft=Pt.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Mt=Pt.MAX_SAFE_INTEGER||Math.pow(2,53)-1,jt=Pt.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function Lt(t){return null===t||void 0===t}function qt(t){return jt(t)&&t<=Mt&&t>=Ft}var Bt,Ut=function(){function t(t,e,n,r,i,o){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.path=t,this.explicitOrderBy=e,this.filters=n,this.limit=r,this.startAt=i,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[Jt]:this.memoizedOrderBy=[new Gt(t),Jt];else{v(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:$t.ASCENDING;this.memoizedOrderBy.push(a===$t.ASCENDING?Jt:Xt)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){v(null==this.getInequalityFilterField()||!(e instanceof Ht)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),v(!ct.isDocumentKey(this.path),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){v(!ct.isDocumentKey(this.path),"No ordering allowed for document query"),v(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();t+="|f:";for(var e=0,n=this.filters;e<n.length;e++){t+=n[e].canonicalId(),t+=","}t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){t+=i[r].canonicalId(),t+=","}Lt(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),Lt(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return!!this.path.isEqual(t.path)&&(!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt))},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return v(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesAncestor(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!Lt(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Ht&&n.isInequality())return n.field}return null},t.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(t){return t instanceof Ht&&t.op===Qt.ARRAY_CONTAINS})},t.prototype.isDocumentQuery=function(){return ct.isDocumentKey(this.path)&&0===this.filters.length},t.prototype.matchesAncestor=function(t){var e=t.key.path;return ct.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isPrefixOf(e)&&this.path.length===e.length-1},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++){if(!n[e].matches(t))return!1}return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){v(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),Vt=function(){function t(){}return t.create=function(t,e,n){if(n.isEqual(_t.INSTANCE)){if(e!==Qt.EQUAL)throw new w(_.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new zt(t)}if(n.isEqual(Ct.NAN)){if(e!==Qt.EQUAL)throw new w(_.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new Kt(t)}return new Ht(t,e,n)},t}(),Qt=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;default:return y("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t}(),Ht=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return s.__extends(e,t),e.prototype.matches=function(t){if(this.field.isKeyField()){v(this.value instanceof Dt,"Comparing on key, but filter value not a RefValue"),v(this.op!==Qt.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var e=this.value,n=ct.comparator(t.key,e.key);return this.matchesComparison(n)}var r=t.field(this.field);return void 0!==r&&this.matchesValue(r)},e.prototype.matchesValue=function(t){var e=this;return this.op===Qt.ARRAY_CONTAINS?t instanceof kt&&void 0!==t.internalValue.find(function(t){return t.isEqual(e.value)}):this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case Qt.LESS_THAN:return t<0;case Qt.LESS_THAN_OR_EQUAL:return t<=0;case Qt.EQUAL:return 0===t;case Qt.GREATER_THAN:return t>0;case Qt.GREATER_THAN_OR_EQUAL:return t>=0;default:return y("Unknown relation op"+this.op)}},e.prototype.isInequality=function(){return this.op!==Qt.EQUAL&&this.op!==Qt.ARRAY_CONTAINS},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&(this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value))},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(Vt),zt=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return s.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},e.prototype.toString=function(){return this.field.canonicalString()+" IS null"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(Vt),Kt=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return s.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field),n=e&&e.value();return"number"==typeof n&&isNaN(n)},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(Vt),$t=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Wt=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++){t+=n[e].toString()}return t},t.prototype.sortsBeforeDocument=function(t,e){v(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())v(o instanceof Dt,"Bound has a non-key value where the key path is being used."),n=ct.comparator(o.key,e.key);else{var a=e.field(i.field);v(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===$t.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];return n.isEqual(r)}return!0},t}(),Gt=function(){function t(t,e){this.field=t,void 0===e&&(e=$t.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?lt.compareByKey(t,e):lt.compareByField(this.field,t,e);switch(this.dir){case $t.ASCENDING:return n;case $t.DESCENDING:return-1*n;default:return y("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Jt=new Gt(ut.keyField(),$t.ASCENDING),Xt=new Gt(ut.keyField(),$t.DESCENDING),Yt=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new et(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new et(0,0)),t}();!function(t){t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution"}(Bt||(Bt={}));var Zt,te=function(){function t(t,e,n,r,i,o){void 0===i&&(i=Yt.MIN),void 0===o&&(o=b()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return t.prototype.copy=function(e){return new t(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),ee=function(){function t(t){this.comparator=t,this.data=new dt(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();){if(!t(n.getNext().key))return}},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ne(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ne(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ne=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),re=function(){function t(t){this.fields=t}return t.fromArray=function(e){var n=new ee(ut.comparator);return e.forEach(function(t){return n=n.add(t)}),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach(function(n){n.isPrefixOf(t)&&(e=!0)}),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),ie=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),oe=function(){return function(t,e){this.version=t,this.transformResults=e}}();!function(t){t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete"}(Zt||(Zt={}));var ae=function(){function t(t,e){this.updateTime=t,this.exists=e,v(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof lt&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof lt:(v(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return e=this.updateTime,n=t.updateTime,(null!==e&&void 0!==e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),se=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&v(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof lt?t.version:Yt.MIN},t}(),ue=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=Zt.Set,i}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new lt(this.key,n,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=se.getPostMutationVersion(t);return new lt(this.key,r,this.value,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(se),ce=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=Zt.Patch,o}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new pt(this.key,e.version);var n=this.patchDocument(t);return new lt(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=se.getPostMutationVersion(t),i=this.patchDocument(t);return new lt(this.key,r,i,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var e;return e=t instanceof lt?t.data:Ot.EMPTY,this.patchObject(e)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t=void 0!==r?t.set(n,r):t.delete(n)}}),t},e}(se),he=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=Zt.Transform,r.precondition=ae.exists(!0),r}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new pt(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data,r);return new lt(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new lt(this.key,r.version,o,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&$(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){v(t instanceof lt,"Unknown MaybeDocument type "+t);var e=t;return v(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];v(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof lt&&(a=t.field(i.field)||null),n.push(o.applyToRemoteDocument(a,e[r]))}return n},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],a=o.transform,s=null;e instanceof lt&&(s=e.field(o.field)||null),n.push(a.applyToLocalView(s,t))}return n},e.prototype.transformObject=function(t,e){v(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;t=t.set(r,e[n])}return t},e}(se),le=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=Zt.Delete,r}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by DeleteMutation."),new ft(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&v(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new ft(this.key,Yt.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(se),fe=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new At(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),pe=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=me(t),n=function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new kt(e)},t.prototype.isEqual=function(e){return e instanceof t&&$(e.elements,this.elements)},t}(),de=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=me(t),n=function(t){e=e.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new kt(e)},t.prototype.isEqual=function(e){return e instanceof t&&$(e.elements,this.elements)},t}();function me(t){return t instanceof kt?t.internalValue.slice():[]}var ye,ve=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();function ge(t){switch(t){case _.OK:return y("Treated status OK as error");case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return y("Unknown status code: "+t)}}function be(t){if(void 0===t)return d("GRPC error has no .code"),_.UNKNOWN;switch(t){case ye.OK:return _.OK;case ye.CANCELLED:return _.CANCELLED;case ye.UNKNOWN:return _.UNKNOWN;case ye.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case ye.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case ye.INTERNAL:return _.INTERNAL;case ye.UNAVAILABLE:return _.UNAVAILABLE;case ye.UNAUTHENTICATED:return _.UNAUTHENTICATED;case ye.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case ye.NOT_FOUND:return _.NOT_FOUND;case ye.ALREADY_EXISTS:return _.ALREADY_EXISTS;case ye.PERMISSION_DENIED:return _.PERMISSION_DENIED;case ye.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case ye.ABORTED:return _.ABORTED;case ye.OUT_OF_RANGE:return _.OUT_OF_RANGE;case ye.UNIMPLEMENTED:return _.UNIMPLEMENTED;case ye.DATA_LOSS:return _.DATA_LOSS;default:return y("Unknown status code: "+t)}}!function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS"}(ye||(ye={}));var _e=new dt(ct.comparator);function we(){return _e}function Se(){return we()}var Ee=new dt(ct.comparator);function Te(){return Ee}var Ce=new dt(ct.comparator);function xe(){return Ce}var Ie=new ee(ct.comparator);function Ae(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ie,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Re=new ee(K);function De(){return Re}var Ne,Oe,ke=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ct.comparator(e.key,n.key)}:function(t,e){return ct.comparator(t.key,e.key)},this.keyedMap=Te(),this.sortedSet=new dt(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}();!function(t){t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata"}(Ne||(Ne={})),function(t){t[t.Local=0]="Local",t[t.Synced=1]="Synced"}(Oe||(Oe={}));var Pe,Fe=function(){function t(){this.changeMap=new dt(ct.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Ne.Added&&n.type===Ne.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Ne.Metadata&&n.type!==Ne.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Ne.Modified&&n.type===Ne.Modified?this.changeMap=this.changeMap.insert(e,{type:Ne.Modified,doc:t.doc}):t.type===Ne.Modified&&n.type===Ne.Added?this.changeMap=this.changeMap.insert(e,{type:Ne.Added,doc:t.doc}):t.type===Ne.Removed&&n.type===Ne.Added?this.changeMap=this.changeMap.remove(e):t.type===Ne.Removed&&n.type===Ne.Modified?this.changeMap=this.changeMap.insert(e,{type:Ne.Removed,doc:n.doc}):t.type===Ne.Added&&n.type===Ne.Removed?this.changeMap=this.changeMap.insert(e,{type:Ne.Modified,doc:t.doc}):y("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Me=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:Ne.Added,doc:t})}),new t(e,n,ke.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),je=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=((r={})[e]=Le.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(Yt.MIN,i,De(),we(),Ae())},t}(),Le=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(b(),n,Ae(),Ae(),Ae())},t}(),qe=function(){return function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r}}(),Be=function(){return function(t,e){this.targetId=t,this.existenceFilter=e}}();!function(t){t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset"}(Pe||(Pe={}));var Ue=function(){return function(t,e,n,r){void 0===n&&(n=b()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}(),Ve=function(){function t(){this.pendingResponses=0,this.documentChanges=ze(),this._resumeToken=b(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=Ae(),e=Ae(),n=Ae();return this.documentChanges.forEach(function(r,i){switch(i){case Ne.Added:t=t.add(r);break;case Ne.Modified:e=e.add(r);break;case Ne.Removed:n=n.add(r);break;default:y("Encountered invalid change type: "+i)}}),new Le(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=ze()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Qe=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=we(),this.pendingDocumentTargetMapping=He(),this.pendingTargetResets=new ee(K)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof lt?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof ft&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){r=o[i];this.removeDocumentFromTarget(r,t.key,t.newDoc)}},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ensureTargetState(n);switch(t.state){case Pe.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case Pe.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case Pe.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),v(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Pe.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case Pe.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:y("Unknown target watch change state: "+t.state)}})},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):C(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new ct(i.path);this.removeDocumentFromTarget(e,o,new ft(o,Yt.forDeletedDoc()))}else v(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};C(this.targetStates,function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new ct(o.query.path);null!==e.pendingDocumentUpdates.get(a)||e.targetContainsDocument(r,a)||e.removeDocumentFromTarget(r,a,new ft(a,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=Ae();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===Bt.LimboResolution||(i=!1,!1)}),i&&(r=r.add(t))});var i=new je(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=we(),this.pendingDocumentTargetMapping=He(),this.pendingTargetResets=new ee(K),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Ne.Modified:Ne.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Ne.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Ve),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new ee(K),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){return null!==this.queryDataForActiveTarget(t)},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;v(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Ve,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function He(){return new dt(ct.comparator)}function ze(){return new dt(ct.comparator)}var Ke,$e,We=((Ke={})[$t.ASCENDING.name]="ASCENDING",Ke[$t.DESCENDING.name]="DESCENDING",Ke),Ge=(($e={})[Qt.LESS_THAN.name]="LESS_THAN",$e[Qt.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",$e[Qt.GREATER_THAN.name]="GREATER_THAN",$e[Qt.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",$e[Qt.EQUAL.name]="EQUAL",$e[Qt.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",$e),Je=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xe(t,e){v(!Lt(t),e+" is missing")}function Ye(t){return"number"==typeof t?t:"string"==typeof t?Number(t):y("can't parse "+t)}var Ze=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?_.UNKNOWN:be(t.code);return new w(e,t.message||"")},t.prototype.toInt32Value=function(t){return Lt(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return Lt(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);v(!!t,"Cannot deserialize null or undefined timestamp.");var e=Ye(t.seconds||"0"),n=t.nanos||0;return new et(e,n)},t.prototype.fromIso8601String=function(t){var e=0,n=Je.exec(t);if(v(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new et(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(v(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Y.fromBase64String(t)):(v(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),Y.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return v(!!t,"Trying to deserialize version that isn't set"),Yt.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=at.fromString(t);return v(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return v(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),v(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new ct(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return 0===t.length?this.encodedDatabaseId:this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?at.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new at(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new at(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return v(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof _t)return{nullValue:"NULL_VALUE"};if(t instanceof wt)return{booleanValue:t.value()};if(t instanceof Tt)return{integerValue:""+t.value()};if(t instanceof Ct){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof xt?{stringValue:t.value()}:t instanceof Ot?{mapValue:this.toMapValue(t)}:t instanceof kt?{arrayValue:this.toArrayValue(t)}:t instanceof It?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Nt?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Rt?{bytesValue:this.toBytes(t.value())}:t instanceof Dt?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:y("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t.value_type;if(tn(t,n,"nullValue"))return _t.INSTANCE;if(tn(t,n,"booleanValue"))return wt.of(t.booleanValue);if(tn(t,n,"integerValue"))return new Tt(Ye(t.integerValue));if(tn(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Ct.NAN;if("Infinity"===t.doubleValue)return Ct.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Ct.NEGATIVE_INFINITY}return new Ct(t.doubleValue)}if(tn(t,n,"stringValue"))return new xt(t.stringValue);if(tn(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(tn(t,n,"arrayValue")){Xe(t.arrayValue,"arrayValue");var r=t.arrayValue.values||[];return new kt(r.map(function(t){return e.fromValue(t)}))}if(tn(t,n,"timestampValue"))return Xe(t.timestampValue,"timestampValue"),new It(this.fromTimestamp(t.timestampValue));if(tn(t,n,"geoPointValue")){Xe(t.geoPointValue,"geoPointValue");var i=t.geoPointValue.latitude||0,o=t.geoPointValue.longitude||0;return new Nt(new tt(i,o))}if(tn(t,n,"bytesValue")){Xe(t.bytesValue,"bytesValue");var a=this.fromBlob(t.bytesValue);return new Rt(a)}if(tn(t,n,"referenceValue")){Xe(t.referenceValue,"referenceValue");var s=this.fromResourceName(t.referenceValue),u=new it(s.get(1),s.get(3)),c=new ct(this.extractLocalPathFromResourceName(s));return new Dt(u,c)}return y("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return v(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new lt(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=t,r=Ot.EMPTY;return x(n,function(t,n){r=r.set(new ut([t]),e.fromValue(n))}),r},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){v(!!t.found,"Tried to deserialize a found document from a missing document."),Xe(t.found.name,"doc.found.name"),Xe(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new lt(e,n,r,{},t.found)},t.prototype.fromMissing=function(t){v(!!t.missing,"Tried to deserialize a missing document from a found document."),v(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new ft(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t.result;return tn(t,e,"found")?this.fromFound(t):tn(t,e,"missing")?this.fromMissing(t):y("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Pe.Added:return"ADD";case Pe.Current:return"CURRENT";case Pe.NoChange:return"NO_CHANGE";case Pe.Removed:return"REMOVE";case Pe.Reset:return"RESET";default:return y("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Be)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof qe){if(t.newDoc instanceof lt){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof ft){e=t.newDoc;return{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}}}if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Ue){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return ye.OK;switch(t){case _.OK:return ye.OK;case _.CANCELLED:return ye.CANCELLED;case _.UNKNOWN:return ye.UNKNOWN;case _.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case _.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case _.INTERNAL:return ye.INTERNAL;case _.UNAVAILABLE:return ye.UNAVAILABLE;case _.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case _.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case _.NOT_FOUND:return ye.NOT_FOUND;case _.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case _.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case _.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case _.ABORTED:return ye.ABORTED;case _.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case _.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case _.DATA_LOSS:return ye.DATA_LOSS;default:return y("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return y("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t.response_type;if(tn(t,n,"targetChange")){Xe(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),a=t.targetChange.cause,s=a&&this.fromRpcStatus(a);e=new Ue(r,i,o,s||null)}else if(tn(t,n,"documentChange")){Xe(t.documentChange,"documentChange"),Xe(t.documentChange.document,"documentChange.name"),Xe(t.documentChange.document.name,"documentChange.document.name"),Xe(t.documentChange.document.updateTime,"documentChange.document.updateTime");var u=t.documentChange,c=this.fromName(u.document.name),h=this.fromVersion(u.document.updateTime),l=this.fromFields(u.document.fields||{}),f=new lt(c,h,l,{},u.document),p=u.targetIds||[],d=u.removedTargetIds||[];e=new qe(p,d,f.key,f)}else if(tn(t,n,"documentDelete")){Xe(t.documentDelete,"documentDelete"),Xe(t.documentDelete.document,"documentDelete.document");var m=t.documentDelete;c=this.fromName(m.document),h=m.readTime?this.fromVersion(m.readTime):Yt.forDeletedDoc(),f=new ft(c,h),d=m.removedTargetIds||[];e=new qe([],d,f.key,f)}else if(tn(t,n,"documentRemove")){Xe(t.documentRemove,"documentRemove"),Xe(t.documentRemove.document,"documentRemove");var v=t.documentRemove;c=this.fromName(v.document),d=v.removedTargetIds||[];e=new qe([],d,c,null)}else{if(!tn(t,n,"filter"))return y("Unknown change type "+JSON.stringify(t));Xe(t.filter,"filter"),Xe(t.filter.targetId,"filter.targetId");var g=t.filter,b=g.count||0,_=new ve(b),w=g.targetId;e=new Be(w,_)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Pe.NoChange:"ADD"===t?Pe.Added:"REMOVE"===t?Pe.Removed:"CURRENT"===t?Pe.Current:"RESET"===t?Pe.Reset:y("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!tn(t,t.response_type,"targetChange"))return Yt.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?Yt.MIN:e.readTime?this.fromVersion(e.readTime):Yt.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof ue)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof le)e={delete:this.toName(t.key)};else if(t instanceof ce)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof he))return y("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):ae.NONE;if(t.update){Xe(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new ce(r,i,o,n)}return new ue(r,i,n)}if(t.delete){r=this.fromName(t.delete);return new le(r,n)}if(t.transform){r=this.fromName(t.transform.document);var a=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return v(!0===n.exists,'Transforms only support precondition "exists == true"'),new he(r,a)}return y("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return v(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:y("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?ae.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ae.exists(t.exists):ae.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e),i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new oe(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(v(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof fe)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof pe)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof de)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};throw y("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=t.transform_type,r=null;if(tn(t,n,"setToServerValue"))v("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),r=fe.instance;else if(tn(t,n,"appendMissingElements")){var i=t.appendMissingElements.values||[];r=new pe(i.map(function(t){return e.fromValue(t)}))}else if(tn(t,n,"removeAllFromArray")){i=t.removeAllFromArray.values||[];r=new de(i.map(function(t){return e.fromValue(t)}))}else y("Unknown transform proto: "+JSON.stringify(t));var o=ut.fromServerFormat(t.fieldPath);return new ie(o,r)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;v(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return Ut.atPath(this.fromQueryPath(n))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}};if(t.path.isEmpty())e.parent=this.toQueryPath(at.EMPTY_PATH);else{var n=t.path;v(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0;if(r>0){v(1===r,"StructuredQuery.from with more than one collection is not supported.");var i=n.from[0];e=e.child(i.collectionId)}var o=[];n.where&&(o=this.fromFilter(n.where));var a=[];n.orderBy&&(a=this.fromOrder(n.orderBy));var s=null;n.limit&&(s=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new Ut(e,a,o,s,u,c)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case Bt.Listen:return null;case Bt.ExistenceFilterMismatch:return"existence-filter-mismatch";case Bt.LimboResolution:return"limbo-document";default:return y("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Ht?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):y("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Wt(r,n)},t.prototype.toDirection=function(t){return We[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return $t.ASCENDING;case"DESCENDING":return $t.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return Ge[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Qt.EQUAL;case"GREATER_THAN":return Qt.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Qt.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Qt.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Qt.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Qt.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return y("Unspecified relation");default:return y("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return ut.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Gt(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof Ht?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:y("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new Ht(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof Kt?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof zt?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:y("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new Kt(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new zt(n);case"OPERATOR_UNSPECIFIED":return y("Unspecified filter");default:return y("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return ut.fromServerFormat(t)});return re.fromArray(e)},t}();function tn(t,e,n){return e===n||!e&&n in t}var en="FirebaseError",nn=Error.captureStackTrace,rn=function(){return function(t,e){if(this.code=t,this.message=e,nn)nn(this,on.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=en,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}}();rn.prototype=Object.create(Error.prototype),rn.prototype.constructor=rn,rn.prototype.name=en;var on=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new rn(i,n);for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=e[a]);return o},t}(),an=(function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}s.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782);i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}(function(){return function(){this.blockSize=-1}}()),function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){v(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){v(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){v(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){v(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){v(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){v(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}()),sn="Connection",un={BatchGetDocuments:"batchGet",Commit:"commit"},cn="gl-js/ fire/"+c,hn=function(){function t(t){this.databaseId=t.databaseId,this.pool=new u.XhrIoPool;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=cn},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,a){r.pool.getObject(function(s){s.listenOnce(u.EventType.COMPLETE,function(){try{switch(s.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var e=s.getResponseJson();p(sn,"XHR received:",JSON.stringify(e)),o(e);break;case u.ErrorCode.TIMEOUT:p(sn,'RPC "'+t+'" timed out'),a(new w(_.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=s.getStatus();p(sn,'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0?a(new w(function(t){switch(t){case 200:return _.OK;case 400:return _.INVALID_ARGUMENT;case 401:return _.UNAUTHENTICATED;case 403:return _.PERMISSION_DENIED;case 404:return _.NOT_FOUND;case 409:return _.ABORTED;case 416:return _.OUT_OF_RANGE;case 429:return _.RESOURCE_EXHAUSTED;case 499:return _.CANCELLED;case 500:return _.UNKNOWN;case 501:return _.UNIMPLEMENTED;case 503:return _.UNAVAILABLE;case 504:return _.DEADLINE_EXCEEDED;default:return t>=200&&t<300?_.OK:t>=400&&t<500?_.FAILED_PRECONDITION:t>=500&&t<600?_.INTERNAL:_.UNKNOWN}}(n),"Server responded with status "+s.getStatusText())):(p(sn,'RPC "'+t+'" failed'),a(new w(_.UNAVAILABLE,"Connection failed.")));break;default:y('RPC "'+t+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{p(sn,'RPC "'+t+'" completed.'),r.pool.releaseObject(s)}});var c=JSON.stringify(e);p(sn,"XHR sending: ",i+" "+c);var h={"Content-Type":"text/plain"};r.modifyHeadersForRequest(h,n),s.send(i,"POST",c,h,15)})})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1beta1.Firestore","/",t,"/channel"],r=u.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,e),"object"==typeof navigator&&"ReactNative"===navigator.product||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");p(sn,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,c=!1,h=new an({sendFn:function(t){c?p(sn,"Not sending because WebChannel is closed:",t):(s||(p(sn,"Opening WebChannel transport."),a.open(),s=!0),p(sn,"WebChannel sending:",t),a.send(t))},closeFn:function(){return a.close()}}),l=function(t,e){a.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return l(u.WebChannel.EventType.OPEN,function(){c||p(sn,"WebChannel transport opened.")}),l(u.WebChannel.EventType.CLOSE,function(){c||(c=!0,p(sn,"WebChannel transport closed"),h.callOnClose())}),l(u.WebChannel.EventType.ERROR,function(t){c||(c=!0,p(sn,"WebChannel transport errored:",t),h.callOnClose(new w(_.UNAVAILABLE,"The operation could not be completed")))}),l(u.WebChannel.EventType.MESSAGE,function(t){if(!c){var e=t.data[0];v(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){p(sn,"WebChannel received error:",n);var r=n.status,i=function(t){var e=ye[t];if(void 0!==e)return be(e)}(r),o=n.message;void 0===i&&(i=_.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),c=!0,h.callOnClose(new w(i,o)),a.close()}else p(sn,"WebChannel received:",e),h.callOnMessage(e)}}),setTimeout(function(){h.callOnOpen()},0),h},t.prototype.makeUrl=function(t){var e=un[t];v(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1beta1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}(),ln=function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new hn(t))},t.prototype.newSerializer=function(t){return new Ze(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();g.setPlatform(new ln);var fn,pn=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),dn=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}();!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection"}(fn||(fn={}));var mn=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new w(_.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),yn=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueue=function(t){var e=this;this.verifyNotFailed();var n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw d("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),v(e>=0,"Attempted to schedule an operation with a negative delay of "+e),v(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var i=mn.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&y("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){v(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++){if(n[e].timerId===t)return!0}return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){v(t===fn.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==fn.All&&i.timerId===t)break}return e.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);v(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),vn="",gn="",bn="",_n="";function wn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=En(e)),e=Sn(t.get(n),e);return En(e)}function Sn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=vn+bn;break;case vn:n+=vn+_n;break;default:n+=o}}return n}function En(t){return t+vn+gn}function Tn(t){var e=t.length;if(v(e>=2,"Invalid path "+t),2===e)return v(t.charAt(0)===vn&&t.charAt(1)===gn,"Non-empty path "+t+" had length 2"),at.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf(vn,o);switch((a<0||a>n)&&y('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case gn:var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case bn:i+=t.substring(o,a),i+="\0";break;case _n:i+=t.substring(o,a+1);break;default:y('Invalid encoded resource path: "'+t+'"')}o=a+2}return new at(r)}var Cn,xn=-1,In=function(){function t(t,e,n){this.batchId=t,this.localWriteTime=e,this.mutations=n,v(n.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&v(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;v(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var a=r[i];e=o.applyToRemoteDocument(e,a)}}return e},t.prototype.applyToLocalView=function(t,e){e&&v(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=e,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t)&&(e=i.applyToLocalView(e,n,this.localWriteTime))}return e},t.prototype.keys=function(){for(var t=Ae(),e=0,n=this.mutations;e<n.length;e++){var r=n[e];t=t.add(r.key)}return t},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&$(this.mutations,t.mutations)},t}(),An=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){v(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=xe(),a=e.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new t(e,n,r,i,o)},t}(),Rn=1;!function(t){t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine"}(Cn||(Cn={}));var Dn=function(){function t(t,e){this.generatorId=t,v((t&Rn)===t,"Generator ID "+t+" contains more than "+Rn+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<Rn,t},t.prototype.after=function(t){return this.seek(t+(1<<Rn)),this.next()},t.prototype.seek=function(t){v((t&Rn)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(Cn.QueryCache,2)},t.forSyncEngine=function(){return new t(Cn.SyncEngine)},t}(),Nn=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&y("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++){r(o[i])}return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),On=function(){function t(t){this.db=t}return t.openOrCreate=function(e,n,r){return v(t.isAvailable(),"IndexedDB not supported in current environment."),p("SimpleDb","Opening database:",e),new Nn(function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){o(new w(_.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new w(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},a.onupgradeneeded=function(t){p("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,i=new Pn(a.transaction);r.createOrUpgrade(n,i,t.oldVersion,Yn).next(function(){p("SimpleDb","Database upgrade to version "+Yn+" complete")})}}).toPromise()},t.delete=function(t){return p("SimpleDb","Removing database:",t),Mn(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===Object({NODE_ENV:"production"}).USE_MOCK_PERSISTENCE;var t=window.navigator.userAgent;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0)},t.getStore=function(t,e){return t.store(e)},t.prototype.runTransaction=function(t,e,n){var r=Pn.open(this.db,t,e),i=n(r).catch(function(t){return r.abort(t),Nn.reject(t)}).toPromise();return r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),kn=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return Mn(this.dbCursor.delete())},t}(),Pn=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new dn,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){e.completionDeferred.reject(t.target.error)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(p("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return v(!!e,"Object store not part of transaction: "+t),new Fn(e)},t}(),Fn=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(p("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Mn(n)},t.prototype.add=function(t){return p("SimpleDb","ADD",this.store.name,t,t),Mn(this.store.add(t))},t.prototype.get=function(t){var e=this;return Mn(this.store.get(t)).next(function(n){return void 0===n&&(n=null),p("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return p("SimpleDb","DELETE",this.store.name,t),Mn(this.store.delete(t))},t.prototype.count=function(){return p("SimpleDb","COUNT",this.store.name),Mn(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){p("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new Nn(function(n,r){e.onerror=function(t){r(t.target.error)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.iterateCursor=function(t,e){var n=[];return new Nn(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new kn(i),a=e(i.primaryKey,i.value,o);if(a instanceof Nn){var s=a.catch(function(t){return o.done(),Nn.reject(t)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return Nn.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(v(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Mn(t){return new Nn(function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){n(t.target.error)}})}var jn=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=Dn.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return Yt.fromTimestamp(new et(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return Bn(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)})},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.retrieveMetadata(t).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Ln(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return v(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Ln(t).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=e&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(t,u)))}).next(function(){return Nn.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){var n=this;return Ln(t).iterate(function(t,r){var i=n.serializer.fromDbTarget(r);e(i)})},t.prototype.retrieveMetadata=function(t){return qn(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,Fr.getStore(n,lr.store)).put(lr.key,e);var n},t.prototype.saveQueryData=function(t,e){return Ln(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ln(t).iterate({range:i,index:cr.queryTargetsIndexName},function(t,r,i){var a=n.serializer.fromDbTarget(r);e.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Un(t);return e.forEach(function(e){var a=wn(e.path);i.push(o.put(new hr(n,a))),i.push(r.referenceDelegate.addReference(t,e))}),Nn.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Un(t);return Nn.forEach(e,function(e){var o=wn(e.path);return Nn.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Un(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Un(t),i=Ae();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=Tn(t[1]),o=new ct(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n,r=wn(e.path),i=IDBKeyRange.bound([r],[(n=r,n+"\0")],!1,!0),o=0;return Un(t).iterate({index:hr.documentTargetsIndex,keysOnly:!0,range:i},function(t,e,n){var r=t[0];t[1];0!==r&&(o++,n.done())}).next(function(){return o>0})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return Ln(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}();function Ln(t){return Fr.getStore(t,cr.store)}function qn(t){return On.getStore(t,lr.store).get(lr.key).next(function(t){return v(null!==t,"Missing metadata row."),t})}function Bn(t){return qn(t).next(function(t){return t.highestListenSequenceNumber})}function Un(t){return Fr.getStore(t,hr.store)}var Vn=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){x(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}})},t.prototype.isEmpty=function(){return I(this.inner)},t}(),Qn=function(){function t(){this.changes=we(),this.documentSizes=new Vn(function(t){return t.toString()})}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this,r=this.assertChanges().get(e);return r?Nn.resolve(r):this.getFromCache(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},t.prototype.getEntries=function(t,e){var n=this;return this.getAllFromCache(t,e).next(function(t){var e=t.maybeDocuments;return t.sizeMap.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},t.prototype.apply=function(t){var e=this.applyChanges(t);return this.changes=null,e},t.prototype.assertChanges=function(){return v(null!==this.changes,"Changes have already been applied."),this.changes},t}(),Hn="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",zn=function(){function t(t,e){this.serializer=t,this.keepDocumentChangeLog=e,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=On.getStore(t,pr.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntries=function(t,e,n){var r=[];if(e.length>0){for(var i=Wn(t),o=Ae(),a=0,s=e;a<s.length;a++){var u=s[a],c=u.key,h=u.doc;r.push(i.put(Jn(c),h)),o=o.add(c)}this.keepDocumentChangeLog&&r.push(Gn(t).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(t,n))}return Nn.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=Wn(t),r=Jn(e);return n.get(r).next(function(t){return t?n.delete(r).next(function(){return Xn(t)}):Nn.resolve(0)})},t.prototype.getEntry=function(t,e){var n=this;return Wn(t).get(Jn(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getSizedEntry=function(t,e){var n=this;return Wn(t).get(Jn(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:Xn(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Se();return this.forEachDbEntry(t,e,function(t,e){r=e?r.insert(t,n.serializer.fromDbRemoteDocument(e)):r.insert(t,null)}).next(function(){return r})},t.prototype.getSizedEntries=function(t,e){var n=this,r=Se(),i=new dt(ct.comparator);return this.forEachDbEntry(t,e,function(t,e){e?(r=r.insert(t,n.serializer.fromDbRemoteDocument(e)),i=i.insert(t,Xn(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return Nn.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Wn(t).iterate({range:r},function(t,e,r){for(var a=ct.fromSegments(t);o&&ct.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this,r=Te(),i=e.path.toArray(),o=IDBKeyRange.lowerBound(i);return Wn(t).iterate({range:o},function(t,i,o){var a=n.serializer.fromDbRemoteDocument(i);e.path.isPrefixOf(a.key.path)?a instanceof lt&&e.matches(a)&&(r=r.insert(a.key,a)):o.done()}).next(function(){return r})},t.prototype.getNewDocumentChanges=function(t){var e=this;v(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=Ae(),r=we(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=Gn(t);return a.iterate({range:i},function(t,r){if(o&&(o=!1,e._lastProcessedDocumentChangeId+1!==r.id))return e.synchronizeLastDocumentChangeId(a).next(function(){return Nn.reject(new w(_.DATA_LOSS,Hn))});n=n.unionWith(e.serializer.fromDbResourcePaths(r.changes)),e._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(e.getEntry(t,n).next(function(t){var e=t||new ft(n,Yt.forDeletedDoc());r=r.insert(n,e)}))}),Nn.waitFor(i)}).next(function(){return r})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return Gn(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var e=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,n,r){e._lastProcessedDocumentChangeId=t,r.done()})},t.prototype.newChangeBuffer=function(){return new $n(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Kn(t).get(ur.key).next(function(t){return v(!!t,"Missing document cache metadata"),t})},t.prototype.setMetadata=function(t,e){return Kn(t).put(ur.key,e)},t.prototype.updateSize=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.setMetadata(t,r)})},t}();function Kn(t){return Fr.getStore(t,ur.store)}var $n=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return s.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=0,r=[];return this.assertChanges().forEach(function(t,i){var o=e.documentCache.serializer.toDbRemoteDocument(i),a=e.documentSizes.get(t);v(void 0!==a,"Attempting to change document "+t.toString()+" without having read it first");var s=Xn(o);n+=s-a,r.push({key:t,doc:o})}),this.documentCache.addEntries(t,r,n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(Qn);function Wn(t){return Fr.getStore(t,sr.store)}function Gn(t){return Fr.getStore(t,pr.store)}function Jn(t){return t.path.toArray()}function Xn(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw y("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var Yn=7,Zn=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;v(n<r&&n>=0&&r<=Yn,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(t){t.createObjectStore(er.store)}(t),function(t){t.createObjectStore(nr.store,{keyPath:nr.keyPath}),t.createObjectStore(rr.store,{keyPath:rr.keyPath,autoIncrement:!0}).createIndex(rr.userMutationsIndex,rr.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ir.store)}(t),fr(t),function(t){t.createObjectStore(sr.store)}(t));var o=Nn.resolve();return n<3&&r>=3&&(0!==n&&(!function(t){t.deleteObjectStore(hr.store),t.deleteObjectStore(cr.store),t.deleteObjectStore(lr.store)}(t),fr(t)),o=o.next(function(){return function(t){var e=t.store(lr.store),n=new lr(0,0,Yt.MIN.toTimestamp(),0);return e.put(lr.key,n)}(e)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(rr.store).loadAll().next(function(n){t.deleteObjectStore(rr.store);var r=t.createObjectStore(rr.store,{keyPath:rr.keyPath,autoIncrement:!0});r.createIndex(rr.userMutationsIndex,rr.userMutationsKeyPath,{unique:!0});var i=e.store(rr.store),o=n.map(function(t){return i.put(t)});return Nn.waitFor(o)})}(t,e)})),o=o.next(function(){!function(t){t.createObjectStore(dr.store,{keyPath:dr.keyPath})}(t),function(t){t.createObjectStore(pr.store,{keyPath:"id",autoIncrement:!0})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(e)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(ur.store)}(t),i.addDocumentGlobal(e)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(e)})),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(sr.store).iterate(function(t,n){e+=Xn(n)}).next(function(){var n=new ur(e);return t.store(ur.store).put(ur.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(nr.store),r=t.store(rr.store);return n.loadAll().next(function(n){return Nn.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,xn],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(rr.userMutationsIndex,i).next(function(r){return Nn.forEach(r,function(r){v(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return gr(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(hr.store),n=t.store(sr.store);return Bn(t).next(function(t){var r=[];return n.iterate(function(n,i){var o=new at(n),a=function(t){return[0,wn(t)]}(o);r.push(e.get(a).next(function(n){return n?Nn.resolve():function(n){return e.put(new hr(0,wn(n),t))}(o)}))}).next(function(){return Nn.waitFor(r)})})},t}();var tr=function(){return function(t,e){this.seconds=t,this.nanoseconds=e}}(),er=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}();var nr=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),rr=function(){function t(t,e,n,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.mutations=r}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}();var ir=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,wn(e)]},t.key=function(t,e,n){return[t,wn(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}();var or=function(){return function(t,e){this.path=t,this.readTime=e}}(),ar=function(){return function(t,e){this.path=t,this.version=e}}(),sr=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store="remoteDocuments",t}(),ur=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}();var cr=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),hr=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,v(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),lr=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}();function fr(t){t.createObjectStore(hr.store,{keyPath:hr.keyPath}).createIndex(hr.documentTargetsIndex,hr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(cr.store,{keyPath:cr.keyPath}).createIndex(cr.queryTargetsIndexName,cr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(lr.store)}var pr=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}();var dr=function(){function t(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return t.store="clientMetadata",t.keyPath="clientId",t}();var mr=[nr.store,rr.store,ir.store,sr.store,cr.store,er.store,lr.store,hr.store].concat([dr.store,pr.store]).concat([ur.store]),yr=function(){function t(t,e,n){this.userId=t,this.serializer=e,this.referenceDelegate=n,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r){return v(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _r(t).iterate({index:rr.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(r){var i=e.batchId;return v(i>r.lastAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order"),r.lastAcknowledgedBatchId=i,r.lastStreamToken=br(n),Sr(t).put(r)})},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=br(e),Sr(t).put(n)})},t.prototype.addMutationBatch=function(t,e,n){var r=this,i=wr(t),o=_r(t);return o.add({}).next(function(t){v("number"==typeof t,"Auto-generated key is not a number");var a=new In(t,e,n),s=r.serializer.toDbMutationBatch(r.userId,a);r.documentKeysByBatchId[t]=a.keys();for(var u=[],c=0,h=n;c<h.length;c++){var l=h[c],f=ir.key(r.userId,l.key.path,t);u.push(o.put(s)),u.push(i.put(f,ir.PLACEHOLDER))}return Nn.waitFor(u).next(function(){return a})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return _r(t).get(e).next(function(t){return t?(v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?Nn.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this;return this.getMutationQueueMetadata(t).next(function(r){var i=Math.max(e,r.lastAcknowledgedBatchId)+1,o=IDBKeyRange.lowerBound([n.userId,i]),a=null;return _r(t).iterate({index:rr.userMutationsIndex,range:o},function(t,e,r){e.userId===n.userId&&(v(e.batchId>=i,"Should have found mutation after "+i),a=n.serializer.fromDbMutationBatch(e)),r.done()}).next(function(){return a})})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,xn],[this.userId,Number.POSITIVE_INFINITY]);return _r(t).loadAll(rr.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=ir.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return wr(t).iterate({range:i},function(r,i,a){var s=r[0],u=r[1],c=r[2],h=Tn(u);if(s===n.userId&&e.path.isEqual(h))return _r(t).get(c).next(function(t){if(!t)throw y("Dangling document-mutation reference found: "+r+" which points to "+c);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(t))});a.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ee(K),i=[];return e.forEach(function(e){var o=ir.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=wr(t).iterate({range:a},function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Tn(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()});i.push(s)}),Nn.waitFor(i).next(function(){return n.lookupMutationBatches(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;v(!e.isDocumentQuery(),"Document queries shouldn't go down this path");var r=e.path,i=r.length+1,o=ir.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new ee(K);return wr(t).iterate({range:a},function(t,e,o){var a=t[0],u=t[1],c=t[2],h=Tn(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()}).next(function(){return n.lookupMutationBatches(t,s)})},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(_r(t).get(e).next(function(t){if(null===t)throw y("Dangling document-mutation reference found, which points to "+e);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),Nn.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return gr(t.simpleDbTransaction,this.userId,e).next(function(r){return n.removeCachedMutationKeys(e.batchId),Nn.forEach(r,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Nn.resolve();var r=IDBKeyRange.lowerBound(ir.prefixForUser(e.userId)),i=[];return wr(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=Tn(t[1]);i.push(o)}else r.done()}).next(function(){v(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.containsKey=function(t,e){return vr(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return Sr(t).get(this.userId).next(function(t){return t||new nr(e.userId,xn,"")})},t}();function vr(t,e,n){var r=ir.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return wr(t).iterate({range:o,keysOnly:!0},function(t,n,r){var o=t[0],s=t[1];t[2];o===e&&s===i&&(a=!0),r.done()}).next(function(){return a})}function gr(t,e,n){var r=t.store(rr.store),i=t.store(ir.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(t,e,n){return s++,n.delete()});o.push(u.next(function(){v(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=ir.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Nn.waitFor(o).next(function(){return c})}function br(t){return t instanceof Uint8Array?(v("YES"===Object({NODE_ENV:"production"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function _r(t){return Fr.getStore(t,rr.store)}function wr(t){return Fr.getStore(t,ir.store)}function Sr(t){return Fr.getStore(t,nr.store)}var Er=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=ct.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new ft(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){e=ct.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version);return new pt(e,n)}return y("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof lt){var e=t.proto?t.proto:this.remoteSerializer.toDocument(t),n=t.hasCommittedMutations;return new sr(null,null,e,n)}if(t instanceof ft){var r=t.key.path.toArray(),i=this.toDbTimestamp(t.version);n=t.hasCommittedMutations;return new sr(null,new or(r,i),null,n)}if(t instanceof pt){r=t.key.path.toArray(),i=this.toDbTimestamp(t.version);return new sr(new ar(r,i),null,null,!0)}return y("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new tr(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new et(t.seconds,t.nanoseconds);return Yt.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new rr(t,e.batchId,e.localWriteTime.toMillis(),r)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),r=et.fromMillis(t.localWriteTimeMs);return new In(t.batchId,r,n)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(wn(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=Ae(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new ct(Tn(i)))}return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new te(e,t.targetId,Bt.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){v(Bt.Listen===t.purpose,"Only queries with purpose "+Bt.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),t.resumeToken instanceof Uint8Array?(v("YES"===Object({NODE_ENV:"production"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new cr(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,e)},t}();function Tr(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=K(n,i);return 0===a?K(r,o):a}var Cr=function(){function t(t){this.maxElements=t,this.buffer=new ee(Tr),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Tr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),xr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ir=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),Ar=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.gcTask=null}return t.prototype.start=function(){v(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==go&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;v(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(fn.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(Mr)})},t}(),Rr=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Nn.resolve(pn.INVALID);var r=new Cr(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===Ir.COLLECTION_DISABLED?(p("LruGarbageCollector","Garbage collection skipped; disabled"),Nn.resolve(xr)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),xr):n.runGarbageCollection(t,e)})},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,r,o,a,s,u,c,h,f=this;return a=Date.now(),this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>f.params.maximumSequenceNumbersToCollect?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+f.params.maximumSequenceNumbersToCollect+" from "+e),r=f.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),f.nthSequenceNumber(t,r)}).next(function(r){return n=r,u=Date.now(),f.removeTargets(t,n,e)}).next(function(e){return o=e,c=Date.now(),f.removeOrphanedDocuments(t,n)}).next(function(t){(h=Date.now(),l()<=i.DEBUG)&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-a)+"ms\n\tDetermined least recently used "+r+" in "+(u-s)+"ms\n\tRemoved "+o+" targets in "+(c-u)+"ms\n\tRemoved "+t+" documents in "+(h-c)+"ms\nTotal Duration: "+(h-a)+"ms");return Nn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:t})})},t}(),Dr="IndexedDbPersistence",Nr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Or="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",kr="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",Pr=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return s.__extends(e,t),e}(function(){return function(){}}()),Fr=function(){function t(e,n,r,i,o,a,s){if(this.persistenceKey=e,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!t.isAvailable())throw new w(_.UNIMPLEMENTED,kr);if(this.referenceDelegate=new qr(this,a),this.dbName=e+t.MAIN_DATABASE,this.serializer=new Er(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new jn(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new zn(this.serializer,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new w(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof Pr)return On.getStore(t.simpleDbTransaction,e);throw y("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e,n,r,i,o,a){return s.__awaiter(this,void 0,void 0,function(){var u;return s.__generator(this,function(s){switch(s.label){case 0:return[4,(u=new t(e,n,r,i,o,a)).start()];case 1:return s.sent(),[2,u]}})})},t.createMultiClientIndexedDbPersistence=function(e,n,r,i,o,a,u){return s.__awaiter(this,void 0,void 0,function(){var c;return s.__generator(this,function(s){switch(s.label){case 0:return[4,(c=new t(e,n,r,i,o,a,u)).start()];case 1:return s.sent(),[2,c]}})})},t.prototype.start=function(){var t=this;return v(!this.started,"IndexedDbPersistence double-started!"),v(null!==this.window,"Expected 'window' to be defined"),On.openOrCreate(this.dbName,Yn,new Zn(this.serializer)).then(function(e){t.simpleDb=e}).then(function(){return t.startRemoteDocumentCache()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})}).then(function(){return t.simpleDb.runTransaction("readonly",[lr.store],function(e){return Bn(e).next(function(e){var n=t.multiClientParams?t.multiClientParams.sequenceNumberSyncer:void 0;t.listenSequence=new pn(e,n)})})}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},t.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction("readonly",mr,function(e){return t.remoteDocumentCache.start(e)})},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite",mr,function(e){return Lr(e).put(new dr(t.clientId,Date.now(),t.networkEnabled,t.inForeground,t.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next(function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget(function(){return t.primaryStateListener(!1)}))})}).next(function(){return t.canActAsPrimary(e)}).next(function(n){var r=t.isPrimary;return t.isPrimary=n,r!==t.isPrimary&&t.queue.enqueueAndForget(function(){return t.primaryStateListener(t.isPrimary)}),r&&!t.isPrimary?t.releasePrimaryLeaseIfHeld(e):t.isPrimary?t.acquireOrExtendPrimaryLease(e):void 0})})},t.prototype.verifyPrimaryLease=function(t){var e=this;return jr(t).get(er.key).next(function(t){return Nn.resolve(e.isLocalClient(t))})},t.prototype.removeClientMetadata=function(t){return Lr(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return s.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return s.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=t.getStore(i,dr.store);return o.loadAll().next(function(t){e=r.filterActiveClients(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return Nn.forEach(n,function(t){return o.delete(t.clientId)})}).next(function(){if((e=e.filter(function(t){return t.clientId!==r.clientId})).length>0){var t=e.map(function(t){return t.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,t);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(t){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(t.clientId))}),i.label=2;case 2:return[2]}})})},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(fn.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return jr(t).get(er.key).next(function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new w(_.FAILED_PRECONDITION,Or);return!1}}return!(!e.networkEnabled||!e.inForeground)||Lr(t).loadAll().next(function(t){return void 0===e.filterActiveClients(t,5e3).find(function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(t){return e.isPrimary!==t&&p(Dr,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(t){return s.__awaiter(this,void 0,void 0,function(){var e=this;return s.__generator(this,function(n){switch(n.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[er.store,dr.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return n.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),t?[4,On.delete(this.dbName)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly",[dr.store],function(e){return Lr(e).loadAll().next(function(e){return t.filterActiveClients(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return v(this.started,"Cannot initialize MutationQueue before persistence is started."),yr.forUser(t,this.serializer,this.referenceDelegate)},t.prototype.getQueryCache=function(){return v(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return v(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;return p(Dr,"Starting transaction:",t),this.simpleDb.runTransaction("readonly"===e?"readonly":"readwrite",mr,function(i){return"readwrite-primary"===e?r.verifyPrimaryLease(i).next(function(e){if(!e)throw d("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new w(_.FAILED_PRECONDITION,Nr);return n(new Pr(i,r.listenSequence.next()))}).next(function(t){return r.acquireOrExtendPrimaryLease(i).next(function(){return t})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Pr(i,r.listenSequence.next()))})})},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return jr(t).get(er.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new w(_.FAILED_PRECONDITION,Or)})},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new er(this.clientId,this.allowTabSynchronization,Date.now());return jr(t).put(er.key,e)},t.isAvailable=function(){return On.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=jr(t);return n.get(er.key).next(function(t){return e.isLocalClient(t)?(p(Dr,"Releasing primary lease."),n.delete(er.key)):Nn.resolve()})},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e)&&(!(t>n)||(d("Detected an update time that is in the future: "+t+" > "+n),!1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(v(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(v("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return p(Dr,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return d(Dr,"Failed to get zombied client id.",t),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){d("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function Mr(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){if(!function(t){return t.code===_.FAILED_PRECONDITION&&t.message===Nr}(t))throw t;return p(Dr,"Unexpectedly lost primary lease"),[2]})})}function jr(t){return t.store(er.store)}function Lr(t){return t.store(dr.store)}var qr=function(){function t(t,e){this.db=t,this.garbageCollector=new Rr(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return Br(t,e)},t.prototype.removeReference=function(t,e){return Br(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return Br(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?Nn.resolve(!0):function(t,e){var n=!1;return Sr(t).iterateSerial(function(r){return vr(t,r,e).next(function(t){return t&&(n=!0),Nn.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=0,o=[];return this.forEachOrphanedDocument(t,function(a,s){if(s<=e){var u=n.isPinned(t,a).next(function(e){if(!e)return r++,n.removeOrphanedDocument(t,a).next(function(t){i+=t})});o.push(u)}}).next(function(){return Nn.waitFor(o)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(t,-i)}).next(function(){return r})},t.prototype.removeOrphanedDocument=function(t,e){var n,r=0,i=this.db.getRemoteDocumentCache();return Nn.waitFor([Un(t).delete((n=e,[0,wn(n.path)])),i.removeEntry(t,e).next(function(t){r+=t})]).next(function(){return r})},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Br(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=Un(t),i=pn.INVALID;return r.iterate({index:hr.documentTargetsIndex},function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==pn.INVALID&&e(new ct(Tn(n)),i),i=s,n=a):i=pn.INVALID}).next(function(){i!==pn.INVALID&&e(new ct(Tn(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Br(t,e){return Un(t).put(function(t,e){return new hr(0,wn(t.path),e)}(e,t.currentSequenceNumber))}var Ur=function(){function t(t,e){this.remoteDocumentCache=t,this.mutationQueue=e}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.getDocumentInternal(t,e,r)})},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++){t=i[r].applyToLocalView(e,t)}return t})},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=Se();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++){e=o[i].applyToLocalView(t,e)}r=r.insert(t,e)}),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next(function(e){return n.getLocalViewOfDocuments(t,e)})},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=we();return i.forEach(function(t,e){e||(e=new ft(t,Yt.forDeletedDoc())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e){return ct.isDocumentKey(e.path)?this.getDocumentsMatchingDocumentQuery(t,e.path):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new ct(e)).next(function(t){var e=Te();return t instanceof lt&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(t){for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key;if(e.path.isImmediateParentOf(c.path)){var h=n.get(c),l=u.applyToLocalView(h,h,o.localWriteTime);n=l instanceof lt?n.insert(c,l):n.remove(c)}}}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t}(),Vr=function(){function t(){this.refsByKey=new ee(Qr.compareByKey),this.refsByTarget=new ee(Qr.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Qr(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new Qr(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=ct.EMPTY,r=new Qr(n,t),i=new Qr(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=ct.EMPTY,n=new Qr(e,t),r=new Qr(e,t+1),i=Ae();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Qr(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Qr=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return ct.comparator(t.key,e.key)||K(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return K(t.targetOrBatchId,e.targetOrBatchId)||ct.comparator(t.key,e.key)},t}(),Hr=function(){function t(t,e){this.persistence=t,this.localViewReferences=new Vr,this.queryDataByTarget={},v(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Ur(this.remoteDocuments,this.mutationQueue)}return t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.mutationQueue=e.persistence.getMutationQueue(t),e.localDocuments=new Ur(e.remoteDocuments,e.mutationQueue),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=[],o=[],a=Ae(),s=0,u=r;s<u.length;s++){var c=u[s];i.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=t;p<d.length;p++){c=d[p];o.push(c.batchId);for(var m=0,y=c.mutations;m<y.length;m++){f=y[m];a=a.add(f.key)}}return e.localDocuments.getDocuments(n,a).next(function(t){return{affectedDocuments:t,removedBatchIds:i,addedBatchIds:o}})})})},t.prototype.localWrite=function(t){var e=this;return this.persistence.runTransaction("Locally write mutations","readwrite",function(n){var r,i=et.now();return e.mutationQueue.addMutationBatch(n,i,t).next(function(t){var i=(r=t).keys();return e.localDocuments.getDocuments(n,i)}).next(function(t){return{batchId:r.batchId,changes:t}})})},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):Nn.resolve(null)})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer();return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,i)}).next(function(){return i.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return v(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},t.prototype.applyRemoteEvent=function(e){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var o=[],a=Ae();C(e.targetChanges,function(r,s){var u=n.queryDataByTarget[r];if(u){s.addedDocuments.forEach(function(t){a=a.add(t)}),s.modifiedDocuments.forEach(function(t){a=a.add(t)}),o.push(n.queryCache.removeMatchingKeys(i,s.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(i,s.addedDocuments,r)}));var c=s.resumeToken;if(c.length>0){var h=u;u=u.copy({resumeToken:c,snapshotVersion:e.snapshotVersion}),n.queryDataByTarget[r]=u,t.shouldPersistQueryData(h,u,s)&&o.push(n.queryCache.updateQueryData(i,u))}}});var s=we(),u=Ae();e.documentUpdates.forEach(function(t,e){u=u.add(t)}),o.push(r.getEntries(i,u).next(function(t){e.documentUpdates.forEach(function(u,c){var h=t.get(u);null==h||c.version.isEqual(Yt.MIN)||a.has(c.key)&&!h.hasPendingWrites||c.version.compareTo(h.version)>=0?(r.addEntry(c),s=s.insert(u,c)):p("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version),e.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))})}));var c=e.snapshotVersion;if(!c.isEqual(Yt.MIN)){var h=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(t){return v(c.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+c+" < "+t),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,c)});o.push(h)}return Nn.waitFor(o).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(i,s)})})},t.shouldPersistQueryData=function(t,e,n){return 0!==e.resumeToken.length&&(0===t.resumeToken.length||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0))},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Nn.forEach(t,function(t){return e.localViewReferences.addReferences(t.addedKeys,t.targetId),e.localViewReferences.removeReferences(t.removedKeys,t.targetId),Nn.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===t&&(t=xn),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){return i?(r=i,Nn.resolve()):e.queryCache.allocateTargetId(n).next(function(i){return r=new te(t,i,Bt.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r)})}).next(function(){return v(!e.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+t),e.queryDataByTarget[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t,e){var n=this,r=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,function(r){return n.queryCache.getQueryData(r,t).next(function(i){v(null!=i,"Tried to release nonexistent query: "+t);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],e?Nn.resolve():Nn.forEach(s,function(t){return n.persistence.referenceDelegate.removeReference(r,t)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=Nn.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(t,r)}).next(function(t){var o=t,a=e.docVersions.get(r);v(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o):v(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(t,i)})},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.queryDataByTarget)})},t.prototype.getQueryForTarget=function(t){var e=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction("Get query data","readonly",function(n){return e.queryCache.getQueryDataForTarget(n,t).next(function(t){return t?t.query:null})})},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",function(e){return t.remoteDocuments.getNewDocumentChanges(e)})},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),zr=function(){function t(t){this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.highestAcknowledgedBatchId=xn,this.lastStreamToken=b(),this.batchesByDocumentKey=new ee(Qr.compareByKey)}return t.prototype.checkEmpty=function(t){return Nn.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId;v(r>this.highestAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order");var i=this.indexOfExistingBatchId(r,"acknowledged");v(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return v(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.highestAcknowledgedBatchId=r,this.lastStreamToken=n,Nn.resolve()},t.prototype.getLastStreamToken=function(t){return Nn.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Nn.resolve()},t.prototype.addMutationBatch=function(t,e,n){v(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&v(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var i=new In(r,e,n);this.mutationQueue.push(i);for(var o=0,a=n;o<a.length;o++){var s=a[o];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Qr(s.key,r))}return Nn.resolve(i)},t.prototype.lookupMutationBatch=function(t,e){return Nn.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return v(null!=n,"Failed to find local mutation batch."),Nn.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=Math.max(e,this.highestAcknowledgedBatchId)+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Nn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},t.prototype.getAllMutationBatches=function(t){return Nn.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Qr(e,0),i=new Qr(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){v(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);v(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),Nn.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ee(K);return e.forEach(function(t){var e=new Qr(t,0),i=new Qr(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],function(e){v(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)})}),Nn.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ct.isDocumentKey(i)||(i=i.child(""));var o=new Qr(new ct(i),0),a=new ee(K);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.targetOrBatchId)),!0)},o),Nn.resolve(this.findMutationBatches(a))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;v(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Nn.forEach(e.mutations,function(i){var o=new Qr(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)}).next(function(){n.batchesByDocumentKey=r})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Qr(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Nn.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&v(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Nn.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return v(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return v(n.batchId===t,"If found batch must match"),n},t}(),Kr=function(){function t(t){this.persistence=t,this.queries=new Vn(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=Yt.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Vr,this.targetCount=0,this.targetIdGenerator=Dn.forQueryCache()}return t.prototype.getTargetCount=function(t){return Nn.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach(function(t,n){return e(n)}),Nn.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Nn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Nn.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,Nn.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),Nn.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return v(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,Nn.resolve()},t.prototype.updateQueryData=function(t,e){return v(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),Nn.resolve()},t.prototype.removeQueryData=function(t,e){return v(this.targetCount>0,"Removing a target from an empty cache"),v(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,Nn.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=e&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)}),Nn.waitFor(o).next(function(){return i})},t.prototype.getQueryCount=function(t){return Nn.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return Nn.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return y("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),Nn.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),Nn.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Nn.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Nn.resolve(n)},t.prototype.containsKey=function(t,e){return Nn.resolve(this.references.containsKey(e))},t}();var $r,Wr=function(){function t(t){this.sizer=t,this.docs=new dt(ct.comparator),this.newDocumentChanges=Ae(),this.size=0}return t.prototype.addEntries=function(t,e,n){for(var r=0,i=e;r<i.length;r++){var o=i[r],a=o.maybeDocument.key;this.docs=this.docs.insert(a,o),this.newDocumentChanges=this.newDocumentChanges.add(a)}return this.size+=n,Nn.resolve()},t.prototype.removeEntry=function(t,e){var n=this.docs.get(e);return n?(this.docs=this.docs.remove(e),this.size-=n.size,Nn.resolve(n.size)):Nn.resolve(0)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Nn.resolve(n?n.maybeDocument:null)},t.prototype.getSizedEntry=function(t,e){return Nn.resolve(this.docs.get(e))},t.prototype.getEntries=function(t,e){var n=this,r=Se();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),Nn.resolve(r)},t.prototype.getSizedEntries=function(t,e){var n=this,r=Se(),i=new dt(ct.comparator);return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null),i=i.insert(t,e?e.size:0)}),Nn.resolve({maybeDocuments:r,sizeMap:i})},t.prototype.getDocumentsMatchingQuery=function(t,e){for(var n=Te(),r=new ct(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value.maybeDocument;if(!e.path.isPrefixOf(a.path))break;s instanceof lt&&e.matches(s)&&(n=n.insert(s.key,s))}return Nn.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return Nn.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t){var e=this,n=we();return this.newDocumentChanges.forEach(function(t){var r=e.docs.get(t),i=r?r.maybeDocument:new ft(t,Yt.forDeletedDoc());n=n.insert(t,i)}),this.newDocumentChanges=Ae(),Nn.resolve(n)},t.prototype.newChangeBuffer=function(){return new Gr(this.sizer,this)},t.prototype.getSize=function(t){return Nn.resolve(this.size)},t}(),Gr=function(t){function e(e,n){var r=t.call(this)||this;return r.sizer=e,r.documentCache=n,r}return s.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=0,r=[];return this.assertChanges().forEach(function(t,i){var o=e.documentSizes.get(t);v(void 0!==o,"Attempting to change document "+t.toString()+" without having read it first");var a=e.sizer(i);n+=a-o,r.push({maybeDocument:i,size:a})}),this.documentCache.addEntries(t,r,n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(Qn),Jr=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new pn(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new Kr(this);this.remoteDocumentCache=new Wr(function(t){return n.referenceDelegate.documentSize(t)})}return t.createLruPersistence=function(e,n,r){return new t(e,function(t){return new Zr(t,new Er(n),r)})},t.createEagerPersistence=function(e){return new t(e,function(t){return new Yr(t)})},t.prototype.shutdown=function(t){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return[2,[this.clientId]]})})},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setNetworkEnabled=function(t){},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new zr(this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;p("MemoryPersistence","Starting transaction:",t);var i=new Xr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},t.prototype.mutationQueuesContainKey=function(t,e){return Nn.or((n=this.mutationQueues,r=[],x(n,function(t,e){return r.push(e)}),r).map(function(n){return function(){return n.containsKey(t,e)}}));var n,r},t}(),Xr=function(){return function(t){this.currentSequenceNumber=t}}(),Yr=function(){function t(t){this.persistence=t}return t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),Nn.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),Nn.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),Nn.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache();return Nn.forEach(this.orphanedDocuments,function(r){return e.isReferenced(t,r).next(function(e){return e?Nn.resolve():n.removeEntry(t,r).next(function(){})})})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return Nn.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return Nn.resolve(n.inMemoryPins.containsKey(e))}])},t}(),Zr=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.orphanedSequenceNumbers=new Vn(function(t){return wn(t.path)}),this.garbageCollector=new Rr(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return Nn.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return Nn.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(t,r,i).next(function(t){return t?Nn.resolve():e(i)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(t,function(o){return n.isPinned(t,o,e).next(function(e){return e?Nn.resolve():(r++,i.removeEntry(t,o).next())})}).next(function(){return r})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Nn.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Nn.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Nn.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Nn.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw y("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return Nn.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return Nn.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return Nn.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),ti=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}();!function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff"}($r||($r={}));var ei,ni,ri=1e3,ii=6e4,oi=1.5,ai=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=$r.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new ti(t,e,ri,oi,ii)}return t.prototype.isStarted=function(){return this.state===$r.Starting||this.state===$r.Open||this.state===$r.Backoff},t.prototype.isOpen=function(){return this.state===$r.Open},t.prototype.start=function(){this.state!==$r.Error?(v(this.state===$r.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close($r.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){v(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=$r.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.isOpen()?[2,this.close($r.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(n){switch(n.label){case 0:return v(this.isStarted(),"Only started streams should be closed."),v(t===$r.Error||Lt(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==$r.Error?this.backoff.reset():e&&e.code===_.RESOURCE_EXHAUSTED?(d(e.toString()),d("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===_.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;v(this.state===$r.Initial,"Must be in initial state to auth"),this.state=$r.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new w(_.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)})})},t.prototype.startStream=function(t){var e=this;v(this.state===$r.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return v(e.state===$r.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=$r.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;v(this.state===$r.Error,"Should only perform backoff when in Error state"),this.state=$r.Backoff,this.backoff.backoffAndRun(function(){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(t){return v(this.state===$r.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=$r.Initial,this.start(),v(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return v(this.isStarted(),"Can't handle server close on non-started stream"),p("PersistentStream","close with error: "+t),this.stream=null,this.close($r.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),si=function(t){function e(e,n,r,i,o){var a=t.call(this,e,fn.ListenStreamConnectionBackoff,fn.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return s.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(ai),ui=function(t){function e(e,n,r,i,o){var a=t.call(this,e,fn.WriteStreamConnectionBackoff,fn.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a}return s.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(v(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return v(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){v(this.isOpen(),"Writing handshake requires an opened stream"),v(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;v(this.isOpen(),"Writing mutations requires an opened stream"),v(this.handshakeComplete_,"Handshake must be complete before writing mutations"),v(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(ai),ci=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new ui(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new si(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=we();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);v(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t}(),hi=function(){function t(t){this.datastore=t,this.readVersions=xe(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e;if(t instanceof lt)e=t.version;else{if(!(t instanceof ft))throw y("Document in a transaction was a "+t.constructor.name);e=Yt.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new w(_.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){t instanceof ft||t instanceof lt?e.recordVersion(t):y("Document in a transaction was a "+t.constructor.name)}),t})},t.prototype.write=function(t){if(this.committed)throw new w(_.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?ae.updateTime(e):ae.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(Yt.forDeletedDoc()))throw new w(_.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?ae.updateTime(e):ae.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new le(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,Yt.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline"}(ei||(ei={})),function(t){t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState"}(ni||(ni={}));var li=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=ei.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(ei.Unknown),v(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(fn.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,v(t.state===ei.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(ei.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===ei.Online?(this.setAndBroadcast(ei.Unknown),v(0===this.watchStreamFailures,"watchStreamFailures must be 0"),v(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(ei.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===ei.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(d(e),this.shouldWarnClientIsOffline=!1):p("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),fi=function(){function t(t,e,n,r){this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new li(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(ei.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(ei.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(p("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return p("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(ei.Unknown),[2]}})})},t.prototype.listen=function(t){v(!E(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){v(E(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),I(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(ei.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){v(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Qe(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!I(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){var t=this;return s.__generator(this,function(e){return C(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return void 0===t&&v(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(ei.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(ei.Online),t instanceof Ue&&t.state===Pe.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof qe?this.watchChangeAggregator.handleDocumentChange(t):t instanceof Be?this.watchChangeAggregator.handleExistenceFilter(t):(v(t instanceof Ue,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(Yt.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;v(!t.isEqual(Yt.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return C(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:t}))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.copy({resumeToken:b()}),e.sendUnwatchRequest(t);var r=new te(n.query,t,Bt.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;v(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){return E(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.fillWritePipeline=function(){return s.__awaiter(this,void 0,void 0,function(){var t,e;return s.__generator(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(t=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:xn,[4,this.localStore.nextMutationBatch(t)]):[3,4];case 1:return null!==(e=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){v(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){v(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++){var r=n[e];t.writeStream.writeMutations(r.mutations)}}).catch(Mr)},t.prototype.onMutationResult=function(t,e){var n=this;v(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=An.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return s.__awaiter(this,void 0,void 0,function(){var e=this;return s.__generator(this,function(n){return void 0===t&&v(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]):[2]})})},t.prototype.handleHandshakeError=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return ge(t.code)||t.code===_.ABORTED?(p("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=b(),[2,this.localStore.setLastStreamToken(b()).catch(Mr)]):[2]})})},t.prototype.handleWriteError=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){return ge(t.code)?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2]})})},t.prototype.createTransaction=function(){return new hi(this.datastore)},t.prototype.handleCredentialChange=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(p("RemoteStore","RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return t.sent(),this.onlineStateTracker.set(ei.Unknown),[4,this.enableNetwork()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.applyPrimaryState=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(ei.Unknown),e.label=4;case 4:return[2]}})})},t}(),pi=function(){return function(){this.listeners=[]}}(),di=function(){function t(t){this.syncEngine=t,this.queries=new Vn(function(t){return t.canonicalId()}),this.onlineState=ei.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new pi,this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return s.__generator(this,function(o){return e=t.query,n=!1,(r=this.queries.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=r.query,o=this.queries.get(i);if(o){for(var a=0,s=o.listeners;a<s.length;a++){s[a].onViewSnapshot(r)}o.viewSnap=r}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++){i[r].onError(e)}this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++){i[r].applyOnlineStateChange(t)}})},t}(),mi=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=ei.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(v(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Ne.Metadata&&e.push(i)}t=new Me(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){if(v(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==ei.Offline;return this.options.waitForSyncWhenOnline&&n?(v(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===ei.Offline},t.prototype.shouldRaiseEvent=function(t){if(t.docChanges.length>0)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){v(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Me.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),yi=function(){function t(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e,n){for(var r=Ae(),i=Ae(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Ne.Added:r=r.add(s.doc.key);break;case Ne.Removed:i=i.add(s.doc.key)}}return new t(e,r,i)},t}(),vi=function(){return function(t){this.key=t}}(),gi=function(){return function(t){this.key=t}}(),bi=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Ae(),this.mutatedKeys=Ae(),this.documentSet=new ke(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new Fe,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var c=i.get(t),h=e instanceof lt?e:null;h&&(v(t.isEqual(h.key),"Mismatching keys found in document changes: "+t+" != "+h.key),h=n.query.matches(h)?h:null);var l=!!c&&n.mutatedKeys.has(c.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data.isEqual(h.data)?l!==f&&(r.track({type:Ne.Metadata,doc:h}),p=!0):n.shouldWaitForSyncedDocument(c,h)||(r.track({type:Ne.Modified,doc:h}),p=!0,u&&n.query.docComparator(h,u)>0&&(s=!0)):!c&&h?(r.track({type:Ne.Added,doc:h}),p=!0):c&&!h&&(r.track({type:Ne.Removed,doc:c}),p=!0,u&&(s=!0));p&&(h?(a=a.add(h),o=f?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),o=o.delete(c.key),r.track({type:Ne.Removed,doc:c})}return v(!s||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;v(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case Ne.Added:return 1;case Ne.Modified:case Ne.Metadata:return 2;case Ne.Removed:return 0;default:return y("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var a=e?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Oe.Synced:Oe.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Me(this.query,t.documentSet,i,o,t.mutatedKeys,s===Oe.Local,u,!1),limboChanges:a}:{limboChanges:a}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===ei.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Fe,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&(!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations)},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return v(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Ae(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new gi(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new vi(t))}),n},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=Ae();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return Me.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Oe.Local)},t}();var _i=function(){return function(t,e,n){this.query=t,this.targetId=e,this.view=n}}(),wi=function(){return function(t){this.key=t}}(),Si=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Vn(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new dt(ct.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Vr,this.mutationUserCallbacks={},this.limboTargetIdGenerator=Dn.forSyncEngine(),this.isPrimary=void 0,this.onlineState=ei.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){v(null!==t,"SyncEngine listener cannot be null"),v(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return s.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(e=r.targetId,this.sharedClientState.addLocalQueryTarget(e),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(t,e){var n=this,r=t.query;return this.localStore.executeQuery(r).then(function(i){return n.localStore.remoteDocumentKeys(t.targetId).then(function(o){var a=new bi(r,o),s=a.computeDocChanges(i),u=Le.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&n.onlineState!==ei.Offline),c=a.applyChanges(s,!0===n.isPrimary,u);v(0===c.limboChanges.length,"View returned limbo docs before target ack from the server."),v(!!c.snapshot,"applyChanges for new view should always return a snapshot");var h=new _i(r,t.targetId,a);return n.queryViewsByQuery.set(r,h),n.queryViewsByTarget[t.targetId]=h,c.snapshot})})},t.prototype.synchronizeViewAndComputeSnapshot=function(t){var e=this;return this.localStore.executeQuery(t.query).then(function(n){return e.localStore.remoteDocumentKeys(t.targetId).then(function(r){return s.__awaiter(e,void 0,void 0,function(){var e;return s.__generator(this,function(i){return e=t.view.synchronizeWithPersistedState(n,r),this.isPrimary&&this.updateTrackedLimbos(t.targetId,e.limboChanges),[2,e]})})})})},t.prototype.unlisten=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),v(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(t,!1).then(function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)}).catch(Mr)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.sharedClientState.addPendingMutation(t.batchId),n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),v(e>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var e=t(r);return!Lt(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(t){return Promise.reject(n.wrapUpdateFunctionError(t))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===e?Promise.reject(r):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(t).then(function(n){return x(t.targetChanges,function(t,n){var r=e.limboResolutionsByTarget[t];r&&(v(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),n.addedDocuments.size>0?r.receivedDocument=!0:n.modifiedDocuments.size>0?v(r.receivedDocument,"Received change for limbo target document without add."):n.removedDocuments.size>0&&(v(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),e.emitNewSnapsAndNotifyLocalStore(n,t)}).catch(Mr)},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===ni.RemoteStore||!this.isPrimary&&e===ni.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(e,r){var i=r.view.applyOnlineStateChange(t);v(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,c=this;return s.__generator(this,function(s){switch(s.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),n=this.limboResolutionsByTarget[t],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new dt(ct.comparator)).insert(r,new ft(r,Yt.forDeletedDoc())),o=Ae().add(r),a=new je(Yt.MIN,{},new ee(K),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return v(!!(u=this.queryViewsByTarget[t]),"Unknown targetId: "+t),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return c.removeAndCleanupQuery(u)}).catch(Mr)];case 2:s.sent(),this.syncEngineListener.onWatchError(u.query,e),s.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(t,e,n){return s.__awaiter(this,void 0,void 0,function(){var r;return s.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(p("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):y("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){var e=this;this.assertSubscribed("applySuccessfulWrite()");var n=t.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.sharedClientState.updateMutationState(n,"acknowledged"),e.emitNewSnapsAndNotifyLocalStore(t)}).catch(Mr)},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(r){return n.sharedClientState.updateMutationState(t,"rejected",e),n.emitNewSnapsAndNotifyLocalStore(r)}).catch(Mr)},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new dt(K)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(v(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i instanceof vi)this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i);else if(i instanceof gi){p("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)}else y("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){p("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=Ut.atPath(e.path);this.limboResolutionsByTarget[n]=new wi(e),this.remoteStore.listen(new te(r,n,Bt.LimboResolution,pn.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return s.__generator(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var e=s.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(s.query).then(function(t){return s.view.computeDocChanges(t,e)}):e}).then(function(t){var i=e&&e.targetChanges[s.targetId],a=s.view.applyChanges(t,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=yi.fromSnapshot(s.targetId,a.snapshot);r.push(u)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},t.prototype.assertSubscribed=function(t){v(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n;return s.__generator(this,function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?[4,this.localStore.handleUserChange(t)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},t.prototype.applyPrimaryState=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,u,c=this;return s.__generator(this,function(s){switch(s.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return s.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=s.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],u=Promise.resolve(),C(this.queryViewsByTarget,function(t,e){c.sharedClientState.isLocalQueryTarget(t)?a.push(t):u=u.then(function(){return c.unlisten(e.query)}),c.remoteStore.unlisten(e.targetId)}),[4,u]);case 4:return s.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return s.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:s.sent(),s.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var t=this;C(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new dt(ct.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){for(var e=this,n=Promise.resolve(),r=[],i=[],o=function(t){n=n.then(function(){return s.__awaiter(e,void 0,void 0,function(){var e,n,o,a;return s.__generator(this,function(s){switch(s.label){case 0:return(n=this.queryViewsByTarget[t])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return s.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return e=s.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(o=s.sent()).snapshot&&i.push(o.snapshot),[3,8];case 4:return v(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(t)];case 5:return v(!!(a=s.sent()),"Query data for target "+t+" not found"),[4,this.localStore.allocateQuery(a)];case 6:return e=s.sent(),[4,this.initializeViewAndComputeSnapshot(e,!1)];case 7:s.sent(),s.label=8;case 8:return r.push(e),[2]}})})})},a=0,u=t;a<u.length;a++){o(u[a])}return n.then(function(){return e.syncEngineListener.onWatchChange(i),r})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return s.__awaiter(this,void 0,void 0,function(){var r,i=this;return s.__generator(this,function(o){switch(o.label){case 0:if(this.isPrimary)return p("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,5];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return s.__awaiter(i,void 0,void 0,function(){var r;return s.__generator(this,function(i){switch(i.label){case 0:return r=je.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(n,r)];case 1:return i.sent(),[2]}})})},function(t){return s.__awaiter(i,void 0,void 0,function(){var e;return s.__generator(this,function(n){switch(n.label){case 0:return function(t){return t.code===_.DATA_LOSS&&t.message===Hn}(t)?(e=[],C(this.queryViewsByTarget,function(t){return e.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e)]):[3,2];case 1:return n.sent(),[3,3];case 2:throw t;case 3:return[2]}})})})];case 2:return r=this.queryViewsByTarget[t],this.removeAndCleanupQuery(r),[4,this.localStore.releaseQuery(r.query,!0)];case 3:return o.sent(),this.syncEngineListener.onWatchError(r.query,n),[3,5];case 4:y("Unexpected target state: "+e),o.label=5;case 5:return[2]}})})},t.prototype.applyActiveTargetsChange=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,c,h,l,f=this;return s.__generator(this,function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,p.label=1;case 1:return n<r.length?(l=r[n],v(!this.queryViewsByTarget[l],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(l)]):[3,6];case 2:return v(!!(i=p.sent()),"Query data for active target "+l+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=p.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:p.sent(),this.remoteStore.listen(o),p.label=5;case 5:return n++,[3,1];case 6:a=function(t){var e;return s.__generator(this,function(n){switch(n.label){case 0:return(e=u.queryViewsByTarget[t])?[4,u.localStore.releaseQuery(e.query,!1).then(function(){f.remoteStore.unlisten(t),f.removeAndCleanupQuery(e)}).catch(Mr)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,c=0,h=e,p.label=7;case 7:return c<h.length?(l=h[c],[5,a(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return c++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?Ae().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:Ae()},t}(),Ei=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Ti="SharedClientState",Ci="firestore_clients",xi="firestore_mutations",Ii="firestore_targets",Ai="firestore_online_state",Ri="firestore_sequence_number",Di=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,v(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new w(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(d(Ti,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ni=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,v(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new w(r.error.code,r.error.message)),i?new t(e,r.state,o):(d(Ti,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Oi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=De(),a=0;i&&a<r.activeTargetIds.length;++a)i=qt(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(d(Ti,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ki=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&void 0!==ei[n.onlineState]&&"string"==typeof n.clientId?new t(n.clientId,ei[n.onlineState]):(d(Ti,"Failed to parse online state: "+e),null)},t}(),Pi=function(){function t(){this.activeTargetIds=De()}return t.prototype.addQueryTarget=function(t){v(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Fi=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new w(_.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Ri+"_"+r,this.activeClients[this.localClientId]=new Pi,this.clientStateKeyRe=new RegExp("^"+Ci+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+xi+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Ii+"_"+a+"_(\\d+)$"),this.onlineStateKey=Ai+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return s.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i,o,a,u,c,h,l,f=this;return s.__generator(this,function(s){switch(s.label){case 0:return v(!this.started,"WebStorageSharedClientState already started"),v(null!==this.syncEngine,"syncEngine property must be set before calling start()"),v(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=s.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Oi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(u),c=0,h=this.earlyEvents;c<h.length;c++)l=h[c],this.handleWebStorageEvent(l);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=De();return x(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=Ni.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return p(Ti,"READ",t,e),e},t.prototype.setItem=function(t,e){p(Ti,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){p(Ti,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(p(Ti,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return s.__awaiter(e,void 0,void 0,function(){var e,n,r,i,o,a;return s.__generator(this,function(s){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(v(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(t){var e=pn.INVALID;if(null!=t)try{var n=JSON.parse(t);v("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){d(Ti,"Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==pn.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new Di(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:ei[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new Ni(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return v(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Ci+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return Ii+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=xi+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return v(null!==n,"Cannot parse client state key '"+t+"'"),Oi.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);v(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Di.fromWebStorageEntry(new Ei(i),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);v(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Ni.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return ki.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(p(Ti,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(t){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){return i.has(t)||a.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}();var Mi=function(){function t(){this.localState=new Pi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new Pi,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),ji=function(){function t(t,e){this.cacheSizeBytes=t,this.experimentalTabSynchronization=e}return t.prototype.lruParams=function(){return Ir.withCacheSize(this.cacheSizeBytes)},t}(),Li=function(){return function(){}}(),qi=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=z.newId()}return t.prototype.start=function(t){var e=this,n=new dn,r=new dn,i=!1;return this.credentials.setChangeListener(function(o){i?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(i=!0,e.initializePersistence(t,r,o).then(function(t){return e.initializeRest(o,t)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof ji?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof w?t.code===_.FAILED_PRECONDITION||t.code===_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||(22===t.code||20===t.code)},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=Fr.buildStoragePrefix(this.databaseInfo),i=new Ze(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return s.__awaiter(n,void 0,void 0,function(){var n,o;return s.__generator(this,function(a){switch(a.label){case 0:if(e.experimentalTabSynchronization&&!Fi.isAvailable(this.platform))throw new w(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=e.lruParams(),e.experimentalTabSynchronization?(this.sharedClientState=new Fi(this.asyncQueue,this.platform,r,this.clientId,t),[4,Fr.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new Mi,[4,Fr.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=a.sent(),a.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=Jr.createEagerPersistence(this.clientId),this.sharedClientState=new Mi,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return p("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return s.__awaiter(n,void 0,void 0,function(){var n,i,o,a,u=this;return s.__generator(this,function(c){switch(c.label){case 0:return this.localStore=new Hr(this.persistence,t),e&&(this.lruScheduler=new Ar(e,this.asyncQueue,this.localStore)),n=this.platform.newSerializer(this.databaseInfo.databaseId),i=new ci(this.asyncQueue,r,this.credentials,n),o=function(t){return u.syncEngine.applyOnlineStateChange(t,ni.RemoteStore)},a=function(t){return u.syncEngine.applyOnlineStateChange(t,ni.SharedClientState)},this.remoteStore=new fi(this.localStore,i,this.asyncQueue,o),this.syncEngine=new Si(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=a,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new di(this.syncEngine),[4,this.sharedClientState.start()];case 1:return c.sent(),[4,this.remoteStore.start()];case 2:return c.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return s.__awaiter(u,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}})})})];case 3:return c.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),p("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.shutdown=function(t){var e=this;return this.asyncQueue.enqueue(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown(t&&t.purgePersistenceWithDataLoss)];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},t.prototype.listen=function(t,e,n){var r=this,i=new mi(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof lt)return t;if(t instanceof ft)return null;throw new w(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(t)}).then(function(e){var n=Ae(),r=new bi(t,n),i=r.computeDocChanges(e);return r.applyChanges(i,!1).snapshot})},t.prototype.write=function(t){var e=this,n=new dn;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.asyncQueue.enqueue(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),Bi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Ui=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+H(r,"element")+".")}("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(N("FieldPath","string",n,t[n]),0===t[n].length)throw new w(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw V("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(ut.keyField().canonicalString()),t}(),Vi=new RegExp("[~\\*/\\[\\]]");var Qi=function(){return function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}}(),Hi=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(Ei.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){v(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),zi=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;v(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new w(_.ABORTED,"getToken aborted due to token change.");return n?(v("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Qi(n.accessToken,t.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){v(null!=this.tokenListener,"removeChangeListener() called twice"),v(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return v(null===t||"string"==typeof t,"Received invalid UID: "+t),new Ei(t)},t}(),Ki=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=Ei.FIRST_PARTY,v(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),t}(),$i=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,v(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return t.prototype.getToken=function(){return Promise.resolve(new Ki(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(Ei.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Wi(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=e;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t,["next","error","complete"])}var Gi,Ji=function(){function t(t){this._methodName=t}return t.delete=function(){return Xi.instance},t.serverTimestamp=function(){return Yi.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return R("FieldValue.arrayUnion",arguments,1),new Zi(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return R("FieldValue.arrayRemove",arguments,1),new to(t)},t.prototype.isEqual=function(t){return this===t},t}(),Xi=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return s.__extends(e,t),e.instance=new e,e}(Ji),Yi=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return s.__extends(e,t),e.instance=new e,e}(Ji),Zi=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return s.__extends(e,t),e}(Ji),to=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return s.__extends(e,t),e}(Ji),eo=S(Ji,"Use FieldValue.<field>() instead."),no=/^__.*__$/,ro=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new ce(t,this.data,this.fieldMask,e)):n.push(new ue(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new he(t,this.fieldTransforms)),n},t}(),io=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new ce(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new he(t,this.fieldTransforms)),n},t}();function oo(t){switch(t){case Gi.Set:case Gi.MergeSet:case Gi.Update:return!0;case Gi.Argument:return!1;default:throw y("Unexpected case for UserDataSource: "+t)}}!function(t){t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument"}(Gi||(Gi={}));var ao=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new w(_.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(oo(this.dataSource)&&no.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),so=function(){return function(t,e){this.databaseId=t,this.key=e}}(),uo=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new ao(Gi.Set,t,ut.EMPTY_PATH);ho("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new ro(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new ao(Gi.MergeSet,t,ut.EMPTY_PATH);ho("Data must be an object, but it was:",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=[],u=0,c=n;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof Ui)l=h._internalPath;else{if("string"!=typeof h)throw y("Expected stringOrFieldPath to be a string or a FieldPath");l=fo(t,h)}if(!r.contains(l))throw new w(_.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");s.push(l)}i=re.fromArray(s),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=re.fromArray(r.fieldMask),o=r.fieldTransforms;return new ro(a,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new ao(Gi.Update,t,ut.EMPTY_PATH);ho("Data must be an object, but it was:",r,e);var i=[],o=Ot.EMPTY;x(e,function(e,a){var s=fo(t,e),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof Xi)i.push(s);else{var c=n.parseData(a,u);null!=c&&(i.push(s),o=o.set(s,c))}});var a=re.fromArray(i);return new io(o,a,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new ao(Gi.Update,t,ut.EMPTY_PATH),o=[lo(t,e)],a=[n];if(r.length%2!=0)throw new w(_.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(lo(t,r[s])),a.push(r[s+1]);var u=[],c=Ot.EMPTY;for(s=0;s<o.length;++s){var h=o[s],l=i.childContextForFieldPath(h),f=this.runPreConverter(a[s],l);if(f instanceof Xi)u.push(h);else{var p=this.parseData(f,l);null!=p&&(u.push(h),c=c.set(h,p))}}var d=re.fromArray(u);return new io(c,d,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new ao(Gi.Argument,t,ut.EMPTY_PATH),r=this.parseData(e,n);return v(null!=r,"Parsed data should not be null."),v(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=po(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(co(t=this.runPreConverter(t,e)))return ho("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof Ji)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new dt(K);return I(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):x(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new Ot(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=o[i],s=this.parseData(a,e.childContextForArray(r));null==s&&(s=_t.INSTANCE),n.push(s),r++}return new kt(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!oo(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof Xi){if(e.dataSource!==Gi.MergeSet)throw e.dataSource===Gi.Update?(v(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof Yi)e.fieldTransforms.push(new ie(e.path,fe.instance));else if(t instanceof Zi){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new pe(n);e.fieldTransforms.push(new ie(e.path,r))}else if(t instanceof to){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new de(n);e.fieldTransforms.push(new ie(e.path,i))}else y("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return _t.INSTANCE;if("number"==typeof t)return qt(t)?new Tt(t):new Ct(t);if("boolean"==typeof t)return wt.of(t);if("string"==typeof t)return new xt(t);if(t instanceof Date)return new It(et.fromDate(t));if(t instanceof et)return new It(new et(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof tt)return new Nt(t);if(t instanceof Y)return new Rt(t);if(t instanceof so)return new Dt(t.databaseId,t.key);throw e.createError("Unsupported field value: "+q(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new ao(Gi.Argument,t,ut.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},t}();function co(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof et||t instanceof tt||t instanceof Y||t instanceof so||t instanceof Ji)}function ho(t,e,n){if(!co(n)||!L(n)){var r=q(n);throw"an object"===r?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function lo(t,e){if(e instanceof Ui)return e._internalPath;if("string"==typeof e)return fo(t,e);throw new w(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function fo(t,e){try{return function(t){if(t.search(Vi)>=0)throw new w(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ui.bind.apply(Ui,[void 0].concat(t.split("."))))}catch(e){throw new w(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(e){var n=po(e);throw new w(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function po(t){return t instanceof Error?t.message:t.toString()}var mo="firestore.googleapis.com",yo=!0,vo=!1,go=Ir.COLLECTION_DISABLED,bo=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new w(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mo,this.ssl=yo}else k("settings","non-empty string","host",t.host),this.host=t.host,P("settings","boolean","ssl",t.ssl),this.ssl=T(t.ssl,yo);if(U("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes"]),P("settings","object","credentials",t.credentials),this.credentials=t.credentials,P("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),this.timestampsInSnapshots=T(t.timestampsInSnapshots,vo),P("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Ir.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==go&&t.cacheSizeBytes<Ir.MINIMUM_CACHE_SIZE_BYTES)throw new w(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Ir.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes},t}(),_o=function(){return function(){}}(),wo=function(){function t(e){var n=this;this._queue=new yn,this.INTERNAL={delete:function(t){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){return this._firestoreClient?[2,this._firestoreClient.shutdown(t)]:[2]})})}};var r=new _o;if("object"==typeof e.options){var i=e;r.firebaseApp=i,r.databaseId=t.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new zi(i)}else{var o=e;if(!o.projectId)throw new w(_.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new it(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new Hi}r.settings=new bo({}),this._config=r,this._databaseId=r.databaseId}return t.prototype.settings=function(t){if(A("Firestore.settings",arguments,1),N("Firestore.settings","object",1,t),E(t,"persistence"))throw new w(_.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new bo(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new w(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=function(t){if(!t)return new Hi;switch(t.type){case"gapi":return new $i(t.client,t.sessionIndex||"0");case"provider":return t.client;default:throw new w(_.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new w(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new ji(this._config.settings.cacheSizeBytes,void 0!==t&&T(t.experimentalTabSynchronization,!1)))},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Li),this._firestoreClient},t.prototype.configureClient=function(t){var e=this;v(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),this._config.settings.timestampsInSnapshots||d("\nThe behavior for Date objects stored in Firestore is going to change\nAND YOUR APP MAY BREAK.\nTo hide this warning and ensure your app does not break, you need to add the\nfollowing code to your app before calling any other Cloud Firestore methods:\n\n  const firestore = firebase.firestore();\n  const settings = {/* your settings... */ timestampsInSnapshots: true};\n  firestore.settings(settings);\n\nWith this change, timestamps stored in Cloud Firestore will be read back as\nFirebase Timestamp objects instead of as system Date objects. So you will also\nneed to update code expecting a Date to instead expect a Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at');\n  const date = timestamp.toDate();\n\nPlease audit all existing usages of Date when you enable the new behavior. In a\nfuture release, the behavior will change to the new behavior, so if you do not\nfollow these steps, YOUR APP MAY BREAK."),v(!this._firestoreClient,"configureClient() called multiple times");var n=new nt(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new uo(function(t){if(t instanceof To){var n=e._config.databaseId,r=t.firestore._config.databaseId;if(!r.isEqual(n))throw new w(_.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new so(e._config.databaseId,t._key)}return t}),this._firestoreClient=new qi(g.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!E(e,"projectId"))throw new w(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new w(_.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new it(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new w(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(A("Firestore.collection",arguments,1),N("Firestore.collection","non-empty string",1,t),!t)throw new w(_.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new Do(at.fromString(t),this)},t.prototype.doc=function(t){if(A("Firestore.doc",arguments,1),N("Firestore.doc","non-empty string",1,t),!t)throw new w(_.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),To.forPath(at.fromString(t),this)},t.prototype.runTransaction=function(t){var e=this;return A("Firestore.runTransaction",arguments,1),N("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new So(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new Eo(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(l()){case i.DEBUG:return"debug";case i.ERROR:return"error";case i.SILENT:return"silent";default:return y("Unknown log level: "+l())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(A("Firestore.setLogLevel",arguments,1),N("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":f(i.DEBUG);break;case"error":f(i.ERROR);break;case"silent":f(i.SILENT);break;default:throw new w(_.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},t}(),So=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;A("Transaction.get",arguments,1);var n=Po("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return y("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof ft)return new xo(e._firestore,n._key,null,!1,!1);if(r instanceof lt)return new xo(e._firestore,n._key,r,!1,!1);throw y("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},t.prototype.set=function(t,e,n){D("Transaction.set",arguments,2,3);var r=Po("Transaction.set",t,this._firestore),i=(n=No("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof Ui?(R("Transaction.update",arguments,3),r=Po("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(A("Transaction.update",arguments,2),r=Po("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){A("Transaction.delete",arguments,1);var e=Po("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),Eo=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){D("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Po("WriteBatch.set",t,this._firestore),i=(n=No("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,ae.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof e||e instanceof Ui?(R("WriteBatch.update",arguments,3),r=Po("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(A("WriteBatch.update",arguments,2),r=Po("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,ae.exists(!0))),this},t.prototype.delete=function(t){A("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Po("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new le(e._key,ae.NONE)),this},t.prototype.commit=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new w(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),To=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new w(_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new ct(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Do(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(A("DocumentReference.collection",arguments,1),N("DocumentReference.collection","non-empty string",1,t),!t)throw new w(_.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=at.fromString(t);return new Do(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw V("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){D("DocumentReference.set",arguments,1,2);var n=(e=No("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,ae.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Ui?(R("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(A("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,ae.exists(!0)))},t.prototype.delete=function(){return A("DocumentReference.delete",arguments,0),this._firestoreClient.write([new le(this._key,ae.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];D("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Wi(t[i])||(U("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),P("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Wi(t[i])?n=t[i]:(N("DocumentReference.onSnapshot","function",i,t[i]),O("DocumentReference.onSnapshot","function",i+1,t[i+1]),O("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Bi({next:function(t){if(e.next){v(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new xo(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Ut.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return D("DocumentReference.get",arguments,0,1),ko("DocumentReference.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new xo(e.firestore,e._key,t,!0,t instanceof lt&&t.hasLocalMutations))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new w(_.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new w(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t}(),Co=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),xo=function(){function t(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return t.prototype.data=function(t){return D("DocumentSnapshot.data",arguments,0,1),t=Oo("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,gt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(D("DocumentSnapshot.get",arguments,1,2),e=Oo("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(lo("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,gt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new To(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Co(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw V("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof Ot)return this.convertObject(t,e);if(t instanceof kt)return this.convertArray(t,e);if(t instanceof Dt){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||d("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new To(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),Io=function(t){function e(e,n,r,i,o){return t.call(this,e,n,r,i,o)||this}return s.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return v("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(xo),Ao=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){var i;A("Query.where",arguments,3),N("Query.where","non-empty string",2,n),B("Query.where",3,r);var o=lo("Query.where",e),a=Qt.fromString(n);if(o.isKeyField()){if(a===Qt.ARRAY_CONTAINS)throw new w(_.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof r){if(-1!==r.indexOf("/"))throw new w(_.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===r)throw new w(_.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var s=this._query.path.child(new at([r]));v(s.length%2==0,"Path should be a document key"),i=new Dt(this.firestore._databaseId,new ct(s))}else{if(!(r instanceof To))throw new w(_.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+q(r)+".");var u=r;i=new Dt(this.firestore._databaseId,u._key)}}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var c=Vt.create(o,a,i);return this.validateNewFilter(c),new t(this._query.addFilter(c),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(D("Query.orderBy",arguments,1,2),O("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=$t.ASCENDING;else{if("desc"!==n)throw new w(_.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=$t.DESCENDING}if(null!==this._query.startAt)throw new w(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new w(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=lo("Query.orderBy",e),o=new Gt(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(A("Query.limit",arguments,1),N("Query.limit","number",1,e),e<=0)throw new w(_.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw V("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(B(t,1,e),e instanceof xo){if(n.length>0)throw new w(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new w(_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Dt(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(void 0===s){var u=a.field.canonicalString();throw new w(_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Wt(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new w(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new w(_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(-1!==a.indexOf("/"))throw new w(_.INVALID_ARGUMENT,"Invalid query. Document ID '"+a+"' contains a slash in "+t+"()");var s=new ct(this._query.path.child(a));i.push(new Dt(this.firestore._databaseId,s))}else{var u=this.firestore._dataConverter.parseQueryValue(t,a);i.push(u)}}return new Wt(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];D("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Wi(t[i])||(U("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),P("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Wi(t[i])?n=t[i]:(N("Query.onSnapshot","function",i,t[i]),O("Query.onSnapshot","function",i+1,t[i+1]),O("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Bi({next:function(t){e.next&&e.next(new Ro(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},t.prototype.get=function(t){var e=this;return D("Query.get",arguments,0,1),ko("Query.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new Ro(e.firestore,e._query,t))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new w(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.validateNewFilter=function(t){if(t instanceof Ht)if(t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new w(_.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}else if(t.op===Qt.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new w(_.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new w(_.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Ro=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Co(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;D("QuerySnapshot.forEach",arguments,1,2),N("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new Ao(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(U("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),P("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new w(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(e){var o=new Io(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return v(e.type===Ne.Added,"Invalid event type for first snapshot"),v(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Ne.Metadata}).map(function(e){var r=new Io(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),i=-1,a=-1;return e.type!==Ne.Added&&(v((i=o.indexOf(e.doc.key))>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==Ne.Removed&&(o=o.add(e.doc),a=o.indexOf(e.doc.key)),{type:function(t){switch(t){case Ne.Added:return"added";case Ne.Modified:case Ne.Metadata:return"modified";case Ne.Removed:return"removed";default:return y("Unknown change type: "+t)}}(e.type),doc:r,oldIndex:i,newIndex:a}})}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw V("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new Io(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(Ro.prototype.docChanges,t,{get:function(){return function(){throw new w(_.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}});var Do=function(t){function e(e,n){var r=t.call(this,Ut.atPath(e),n)||this;if(e.length%2!=1)throw new w(_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return s.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new To(new ct(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(D("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=z.newId()),N("CollectionReference.doc","non-empty string",1,t),""===t)throw new w(_.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=at.fromString(t);return To.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){A("CollectionReference.add",arguments,1),N("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(Ao);function No(t,e){if(void 0===e)return{merge:!1};if(U(t,e,["merge","mergeFields"]),P(t,"boolean","merge",e.merge),F(t,"mergeFields","a string or a FieldPath",e.mergeFields,function(t){return"string"==typeof t||t instanceof Ui}),void 0!==e.mergeFields&&void 0!==e.merge)throw new w(_.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Oo(t,e){return void 0===e?{}:(U(t,e,["serverTimestamps"]),M(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function ko(t,e){O(t,"object",1,e),e&&(U(t,e,["source"]),M(t,0,"source",e.source,["default","server","cache"]))}function Po(t,e,n){if(e instanceof To){if(e.firestore!==n)throw new w(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw V(t,"DocumentReference",1,e)}var Fo=S(wo,"Use firebase.firestore() instead."),Mo=S(So,"Use firebase.firestore().runTransaction() instead."),jo=S(Eo,"Use firebase.firestore().batch() instead."),Lo=S(To,"Use firebase.firestore().doc() instead."),qo=S(xo),Bo=S(Io),Uo=S(Ao),Vo=S(Ro),Qo=S(Do,"Use firebase.firestore().collection() instead."),Ho={Firestore:Fo,GeoPoint:tt,Timestamp:et,Blob:Z,Transaction:Mo,WriteBatch:jo,DocumentReference:Lo,DocumentSnapshot:qo,Query:Uo,QueryDocumentSnapshot:Bo,QuerySnapshot:Vo,CollectionReference:Qo,FieldPath:Ui,FieldValue:eo,setLogLevel:wo.setLogLevel,CACHE_SIZE_UNLIMITED:go};function zo(t){t.INTERNAL.registerService("firestore",function(t){return new wo(t)},function(t){v(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Ho))}function Ko(t){zo(t)}Ko(o),e.registerFirestore=Ko},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"setLogLevel",function(){return u}),n.d(e,"Logger",function(){return s}),n.d(e,"LogLevel",function(){return r});var r,i=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(r||(r={}));var o=r.INFO,a=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case r.DEBUG:case r.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case r.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case r.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case r.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},s=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=a,i.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in r))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.ERROR].concat(t))},t}();function u(t){i.forEach(function(e){e.logLevel=t})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){n.d(e,"createWebChannelTransport",function(){return Nn}),n.d(e,"ErrorCode",function(){return On}),n.d(e,"EventType",function(){return kn}),n.d(e,"WebChannel",function(){return Pn}),n.d(e,"XhrIoPool",function(){return Fn});var r,i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(t){return"string"==typeof t}function u(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function c(){}function h(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function l(t){return"array"==h(t)}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==h(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:g).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now||function(){return+new Date};function S(t,e){function n(){}n.prototype=e.prototype,t.L=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.mh=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function E(t){if(Error.captureStackTrace)Error.captureStackTrace(this,E);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function T(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");E.call(this,n+t[r])}function C(){0!=x&&(I[this[m]||(this[m]=++y)]=this),this.Ka=this.Ka,this.Qa=this.Qa}S(E,Error),E.prototype.name="CustomError",S(T,E),T.prototype.name="AssertionError";var x=0,I={};C.prototype.Ka=!1,C.prototype.bb=function(){if(!this.Ka&&(this.Ka=!0,this.F(),0!=x)){var t=this[m]||(this[m]=++y);if(0!=x&&this.Qa&&0<this.Qa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete I[t]}},C.prototype.F=function(){if(this.Qa)for(;this.Qa.length;)this.Qa.shift()()};var A=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},R=Array.prototype.lastIndexOf?function(t,e){return Array.prototype.lastIndexOf.call(t,e,t.length-1)}:function(t,e){var n=t.length-1;if(0>n&&(n=Math.max(0,t.length+n)),s(t))return s(e)&&1==e.length?t.lastIndexOf(e,n):-1;for(;0<=n;n--)if(n in t&&t[n]===e)return n;return-1},D=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=s(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},N=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function O(t){if(!l(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0}function k(t,e){var n;return(n=0<=(e=A(t,e)))&&Array.prototype.splice.call(t,e,1),n}function P(t){return Array.prototype.concat.apply([],arguments)}function F(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function M(t){return/^[\s\xa0]*$/.test(t)}var j,L=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function q(t,e){return t<e?-1:t>e?1:0}t:{var B=a.navigator;if(B){var U=B.userAgent;if(U){j=U;break t}}j=""}function V(t){return-1!=j.indexOf(t)}function Q(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function H(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function z(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}function K(t){var e,n={};for(e in t)n[e]=t[e];return n}var $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<$.length;o++)n=$[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function G(t){return G[" "](t),t}G[" "]=c;var J,X,Y=V("Opera"),Z=V("Trident")||V("MSIE"),tt=V("Edge"),et=tt||Z,nt=V("Gecko")&&!(-1!=j.toLowerCase().indexOf("webkit")&&!V("Edge"))&&!(V("Trident")||V("MSIE"))&&!V("Edge"),rt=-1!=j.toLowerCase().indexOf("webkit")&&!V("Edge");function it(){var t=a.document;return t?t.documentMode:void 0}t:{var ot="",at=(X=j,nt?/rv:([^\);]+)(\)|;)/.exec(X):tt?/Edge\/([\d\.]+)/.exec(X):Z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(X):rt?/WebKit\/(\S+)/.exec(X):Y?/(?:Version)[ \/]?(\S+)/.exec(X):void 0);if(at&&(ot=at?at[1]:""),Z){var st=it();if(null!=st&&st>parseFloat(ot)){J=String(st);break t}}J=ot}var ut,ct={};function ht(t){return function(t,e){var n=ct;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(){for(var e=0,n=L(String(J)).split("."),r=L(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=q(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||q(0==a[2].length,0==s[2].length)||q(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var lt=a.document;ut=lt&&Z?it()||("CSS1Compat"==lt.compatMode?parseInt(J,10):5):void 0;var ft=Object.freeze||function(t){return t},pt=!Z||9<=Number(ut),dt=Z&&!ht("9"),mt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",c,e),a.removeEventListener("test",c,e)}catch(t){}return t}();function yt(t,e){this.type=t,this.currentTarget=this.target=e,this.defaultPrevented=this.Ea=!1,this.Be=!0}function vt(t,e){yt.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.fb=null,t&&this.Kf(t,e)}yt.prototype.stopPropagation=function(){this.Ea=!0},yt.prototype.preventDefault=function(){this.defaultPrevented=!0,this.Be=!1},S(vt,yt);var gt=ft({2:"touch",3:"pen",4:"mouse"});vt.prototype.Kf=function(t,e){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.currentTarget=e,e=t.relatedTarget){if(nt){t:{try{G(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.offsetX=rt||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=rt||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.keyCode=t.keyCode||0,this.key=t.key||"",this.charCode=t.charCode||("keypress"==n?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:gt[t.pointerType]||"",this.state=t.state,this.fb=t,t.defaultPrevented&&this.preventDefault()},vt.prototype.stopPropagation=function(){vt.L.stopPropagation.call(this),this.fb.stopPropagation?this.fb.stopPropagation():this.fb.cancelBubble=!0},vt.prototype.preventDefault=function(){vt.L.preventDefault.call(this);var t=this.fb;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,dt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var bt="closure_listenable_"+(1e6*Math.random()|0);function _t(t){return!(!t||!t[bt])}var wt=0;function St(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ob=i,this.key=++wt,this.Sa=this.Eb=!1}function Et(t){this.src=t,this.J={},this.xb=0}function Tt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Sa&&o.listener==e&&o.capture==!!n&&o.Ob==r)return i}return-1}St.prototype.Vb=function(){this.Sa=!0,this.Ob=this.src=this.proxy=this.listener=null},(r=Et.prototype).add=function(t,e,n,r,i){var o=t.toString();(t=this.J[o])||(t=this.J[o]=[],this.xb++);var a=Tt(t,e,r,i);return-1<a?(e=t[a],n||(e.Eb=!1)):((e=new St(e,this.src,o,!!r,i)).Eb=n,t.push(e)),e},r.remove=function(t,e,n,r){if(!((t=t.toString())in this.J))return!1;var i=this.J[t];return-1<(e=Tt(i,e,n,r))&&(i[e].Vb(),Array.prototype.splice.call(i,e,1),0==i.length&&(delete this.J[t],this.xb--),!0)},r.ye=function(t){var e=t.type;e in this.J&&k(this.J[e],t)&&(t.Vb(),0==this.J[e].length&&(delete this.J[e],this.xb--))},r.pb=function(t){var e;for(e in t=t&&t.toString(),this.J)if(!t||e==t){for(var n=this.J[e],r=0;r<n.length;r++)n[r].Vb();delete this.J[e],this.xb--}},r.jb=function(t,e,n,r){var i=-1;return(t=this.J[t.toString()])&&(i=Tt(t,e,n,r)),-1<i?t[i]:null};var Ct="closure_lm_"+(1e6*Math.random()|0),xt={};function It(t,e,n,r,i){if(r&&r.once)return Rt(t,e,n,r,i);if(l(e)){for(var o=0;o<e.length;o++)It(t,e[o],n,r,i);return null}return n=jt(n),_t(t)?t.nb(e,n,d(r)?!!r.capture:!!r,i):At(t,e,n,!1,r,i)}function At(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i,s=Ft(t);if(s||(t[Ct]=s=new Et(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Pt,e=pt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)mt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Nt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Rt(t,e,n,r,i){if(l(e)){for(var o=0;o<e.length;o++)Rt(t,e[o],n,r,i);return null}return n=jt(n),_t(t)?t.Oc(e,n,d(r)?!!r.capture:!!r,i):At(t,e,n,!0,r,i)}function Dt(t){if("number"!=typeof t&&t&&!t.Sa){var e=t.src;if(_t(e))e.Le(t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Nt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ft(e))?(n.ye(t),0==n.xb&&(n.src=null,e[Ct]=null)):t.Vb()}}}function Nt(t){return t in xt?xt[t]:xt[t]="on"+t}function Ot(t,e,n,r){var i=!0;if((t=Ft(t))&&(e=t.J[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.Sa&&(o=kt(o,r),i=i&&!1!==o)}return i}function kt(t,e){var n=t.listener,r=t.Ob||t.src;return t.Eb&&Dt(t),n.call(r,e)}function Pt(t,e){if(t.Sa)return!0;if(!pt){var n=e||u("window.event");e=new vt(n,this);var r=!0;if(!(0>n.keyCode||void 0!=n.returnValue)){t:{var i=!1;if(0==n.keyCode)try{n.keyCode=-1;break t}catch(t){i=!0}(i||void 0==n.returnValue)&&(n.returnValue=!0)}for(n=[],i=e.currentTarget;i;i=i.parentNode)n.push(i);for(t=t.type,i=n.length-1;!e.Ea&&0<=i;i--){e.currentTarget=n[i];var o=Ot(n[i],t,!0,e);r=r&&o}for(i=0;!e.Ea&&i<n.length;i++)e.currentTarget=n[i],o=Ot(n[i],t,!1,e),r=r&&o}return r}return kt(t,new vt(e,this))}function Ft(t){return(t=t[Ct])instanceof Et?t:null}var Mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function jt(t){return p(t)?t:(t[Mt]||(t[Mt]=function(e){return t.handleEvent(e)}),t[Mt])}function Lt(){C.call(this),this.ka=new Et(this),this.Pe=this,this.Uc=null}S(Lt,C),Lt.prototype[bt]=!0,(r=Lt.prototype).addEventListener=function(t,e,n,r){It(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(l(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=d(i)?!!i.capture:!!i,r=jt(r),_t(e)?e.ed(n,r,i,o):e&&(e=Ft(e))&&(n=e.jb(n,r,i,o))&&Dt(n)}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.Uc;if(n)for(e=[];n;n=n.Uc)e.push(n);n=this.Pe;var r=t.type||t;if(s(t))t=new yt(t,n);else if(t instanceof yt)t.target=t.target||n;else{var i=t;W(t=new yt(r,n),i)}if(i=!0,e)for(var o=e.length-1;!t.Ea&&0<=o;o--){var a=t.currentTarget=e[o];i=a.Lb(r,!0,t)&&i}if(t.Ea||(i=(a=t.currentTarget=n).Lb(r,!0,t)&&i,t.Ea||(i=a.Lb(r,!1,t)&&i)),e)for(o=0;!t.Ea&&o<e.length;o++)i=(a=t.currentTarget=e[o]).Lb(r,!1,t)&&i;return i},r.F=function(){Lt.L.F.call(this),this.pg(),this.Uc=null},r.nb=function(t,e,n,r){return this.ka.add(String(t),e,!1,n,r)},r.Oc=function(t,e,n,r){return this.ka.add(String(t),e,!0,n,r)},r.ed=function(t,e,n,r){this.ka.remove(String(t),e,n,r)},r.Le=function(t){this.ka.ye(t)},r.pg=function(){this.ka&&this.ka.pb(void 0)},r.Lb=function(t,e,n){if(!(t=this.ka.J[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.Sa&&o.capture==e){var a=o.listener,s=o.Ob||o.src;o.Eb&&this.Le(o),r=!1!==a.call(s,n)&&r}}return r&&0!=n.Be},r.jb=function(t,e,n,r){return this.ka.jb(String(t),e,n,r)};var qt=a.JSON.stringify;function Bt(t,e){this.Sf=100,this.ef=t,this.ug=e,this.Zb=0,this.Pb=null}function Ut(){this.lc=this.Va=null}Bt.prototype.get=function(){if(0<this.Zb){this.Zb--;var t=this.Pb;this.Pb=t.next,t.next=null}else t=this.ef();return t},Bt.prototype.put=function(t){this.ug(t),this.Zb<this.Sf&&(this.Zb++,t.next=this.Pb,this.Pb=t)};var Vt,Qt,Ht=new Bt(function(){return new zt},function(t){t.reset()});function zt(){this.next=this.scope=this.Gc=null}function Kt(t){a.setTimeout(function(){throw t},0)}function $t(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);Qt=function(){t.then(Jt)}}else Qt=function(){var t=Jt;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!V("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(Vt||(Vt=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!V("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!V("Trident")&&!V("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).rd;n.rd=null,t()}},function(t){r.next={rd:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){a.setTimeout(t,0)}}()),Vt(t)):a.setImmediate(t)}}Ut.prototype.add=function(t,e){var n=this.Af();n.set(t,e),this.lc?this.lc.next=n:this.Va=n,this.lc=n},Ut.prototype.remove=function(){var t=null;return this.Va&&(t=this.Va,this.Va=this.Va.next,this.Va||(this.lc=null),t.next=null),t},Ut.prototype.wg=function(t){Ht.put(t)},Ut.prototype.Af=function(){return Ht.get()},zt.prototype.set=function(t,e){this.Gc=t,this.scope=e,this.next=null},zt.prototype.reset=function(){this.next=this.scope=this.Gc=null};var Wt=!1,Gt=new Ut;function Jt(){for(var t;t=Gt.remove();){try{t.Gc.call(t.scope)}catch(t){Kt(t)}Gt.wg(t)}Wt=!1}function Xt(t,e){Lt.call(this),this.Na=t||1,this.wb=e||a,this.nd=b(this.Rg,this),this.ie=w()}function Yt(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Zt(t,e,n){C.call(this),this.Uf=null!=n?b(t,n):t,this.Na=e,this.Xe=b(this.fg,this),this.qc=[]}function te(t){C.call(this),this.i=t,this.o={}}S(Xt,Lt),(r=Xt.prototype).enabled=!1,r.B=null,r.setInterval=function(t){this.Na=t,this.B&&this.enabled?(this.stop(),this.start()):this.B&&this.stop()},r.Rg=function(){if(this.enabled){var t=w()-this.ie;0<t&&t<.8*this.Na?this.B=this.wb.setTimeout(this.nd,this.Na-t):(this.B&&(this.wb.clearTimeout(this.B),this.B=null),this.ff(),this.enabled&&(this.stop(),this.start()))}},r.ff=function(){this.dispatchEvent("tick")},r.start=function(){this.enabled=!0,this.B||(this.B=this.wb.setTimeout(this.nd,this.Na),this.ie=w())},r.stop=function(){this.enabled=!1,this.B&&(this.wb.clearTimeout(this.B),this.B=null)},r.F=function(){Xt.L.F.call(this),this.stop(),delete this.wb},S(Zt,C),(r=Zt.prototype).Ta=!1,r.ob=0,r.B=null,r.mf=function(t){this.qc=arguments,this.B||this.ob?this.Ta=!0:this.Cc()},r.stop=function(){this.B&&(a.clearTimeout(this.B),this.B=null,this.Ta=!1,this.qc=[])},r.pause=function(){this.ob++},r.resume=function(){this.ob--,this.ob||!this.Ta||this.B||(this.Ta=!1,this.Cc())},r.F=function(){Zt.L.F.call(this),this.stop()},r.fg=function(){this.B=null,this.Ta&&!this.ob&&(this.Ta=!1,this.Cc())},r.Cc=function(){this.B=Yt(this.Xe,this.Na),this.Uf.apply(null,this.qc)},S(te,C);var ee=[];function ne(t,e,n){this.reset(t,e,n,void 0,void 0)}function re(t){this.pe=t,this.Zd=this.uc=this.mb=this.$b=null}function ie(t,e){this.name=t,this.value=e}(r=te.prototype).nb=function(t,e,n,r){return this.Tf(t,e,n,r)},r.Tf=function(t,e,n,r){l(e)||(e&&(ee[0]=e.toString()),e=ee);for(var i=0;i<e.length;i++){var o=It(t,e[i],n||this.handleEvent,r||!1,this.i||this);if(!o)break;this.o[o.key]=o}return this},r.Oc=function(t,e,n,r){return this.je(t,e,n,r)},r.je=function(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)this.je(t,e[o],n,r,i);else{if(!(t=Rt(t,e,n||this.handleEvent,r,i||this.i||this)))return this;this.o[t.key]=t}return this},r.ed=function(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)this.ed(t,e[o],n,r,i);else n=n||this.handleEvent,r=d(r)?!!r.capture:!!r,i=i||this.i||this,n=jt(n),r=!!r,(e=_t(t)?t.jb(e,n,r,i):t&&(t=Ft(t))?t.jb(e,n,r,i):null)&&(Dt(e),delete this.o[e.key])},r.pb=function(){Q(this.o,function(t,e){this.o.hasOwnProperty(e)&&Dt(t)},this),this.o={}},r.F=function(){te.L.F.call(this),this.pb()},r.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ne.prototype.Md=null,ne.prototype.reset=function(t,e,n,r,i){this.mb=t,delete this.Md},ne.prototype.Bg=function(t){this.Md=t},ne.prototype.Ge=function(t){this.mb=t},ie.prototype.toString=function(){return this.name};var oe=new ie("SEVERE",1e3),ae=new ie("WARNING",900),se=new ie("INFO",800),ue=new ie("CONFIG",700),ce=new ie("FINE",500);(r=re.prototype).getName=function(){return this.pe},r.getParent=function(){return this.$b},r.pf=function(){return this.uc||(this.uc={}),this.uc},r.Ge=function(t){this.mb=t},r.Qd=function(){return this.mb?this.mb:this.$b?this.$b.Qd():(function(t,e){throw new T("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}("Root logger has no level set."),null)},r.Pf=function(t){return t.value>=this.Qd().value},r.log=function(t,e,n){this.Pf(t)&&(p(e)&&(e=e()),this.gf(this.uf(t,e,n)))},r.uf=function(t,e,n){return t=new ne(t,String(e),this.pe),n&&t.Bg(n),t},r.ca=function(t,e){this.log(oe,t,e)},r.T=function(t,e){this.log(ae,t,e)},r.info=function(t,e){this.log(se,t,e)},r.lf=function(t){this.log(ce,t,void 0)},r.gf=function(t){for(var e=this;e;)e.We(t),e=e.getParent()},r.We=function(t){if(this.Zd)for(var e,n=0;e=this.Zd[n];n++)e(t)},r.Fg=function(t){this.$b=t},r.Qe=function(t,e){this.pf()[t]=e};var he={},le=null;function fe(t){var e;if(le||(le=new re(""),he[""]=le,le.Ge(ue)),!(e=he[t])){e=new re(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=fe(t.substr(0,n))).Qe(r,e),e.Fg(n),he[t]=e}return e}function pe(t,e){t&&t.info(e,void 0)}function de(t,e){t&&t.lf(e)}function me(){this.s=fe("goog.labs.net.webChannel.WebChannelDebug"),this.Wc=!0}(r=me.prototype).Id=function(){this.Wc=!1},r.Tg=function(t,e,n,r,i){var o=this;this.info(function(){return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+t+"\n"+e+"\n"+o.Xf(i)})},r.Ug=function(t,e,n,r,i,o){this.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+i+" "+o})},r.Wa=function(t,e,n){var r=this;this.info(function(){return"XMLHTTP TEXT ("+t+"): "+r.ng(e)+(n?" "+n:"")})},r.Sg=function(t){this.info(function(){return"TIMEOUT: "+t})},r.debug=function(t){de(this.s,t)},r.cb=function(t,e){var n=this.s;n&&n.ca(e||"Exception",t)},r.info=function(t){pe(this.s,t)},r.T=function(t){var e=this.s;e&&e.T(t,void 0)},r.ca=function(t){var e=this.s;e&&e.ca(t,void 0)},r.ng=function(t){if(!this.Wc)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(var n=0;n<e.length;n++)l(e[n])&&this.Wf(e[n]);return qt(e)}catch(e){return this.debug("Exception parsing expected JS array - probably was not JS"),t}},r.Wf=function(t){if(!(2>t.length||(t=t[1],!l(t)||1>t.length))){var e=t[0];if("noop"!=e&&"stop"!=e&&"close"!=e)for(e=1;e<t.length;e++)t[e]=""}},r.Xf=function(t){if(!this.Wc)return t;if(!t)return null;var e="";t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].split("=");if(1<r.length){var i=r[0];r=r[1];var o=i.split("_");e=2<=o.length&&"type"==o[1]?e+(i+"=")+r+"&":e+(i+"=redacted&")}}return e};var ye=new Lt;function ve(t){yt.call(this,"serverreachability",t)}function ge(t){ye.dispatchEvent(new ve(ye,t))}function be(t,e){yt.call(this,"statevent",t),this.stat=e}function _e(t){ye.dispatchEvent(new be(ye,t))}function we(t,e,n){yt.call(this,"timingevent",t),this.size=e,this.rtt=n}function Se(t,e){if(!p(t))throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){t()},e)}S(ve,yt),S(be,yt),S(we,yt);var Ee={NO_ERROR:0,Vg:1,bh:2,ah:3,Yg:4,$g:5,dh:6,Ne:7,TIMEOUT:8,gh:9},Te={Xg:"complete",kh:"success",Oe:"error",Ne:"abort",ih:"ready",jh:"readystatechange",TIMEOUT:"timeout",eh:"incrementaldata",hh:"progress",Zg:"downloadprogress",lh:"uploadprogress"};function Ce(){}function xe(){}Ce.prototype.pd=null,Ce.prototype.Vd=function(){return this.pd||(this.pd=this.Mf())};var Ie,Ae={OPEN:"a",Wg:"b",Oe:"c",fh:"d"};function Re(){yt.call(this,"d")}function De(){yt.call(this,"c")}function Ne(){}function Oe(t,e,n,r,i){this.b=t,this.a=e,this.ra=n,this.R=r,this.Xc=i||1,this.Fc=new te(this),this.Ua=ke,t=et?125:void 0,this.Vc=new Xt(t),this.A=null,this.S=!1,this.Da=this.pa=this.ua=this.ic=this.qb=this.hd=this.Ga=null,this.ba=[],this.h=null,this.Bb=0,this.I=this.Fa=null,this.w=-1,this.Za=!1,this.Ra=0,this.ac=null,this.lb=this.Ed=this.yc=!1}S(Re,yt),S(De,yt),S(Ne,Ce),Ne.prototype.Dd=function(){var t=this.Wd();return t?new ActiveXObject(t):new XMLHttpRequest},Ne.prototype.Mf=function(){var t={};return this.Wd()&&(t[0]=!0,t[1]=!0),t},Ne.prototype.Wd=function(){if(!this.be&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e=0;e<t.length;e++){var n=t[e];try{return new ActiveXObject(n),this.be=n}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return this.be},Ie=new Ne;var ke=45e3;var Pe={},Fe={};function Me(t){if(t.H&&"function"==typeof t.H)return t.H();if(s(t))return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}return H(t)}function je(t,e,n){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,n);else if(f(t)||s(t))D(t,e,n);else{if(t.W&&"function"==typeof t.W)var r=t.W();else if(t.H&&"function"==typeof t.H)r=void 0;else if(f(t)||s(t)){r=[];for(var i=t.length,o=0;o<i;o++)r.push(o)}else r=z(t);o=(i=Me(t)).length;for(var a=0;a<o;a++)e.call(n,i[a],r&&r[a],t)}}function Le(t,e){this.D={},this.o=[],this.j=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else t&&this.addAll(t)}function qe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=Oe.prototype).ga=function(t){this.A=t},r.setTimeout=function(t){this.Ua=t},r.He=function(t){this.Ra=t},r.Gg=function(t){this.ba=t},r.la=function(){return this.ba},r.kd=function(t,e){this.ic=1,this.ua=t.clone().Ub(),this.Da=e,this.yc=!0,this.Ce(null)},r.jd=function(t,e,n){this.ic=1,this.ua=t.clone().Ub(),this.Da=null,this.yc=e,this.Ce(n)},r.Ce=function(t){this.qb=w(),this.eb(),this.pa=this.ua.clone(),this.pa.dc("t",this.Xc),this.Bb=0,this.h=this.b.Jb(this.b.fc()?t:null),0<this.Ra&&(this.ac=new Zt(b(this.Me,this,this.h),this.Ra)),this.Fc.nb(this.h,"readystatechange",this.mg),t=this.A?K(this.A):{},this.Da?(this.Fa||(this.Fa="POST"),t["Content-Type"]="application/x-www-form-urlencoded",this.h.send(this.pa,this.Fa,this.Da,t)):(this.Fa="GET",this.h.send(this.pa,this.Fa,null,t)),ge(1),this.a.Tg(this.Fa,this.pa,this.R,this.Xc,this.Da)},r.mg=function(t){t=t.target;var e=this.ac;e&&3==t.ma()?(this.a.debug("Throttling readystatechange."),e.mf()):this.Me(t)},r.Me=function(t){try{t==this.h?this.hg():this.a.T("Called back with an unexpected xmlhttp")}catch(t){if(this.a.debug("Failed call to OnXmlHttpReadyStateChanged_"),this.h&&this.h.ya()){var e=this;this.a.cb(t,function(){return"ResponseText: "+e.h.ya()})}else this.a.cb(t,"No response text")}},r.hg=function(){var t=this.h.ma(),e=this.h.Ud(),n=this.h.za();if(!(3>t||3==t&&!et&&!this.h.ya())){this.Za||4!=t||7==e||ge(8==e||0>=n?3:2),this.Fb();var r=this.h.za();if(this.w=r,!(e=this.h.ya())){var i=this;this.a.debug(function(){return"No response text for uri "+i.pa+" status "+r})}if(this.S=200==r,this.a.Ug(this.Fa,this.pa,this.R,this.Xc,t,r),this.S){if(this.Ig()){if(!(n=this.sf()))return this.S=!1,this.I=3,_e(12),this.a.T("XMLHTTP Missing X_HTTP_INITIAL_RESPONSE ("+this.R+")"),this.Ia(),void this.Kb();this.a.Wa(this.R,n,"Initial handshake response via X-HTTP-Initial-Response"),this.lb=!0,this.Yc(n)}this.yc?(this.Fd(t,e),et&&this.S&&3==t&&this.Ng()):(this.a.Wa(this.R,e,null),this.Yc(e)),4==t&&this.Ia(),this.S&&!this.Za&&(4==t?this.b.Tc(this):(this.S=!1,this.eb()))}else 400==r&&0<e.indexOf("Unknown SID")?(this.I=3,_e(12),this.a.T("XMLHTTP Unknown SID ("+this.R+")")):(this.I=0,_e(13),this.a.T("XMLHTTP Bad status "+r+" ("+this.R+")")),this.Ia(),this.Kb()}},r.Ig=function(){return this.Ed&&!this.lb},r.sf=function(){if(this.h){var t=this.h.kb("X-HTTP-Initial-Response");if(t&&!M(t))return t}return null},r.Ag=function(){this.Ed=!0},r.Fd=function(t,e){for(var n=!0;!this.Za&&this.Bb<e.length;){var r=this.vf(e);if(r==Fe){4==t&&(this.I=4,_e(14),n=!1),this.a.Wa(this.R,null,"[Incomplete Response]");break}if(r==Pe){this.I=4,_e(15),this.a.Wa(this.R,e,"[Invalid Chunk]"),n=!1;break}this.a.Wa(this.R,r,null),this.Yc(r)}4==t&&0==e.length&&(this.I=1,_e(16),n=!1),this.S=this.S&&n,n||(this.a.Wa(this.R,e,"[Invalid Chunked Response]"),this.Ia(),this.Kb())},r.kg=function(){if(this.h){var t=this.h.ma(),e=this.h.ya();this.Bb<e.length&&(this.Fb(),this.Fd(t,e),this.S&&4!=t&&this.eb())}},r.Ng=function(){this.Fc.nb(this.Vc,"tick",this.kg),this.Vc.start()},r.vf=function(t){var e=this.Bb,n=t.indexOf("\n",e);return-1==n?Fe:(e=Number(t.substring(e,n)),isNaN(e)?Pe:(n+=1)+e>t.length?Fe:(t=t.substr(n,e),this.Bb=n+e,t))},r.yg=function(t){this.ic=2,this.ua=t.clone().Ub(),t=!1,a.navigator&&a.navigator.sendBeacon&&(t=a.navigator.sendBeacon(this.ua.toString(),"")),!t&&a.Image&&((new Image).src=this.ua,t=!0),t||(this.h=this.b.Jb(null),this.h.send(this.ua)),this.qb=w(),this.eb()},r.cancel=function(){this.Za=!0,this.Ia()},r.tg=function(t){t&&this.setTimeout(t),this.Ga&&(this.Fb(),this.eb())},r.eb=function(){this.hd=w()+this.Ua,this.Ke(this.Ua)},r.Ke=function(t){if(null!=this.Ga)throw Error("WatchDog timer not null");this.Ga=Se(b(this.gg,this),t)},r.Fb=function(){this.Ga&&(a.clearTimeout(this.Ga),this.Ga=null)},r.gg=function(){this.Ga=null;var t=w();0<=t-this.hd?this.Df():(this.a.T("WatchDog timer called too early"),this.Ke(this.hd-t))},r.Df=function(){this.S&&this.a.ca("Received watchdog timeout even though request loaded successfully"),this.a.Sg(this.pa),2!=this.ic&&(ge(3),_e(17)),this.Ia(),this.I=2,this.Kb()},r.Kb=function(){this.b.de()||this.Za||this.b.Tc(this)},r.Ia=function(){this.Fb();var t=this.ac;t&&"function"==typeof t.bb&&t.bb(),this.ac=null,this.Vc.stop(),this.Fc.pb(),this.h&&(t=this.h,this.h=null,t.abort(),t.bb())},r.Hc=function(){return this.I},r.Yc=function(t){try{this.b.ue(this,t),ge(4)}catch(t){this.a.cb(t,"Error in httprequest callback")}},(r=Le.prototype).C=function(){return this.j},r.H=function(){this.wc();for(var t=[],e=0;e<this.o.length;e++)t.push(this.D[this.o[e]]);return t},r.W=function(){return this.wc(),this.o.concat()},r.va=function(t){return qe(this.D,t)},r.X=function(){return 0==this.j},r.clear=function(){this.D={},this.j=this.o.length=0},r.remove=function(t){return!!qe(this.D,t)&&(delete this.D[t],this.j--,this.o.length>2*this.j&&this.wc(),!0)},r.wc=function(){if(this.j!=this.o.length){for(var t=0,e=0;t<this.o.length;){var n=this.o[t];qe(this.D,n)&&(this.o[e++]=n),t++}this.o.length=e}if(this.j!=this.o.length){var r={};for(e=t=0;t<this.o.length;)qe(r,n=this.o[t])||(this.o[e++]=n,r[n]=1),t++;this.o.length=e}},r.get=function(t,e){return qe(this.D,t)?this.D[t]:e},r.set=function(t,e){qe(this.D,t)||(this.j++,this.o.push(t)),this.D[t]=e},r.addAll=function(t){if(t instanceof Le)for(var e=t.W(),n=0;n<e.length;n++)this.set(e[n],t.get(e[n]));else for(e in t)this.set(e,t[e])},r.forEach=function(t,e){for(var n=this.W(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}},r.clone=function(){return new Le(this)};var Be=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ue(t,e){var n;this.xa=this.zb=this.qa="",this.Ca=null,this.ib=this.K="",this.O=this.Qf=!1,t instanceof Ue?(this.O=void 0!==e?e:t.O,this.tb(t.qa),this.cd(t.zb),this.rb(t.xa),this.sb(t.Ca),this.ec(t.K),this.bd(t.P.clone()),this.$c(t.ib)):t&&(n=String(t).match(Be))?(this.O=!!e,this.tb(n[1]||"",!0),this.cd(n[2]||"",!0),this.rb(n[3]||"",!0),this.sb(n[4]),this.ec(n[5]||"",!0),this.bd(n[6]||"",!0),this.$c(n[7]||"",!0)):(this.O=!!e,this.P=new Je(null,this.O))}function Ve(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qe(t,e,n){return s(t)?(t=encodeURI(t).replace(e,He),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function He(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}(r=Ue.prototype).toString=function(){var t=[],e=this.qa;e&&t.push(Qe(e,ze,!0),":");var n=this.xa;return(n||"file"==e)&&(t.push("//"),(e=this.zb)&&t.push(Qe(e,ze,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.Ca)&&t.push(":",String(n))),(n=this.K)&&(this.Ic()&&"/"!=n.charAt(0)&&t.push("/"),t.push(Qe(n,"/"==n.charAt(0)?$e:Ke,!0))),(n=this.Rd())&&t.push("?",n),(n=this.ib)&&t.push("#",Qe(n,Ge)),t.join("")},r.resolve=function(t){var e=this.clone(),n=t.Hf();n?e.tb(t.qa):n=t.If(),n?e.cd(t.zb):n=t.Ic(),n?e.rb(t.xa):n=t.Ff();var r=t.K;if(n)e.sb(t.Ca);else if(n=t.ae()){if("/"!=r.charAt(0))if(this.Ic()&&!this.ae())r="/"+r;else{var i=e.K.lastIndexOf("/");-1!=i&&(r=e.K.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.ec(r):n=t.Gf(),n?e.bd(t.P.clone()):n=t.Ef(),n&&e.$c(t.ib),e},r.clone=function(){return new Ue(this)},r.tb=function(t,e){this.U(),(this.qa=e?Ve(t,!0):t)&&(this.qa=this.qa.replace(/:$/,""))},r.Hf=function(){return!!this.qa},r.cd=function(t,e){this.U(),this.zb=e?Ve(t):t},r.If=function(){return!!this.zb},r.rb=function(t,e){this.U(),this.xa=e?Ve(t,!0):t},r.Ic=function(){return!!this.xa},r.sb=function(t){if(this.U(),t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);this.Ca=t}else this.Ca=null},r.Ff=function(){return null!=this.Ca},r.ec=function(t,e){this.U(),this.K=e?Ve(t,!0):t},r.ae=function(){return!!this.K},r.Gf=function(){return""!==this.P.toString()},r.bd=function(t,e){this.U(),t instanceof Je?(this.P=t,this.P.ad(this.O)):(e||(t=Qe(t,We)),this.P=new Je(t,this.O))},r.Rd=function(){return this.P.toString()},r.getQuery=function(){return this.Rd()},r.l=function(t,e){this.U(),this.P.set(t,e)},r.dc=function(t,e){this.U(),l(e)||(e=[String(e)]),this.P.Ie(t,e)},r.$c=function(t,e){this.U(),this.ib=e?Ve(t):t},r.Ef=function(){return!!this.ib},r.Ub=function(){return this.U(),this.l("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),this},r.removeParameter=function(t){return this.U(),this.P.remove(t),this},r.U=function(){if(this.Qf)throw Error("Tried to modify a read-only Uri")},r.ad=function(t){this.O=t,this.P&&this.P.ad(t)};var ze=/[#\/\?@]/g,Ke=/[#\?:]/g,$e=/[#\?]/g,We=/[#\?@]/g,Ge=/#/g;function Je(t,e){this.j=this.m=null,this.ja=t||null,this.O=!!e}function Xe(t,e){this.b=t,this.a=e,this.f=this.A=null,this.bc=!1,this.K=null,this.w=-1,this.Ad=this.na=null}function Ye(t){this.D=new Le,t&&this.addAll(t)}function Ze(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[m]||(t[m]=++y)):e.substr(0,1)+t}function tn(t){this.me=t||en,a.PerformanceNavigationTiming?t=0<(t=a.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(a.vc&&a.vc.ke&&a.vc.ke()&&a.vc.ke().nh),this.Xb=t?this.me:1,this.v=null,1<this.Xb&&(this.v=new Ye),this.f=null,this.ba=[]}(r=Je.prototype).$=function(){if(!this.m&&(this.m=new Le,this.j=0,this.ja)){var t=this;!function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(this.ja,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})}},r.C=function(){return this.$(),this.j},r.add=function(t,e){this.$(),this.Oa(),t=this.Ma(t);var n=this.m.get(t);return n||this.m.set(t,n=[]),n.push(e),this.j+=1,this},r.remove=function(t){return this.$(),t=this.Ma(t),!!this.m.va(t)&&(this.Oa(),this.j-=this.m.get(t).length,this.m.remove(t))},r.clear=function(){this.Oa(),this.m=null,this.j=0},r.X=function(){return this.$(),0==this.j},r.va=function(t){return this.$(),t=this.Ma(t),this.m.va(t)},r.forEach=function(t,e){this.$(),this.m.forEach(function(n,r){D(n,function(n){t.call(e,n,r,this)},this)},this)},r.W=function(){this.$();for(var t=this.m.H(),e=this.m.W(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.H=function(t){this.$();var e=[];if(s(t))this.va(t)&&(e=P(e,this.m.get(this.Ma(t))));else{t=this.m.H();for(var n=0;n<t.length;n++)e=P(e,t[n])}return e},r.set=function(t,e){return this.$(),this.Oa(),t=this.Ma(t),this.va(t)&&(this.j-=this.m.get(t).length),this.m.set(t,[e]),this.j+=1,this},r.get=function(t,e){return t&&0<(t=this.H(t)).length?String(t[0]):e},r.Ie=function(t,e){this.remove(t),0<e.length&&(this.Oa(),this.m.set(this.Ma(t),F(e)),this.j+=e.length)},r.toString=function(){if(this.ja)return this.ja;if(!this.m)return"";for(var t=[],e=this.m.W(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.H(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.ja=t.join("&")},r.Oa=function(){this.ja=null},r.clone=function(){var t=new Je;return t.ja=this.ja,this.m&&(t.m=this.m.clone(),t.j=this.j),t},r.Ma=function(t){return t=String(t),this.O&&(t=t.toLowerCase()),t},r.ad=function(t){t&&!this.O&&(this.$(),this.Oa(),this.m.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(this.remove(e),this.Ie(n,t))},this)),this.O=t},r.extend=function(t){for(var e=0;e<arguments.length;e++)je(arguments[e],function(t,e){this.add(e,t)},this)},S(function(){},function(){}),(r=Xe.prototype).g=null,r.ga=function(t){this.A=t},r.connect=function(t){this.K=t,t=this.b.Sd(this.K),_e(3);var e=this.b.Ib.$d;null!=e?(this.na=this.b.$a(e[0]),this.g=1,this.xd()):(t.dc("MODE","init"),!this.b.ta&&this.b.aa&&t.dc("X-HTTP-Session-Id",this.b.aa),this.f=new Oe(this,this.a,void 0,void 0,void 0),this.f.ga(this.A),this.f.jd(t,!1,null),this.g=0)},r.xd=function(){this.a.debug("TestConnection: starting stage 2");var t=this.b.Ib.od;if(null!=t)this.a.debug(function(){return"Buffered"}),_e(4),t?(_e(10),this.b.ub(this,!1)):(_e(11),this.b.ub(this,!0));else{this.f=new Oe(this,this.a,void 0,void 0,void 0),this.f.ga(this.A);var e=this.b.Pd(this.na,this.K);_e(4),e.dc("TYPE","xmlhttp");var n=this.b.aa,r=this.b.Kc;n&&r&&e.l(n,r),this.f.jd(e,!1,this.na)}},r.Jb=function(t){return this.b.Jb(t)},r.abort=function(){this.f&&(this.f.cancel(),this.f=null),this.w=-1},r.de=function(){return!1},r.ue=function(t,e){if(this.w=t.w,0==this.g)if(this.a.debug("TestConnection: Got data for stage 1"),this.pc(t),e){try{var n=this.b.kc.zc(e)}catch(t){return this.a.cb(t),void this.b.dd(this)}this.na=this.b.$a(n[0])}else this.a.debug("TestConnection: Null responseText"),this.b.dd(this);else 1==this.g&&(this.bc?_e(6):"11111"==e?(_e(5),this.bc=!0,this.Ze()&&(this.w=200,this.f.cancel(),this.a.debug("Test connection succeeded; using streaming connection"),_e(11),this.b.ub(this,!0))):(_e(7),this.bc=!1))},r.Tc=function(){this.w=this.f.w,this.f.S?0==this.g?(this.g=1,this.a.debug("TestConnection: request complete for initial check"),this.xd()):1==this.g&&(this.a.debug("TestConnection: request complete for stage 2"),this.bc?(this.a.debug("Test connection succeeded; using streaming connection"),_e(11),this.b.ub(this,!0)):(this.a.debug("Test connection failed; not using streaming"),_e(10),this.b.ub(this,!1))):(this.a.debug("TestConnection: request failed, in state "+this.g),0==this.g?_e(8):1==this.g&&_e(9),this.b.dd(this))},r.pc=function(t){if(!this.b.ta&&(t=t.h)){var e=t.kb("X-Client-Wire-Protocol");this.Ad=e||null,this.b.aa&&((t=t.kb("X-HTTP-Session-Id"))?this.b.Fe(t):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},r.fc=function(){return this.b.fc()},r.Ba=function(){return this.b.Ba()},r.Ze=function(){return!Z||10<=Number(ut)},(r=Ye.prototype).C=function(){return this.D.C()},r.add=function(t){this.D.set(Ze(t),t)},r.addAll=function(t){for(var e=(t=Me(t)).length,n=0;n<e;n++)this.add(t[n])},r.pb=function(t){for(var e=(t=Me(t)).length,n=0;n<e;n++)this.remove(t[n])},r.remove=function(t){return this.D.remove(Ze(t))},r.clear=function(){this.D.clear()},r.X=function(){return this.D.X()},r.contains=function(t){return this.D.va(Ze(t))},r.H=function(){return this.D.H()},r.clone=function(){return new Ye(this)};var en=10;function nn(){this.xg=this.rg=void 0}function rn(){this.jg=new nn}function on(t,e,n,r,i){try{t.debug(n),e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(e){t.cb(e)}}(r=tn.prototype).ld=function(t){this.v||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(this.Xb=this.me,this.v=new Ye,this.f&&(this.oc(this.f),this.f=null))},r.ee=function(){return!!this.f||!!this.v&&this.v.C()>=this.Xb},r.xf=function(){return this.f?1:this.v?this.v.C():0},r.Jc=function(t){return this.f?this.f==t:!!this.v&&this.v.contains(t)},r.oc=function(t){this.v?this.v.add(t):this.f=t},r.ze=function(t){this.f&&this.f==t?this.f=null:this.v&&this.v.contains(t)&&this.v.remove(t)},r.cancel=function(){this.ba=this.la(),this.f?(this.f.cancel(),this.f=null):this.v&&!this.v.X()&&(D(this.v.H(),function(t){t.cancel()}),this.v.clear())},r.la=function(){if(null!=this.f)return this.ba.concat(this.f.la());if(null!=this.v&&!this.v.X()){var t=this.ba;return D(this.v.H(),function(e){t=t.concat(e.la())}),t}return F(this.ba)},r.Re=function(t){this.ba=this.ba.concat(t)},r.$e=function(){this.ba.length=0},nn.prototype.stringify=function(t){return a.JSON.stringify(t,this.rg)},nn.prototype.parse=function(t){return a.JSON.parse(t,this.xg)},rn.prototype.hf=function(t,e,n){var r=n||"";try{je(t,function(t,n){var i=t;d(t)&&(i=qt(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}},rn.prototype.jf=function(t,e,n){for(var r=-1;;){var i=["count="+e];-1==r?0<e?(r=t[0].Pc,i.push("ofs="+r)):r=0:i.push("ofs="+r);for(var o=!0,a=0;a<e;a++){var s=t[a].Pc,u=t[a].map;if(0>(s-=r))r=Math.max(0,t[a].Pc-100),o=!1;else try{this.hf(u,i,"req"+s+"_")}catch(t){n&&n(u)}}if(o)return i.join("&")}},rn.prototype.zc=function(t){return this.jg.parse(t)};var an=a.JSON.parse;function sn(t){Lt.call(this),this.headers=new Le,this.Xa=t||null,this.ha=!1,this.mc=this.c=null,this.ge=this.Tb="",this.Pa=0,this.I="",this.Aa=this.Lc=this.Qb=this.Ec=!1,this.vb=0,this.hc=null,this.Ae=un,this.jc=this.lg=this.Ab=!1}S(sn,Lt);var un="";sn.prototype.s=fe("goog.net.XhrIo");var cn=/^https?$/i,hn=["POST","PUT"];function ln(t){return"content-type"==t.toLowerCase()}function fn(t,e){return{type:e,lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total}}function pn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return Q(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),s(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return t.l(e,n),t}function dn(t){this.Bd=22,this.De=0,this.M=[],this.a=new me,this.Ib=new function(){this.od=this.$d=null},this.na=this.md=this.hb=this.K=this.u=this.Kc=this.aa=this.gb=this.N=this.Rb=this.A=null,this.Te=!0,this.ag=this.Yb=0,this.kf=!!u("internalChannelParams.failFast",t),this.fd=this.Ja=this.wa=this.ia=this.ea=this.i=null,this.Se=!0,this.w=this.he=this.Sb=-1,this.rc=this.Ha=this.La=0,this.Ve=u("internalChannelParams.baseRetryDelayMs",t)||5e3,this.vg=u("internalChannelParams.retryDelaySeedMs",t)||1e4,this.nf=u("internalChannelParams.forwardChannelMaxRetries",t)||2,this.Od=u("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Xa=t&&t.oh||void 0,this.Db=void 0,this.Ra=0,this.gc=t&&t.supportsCrossDomainXhr||!1,this.ra="",this.G=new tn(t&&t.concurrentRequestLimit),this.kc=new rn,this.ta=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.Nd=t&&t.fastHandshake||!1)&&!this.ta&&(this.a.T("Force backgroundChannelTest when fastHandshake is enabled."),this.ta=!0),t&&t.Id&&this.a.Id()}function mn(){}function yn(){if(Z&&!(10<=Number(ut)))throw Error("Environmental error: no available transport.")}function vn(t,e){Lt.call(this),this.b=new dn(e),this.yb=t,this.Qg=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e=r?e+i:e+"/"+i)}return e}(this.yb,"test"),this.s=fe("goog.labs.net.webChannel.WebChannelBaseTransport"),this.Rc=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.b.ga(t),t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.zd&&(t?t["X-WebChannel-Client-Profile"]=e.zd:t={"X-WebChannel-Client-Profile":e.zd}),this.b.Eg(t),(t=e&&e.httpHeadersOverwriteParam)&&!M(t)&&this.b.Cg(t),this.Og=e&&e.supportsCrossDomainXhr||!1,this.zg=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!M(e)&&(this.b.Dg(e),null!==(t=this.Rc)&&e in t&&(e in(t=this.Rc)&&delete t[e],(t=this.s)&&t.T("Ignore httpSessionIdParam also specified with messageUrlParams: "+e,void 0))),this.vd=new _n(this)}function gn(t){Re.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.ne=t)&&(t=this.ne,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function bn(t){De.call(this),this.status=1,this.errorCode=t}function _n(t){this.b=t}(r=sn.prototype).Je=function(t){this.Ab=t},r.send=function(t,e,n,r){if(this.c)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Tb+"; newUri="+t);e=e?e.toUpperCase():"GET",this.Tb=t,this.I="",this.Pa=0,this.ge=e,this.Ec=!1,this.ha=!0,this.c=this.df(),this.mc=this.Xa?this.Xa.Vd():Ie.Vd(),this.c.onreadystatechange=b(this.te,this),this.lg&&"onprogress"in this.c&&(this.c.onprogress=b(function(t){this.re(t,!0)},this),this.c.upload&&(this.c.upload.onprogress=b(this.re,this)));try{de(this.s,this.da("Opening Xhr")),this.Lc=!0,this.c.open(e,String(t),!0),this.Lc=!1}catch(t){return de(this.s,this.da("Error opening Xhr: "+t.message)),void this.Ld(t)}t=n||"";var i=this.headers.clone();r&&je(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=ln,n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:s(t)?t.charAt(e):t[e]}(i.W()),n=a.FormData&&t instanceof a.FormData,!(0<=A(hn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.c.setRequestHeader(e,t)},this),this.Ae&&(this.c.responseType=this.Ae),"withCredentials"in this.c&&this.c.withCredentials!==this.Ab&&(this.c.withCredentials=this.Ab);try{this.yd(),0<this.vb&&(this.jc=function(t){return Z&&ht(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.c),de(this.s,this.da("Will abort after "+this.vb+"ms if incomplete, xhr2 "+this.jc)),this.jc?(this.c.timeout=this.vb,this.c.ontimeout=b(this.Ua,this)):this.hc=Yt(this.Ua,this.vb,this)),de(this.s,this.da("Sending request")),this.Qb=!0,this.c.send(t),this.Qb=!1}catch(t){de(this.s,this.da("Send error: "+t.message)),this.Ld(t)}},r.df=function(){return this.Xa?this.Xa.Dd():Ie.Dd()},r.Ua=function(){void 0!==o&&this.c&&(this.I="Timed out after "+this.vb+"ms, aborting",this.Pa=8,de(this.s,this.da(this.I)),this.dispatchEvent("timeout"),this.abort(8))},r.Ld=function(t){this.ha=!1,this.c&&(this.Aa=!0,this.c.abort(),this.Aa=!1),this.I=t,this.Pa=5,this.Jd(),this.Gb()},r.Jd=function(){this.Ec||(this.Ec=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},r.abort=function(t){this.c&&this.ha&&(de(this.s,this.da("Aborting")),this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1,this.Pa=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.Gb())},r.F=function(){this.c&&(this.ha&&(this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1),this.Gb(!0)),sn.L.F.call(this)},r.te=function(){this.Ka||(this.Lc||this.Qb||this.Aa?this.se():this.eg())},r.eg=function(){this.se()},r.se=function(){if(this.ha&&void 0!==o)if(this.mc[1]&&4==this.ma()&&2==this.za())de(this.s,this.da("Local request error detected and ignored"));else if(this.Qb&&4==this.ma())Yt(this.te,0,this);else if(this.dispatchEvent("readystatechange"),this.Mc()){de(this.s,this.da("Request complete")),this.ha=!1;try{this.Rf()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.Pa=6,this.I=this.Yd()+" ["+this.za()+"]",this.Jd())}finally{this.Gb()}}},r.re=function(t,e){this.dispatchEvent(fn(t,"progress")),this.dispatchEvent(fn(t,e?"downloadprogress":"uploadprogress"))},r.Gb=function(t){if(this.c){this.yd();var e=this.c,n=this.mc[0]?c:null;this.mc=this.c=null,t||this.dispatchEvent("ready");try{e.onreadystatechange=n}catch(e){(t=this.s)&&t.ca("Problem encountered resetting onreadystatechange: "+e.message,void 0)}}},r.yd=function(){this.c&&this.jc&&(this.c.ontimeout=null),this.hc&&(a.clearTimeout(this.hc),this.hc=null)},r.Ba=function(){return!!this.c},r.Mc=function(){return 4==this.ma()},r.Rf=function(){var t=this.za();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}return e||0===t&&!this.Of()},r.Of=function(){var t=String(this.Tb).match(Be)[1]||null;return!t&&a.self&&a.self.location&&(t=(t=a.self.location.protocol).substr(0,t.length-1)),cn.test(t?t.toLowerCase():"")},r.ma=function(){return this.c?this.c.readyState:0},r.za=function(){try{return 2<this.ma()?this.c.status:-1}catch(t){return-1}},r.Yd=function(){try{return 2<this.ma()?this.c.statusText:""}catch(t){return de(this.s,"Can not get status: "+t.message),""}},r.ya=function(){try{return this.c?this.c.responseText:""}catch(t){return de(this.s,"Can not get responseText: "+t.message),""}},r.yf=function(t){if(this.c){var e=this.c.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),an(e)}},r.getResponseHeader=function(t){if(this.c&&this.Mc())return null===(t=this.c.getResponseHeader(t))?void 0:t},r.getAllResponseHeaders=function(){return this.c&&this.Mc()&&this.c.getAllResponseHeaders()||""},r.kb=function(t){return this.c?this.c.getResponseHeader(t):null},r.Ud=function(){return this.Pa},r.Hc=function(){return s(this.I)?this.I:String(this.I)},r.da=function(t){return t+" ["+this.ge+" "+this.Tb+" "+this.za()+"]"},(r=dn.prototype).tc=8,r.g=1,r.connect=function(t,e,n,r,i){this.a.debug("connect()"),_e(0),this.K=e,this.gb=n||{},r&&void 0!==i&&(this.gb.OSID=r,this.gb.OAID=i),this.ta&&(this.a.debug("connect() bypassed channel-test."),this.Ib.$d=[],this.Ib.od=!1),this.bf(t)},r.disconnect=function(){if(this.a.debug("disconnect()"),this.qd(),3==this.g){var t=this.Yb++,e=this.hb.clone();e.l("SID",this.ra),e.l("RID",t),e.l("TYPE","terminate"),this.Ya(e),new Oe(this,this.a,this.ra,t,void 0).yg(e)}this.qe()},r.bf=function(t){this.a.debug("connectTest_()"),this.Ja=new Xe(this,this.a),null===this.N&&this.Ja.ga(this.A);var e=t;this.N&&this.A&&(e=pn(t,this.N,this.A)),this.Ja.connect(e)},r.af=function(){this.a.debug("connectChannel_()"),this.hb=this.Sd(this.K),this.Dc()},r.qd=function(){this.Ja&&(this.Ja.abort(),this.Ja=null),this.u&&(this.u.cancel(),this.u=null),this.ia&&(a.clearTimeout(this.ia),this.ia=null),this.Hb(),this.G.cancel(),this.ea&&(a.clearTimeout(this.ea),this.ea=null)},r.ga=function(t){this.A=t},r.Eg=function(t){this.Rb=t},r.Cg=function(t){this.N=t},r.Dg=function(t){this.aa=t},r.Fe=function(t){this.Kc=t},r.He=function(t){this.Ra=t},r.Hg=function(){this.gc=!0},r.Ee=function(t){this.i=t},r.Nf=function(){return!this.fd},r.Zc=function(t){1e3==this.M.length&&this.a.ca(function(){return"Already have 1000 queued maps upon queueing "+qt(t)}),this.M.push(new function(t,e){this.Pc=t,this.map=e,this.context=null}(this.ag++,t)),3==this.g&&this.Dc()},r.qf=function(){return this.kf?0:this.nf},r.de=function(){return 0==this.g},r.getState=function(){return this.g},r.Dc=function(){this.G.ee()||this.ea||(this.ea=Se(b(this.we,this),0),this.La=0)},r.Yf=function(t){return this.G.xf()>=this.G.Xb-(this.ea?1:0)?(this.a.ca("Unexpected retry request is scheduled."),!1):this.ea?(this.a.debug("Use the retry request that is already scheduled."),this.M=t.la().concat(this.M),!0):!(1==this.g||2==this.g||this.La>=this.qf())&&(this.a.debug("Going to retry POST"),this.ea=Se(b(this.we,this,t),this.Xd(this.La)),this.La++,!0)},r.we=function(t){this.ea=null,this.Mg(t)},r.Mg=function(t){this.a.debug("startForwardChannel_"),1==this.g?t?this.a.ca("Not supposed to retry the open"):(this.ig(),this.g=2):3==this.g&&(t?this.le(t):0==this.M.length?this.a.debug("startForwardChannel_ returned: nothing to send"):this.G.ee()?this.a.ca("startForwardChannel_ returned: connection already in progress"):(this.le(),this.a.debug("startForwardChannel_ finished, sent request")))},r.ig=function(){this.a.debug("open_()"),this.Yb=Math.floor(1e5*Math.random());var t=this.Yb++,e=new Oe(this,this.a,"",t,void 0),n=this.A;this.Rb&&(n?W(n=K(n),this.Rb):n=this.Rb),null===this.N&&e.ga(n);var r=this.Hd(e),i=this.hb.clone();i.l("RID",t),0<this.Bd&&i.l("CVER",this.Bd),this.ta&&this.aa&&i.l("X-HTTP-Session-Id",this.aa),this.Ya(i),this.N&&n&&pn(i,this.N,n),this.G.oc(e),this.Nd?(i.l("$req",r),i.l("SID","null"),e.Ag(),e.kd(i,null)):e.kd(i,r)},r.le=function(t){var e=t?t.R:this.Yb++,n=this.hb.clone();n.l("SID",this.ra),n.l("RID",e),n.l("AID",this.Sb),this.Ya(n),this.N&&this.A&&pn(n,this.N,this.A),e=new Oe(this,this.a,this.ra,e,this.La+1),null===this.N&&e.ga(this.A),t&&this.sg(t),t=this.Hd(e),e.setTimeout(Math.round(.5*this.Od)+Math.round(.5*this.Od*Math.random())),this.G.oc(e),e.kd(n,t)},r.Ya=function(t){this.i&&je({},function(e,n){t.l(n,e)})},r.Hd=function(t){var e=Math.min(this.M.length,1e3),n=this.i?b(this.i.Ue,this.i,this):null;return n=this.kc.jf(this.M,e,n),t.Gg(this.M.splice(0,e)),n},r.sg=function(t){this.M=t.la().concat(this.M)},r.Kd=function(){if(!this.u&&!this.ia){this.rc=1;var t=this.ve;Qt||$t(),Wt||(Qt(),Wt=!0),Gt.add(t,this),this.Ha=0}},r.Qc=function(){return this.u||this.ia?(this.a.ca("Request already in progress"),!1):!(3<=this.Ha)&&(this.a.debug("Going to retry GET"),this.rc++,this.ia=Se(b(this.ve,this),this.Xd(this.Ha)),this.Ha++,!0)},r.ve=function(){this.ia=null,this.Kg()},r.Kg=function(){this.a.debug("Creating new HttpRequest"),this.u=new Oe(this,this.a,this.ra,"rpc",this.rc),null===this.N&&this.u.ga(this.A),this.u.He(this.Ra);var t=this.md.clone();t.l("RID","rpc"),t.l("SID",this.ra),t.l("CI",this.fd?"0":"1"),t.l("AID",this.Sb),this.Ya(t),t.l("TYPE","xmlhttp"),this.N&&this.A&&pn(t,this.N,this.A),this.Db&&this.u.setTimeout(this.Db),this.u.jd(t,!0,this.na),this.a.debug("New Request created")},r.ub=function(t,e){this.a.debug("Test Connection Finished");var n=t.Ad;n&&this.G.ld(n),this.fd=this.Se&&e,this.w=t.w,this.af()},r.dd=function(t){this.a.debug("Test Connection Failed"),this.w=t.w,this.sa(2)},r.ue=function(t,e){if(0!=this.g&&(this.u==t||this.G.Jc(t)))if(this.w=t.w,!t.lb&&this.G.Jc(t)&&3==this.g){try{var n=this.kc.zc(e)}catch(t){n=null}l(n)&&3==n.length?this.Cf(n,t):(this.a.debug("Bad POST response data returned"),this.sa(11))}else(t.lb||this.u==t)&&this.Hb(),M(e)||(n=this.kc.zc(e),this.dg(n,t))},r.Cf=function(t,e){0==t[0]?this.Bf(e):(this.he=t[1],0<(e=this.he-this.Sb)&&(t=t[2],this.a.debug(t+" bytes (in "+e+" arrays) are outstanding on the BackChannel"),this.Jg(t)&&!this.wa&&(this.wa=Se(b(this.bg,this),6e3))))},r.Bf=function(t){if(this.a.debug("Server claims our backchannel is missing."),this.ia)this.a.debug("But we are currently starting the request.");else{if(this.u){if(!(this.u.qb+3e3<t.qb))return;this.Hb(),this.u.cancel(),this.u=null}else this.a.T("We do not have a BackChannel established");this.Qc(),_e(18)}},r.Jg=function(t){return 37500>t&&!this.Nf()&&0==this.Ha},r.$a=function(t){return this.Te?this.i?this.i.$a(t):t:null},r.bg=function(){null!=this.wa&&(this.wa=null,this.u.cancel(),this.u=null,this.Qc(),_e(19))},r.Hb=function(){null!=this.wa&&(a.clearTimeout(this.wa),this.wa=null)},r.Tc=function(t){this.a.debug("Request complete");var e=null;if(this.u==t){this.Hb(),this.u=null;var n=2}else{if(!this.G.Jc(t))return;e=t.la(),this.G.ze(t),n=1}if(this.w=t.w,0!=this.g)if(t.S)1==n?(function(t,e,n){ye.dispatchEvent(new we(ye,t,e,n))}(t.Da?t.Da.length:0,w()-t.qb,this.La),this.Dc()):this.Kd();else{var r=t.Hc();if(3==r||0==r&&0<this.w)this.a.debug("Not retrying due to error type");else{var i=this;if(this.a.debug(function(){return"Maybe retrying, last error: "+function(t,e){switch(t){case 0:return"Non-200 return code ("+e+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}(r,i.w)}),1==n&&this.Yf(t)||2==n&&this.Qc())return;this.a.debug("Exceeded max number of retries")}switch(e&&0<e.length&&this.G.Re(e),this.a.debug("Error: HTTP request failed"),r){case 1:this.sa(5);break;case 4:this.sa(10);break;case 3:this.sa(6);break;default:this.sa(2)}}},r.Xd=function(t){var e=this.Ve+Math.floor(Math.random()*this.vg);return this.Ba()||(this.a.debug("Inactive channel"),e*=2),e*t},r.pc=function(t){if(this.ta&&(t=t.h)){var e=t.kb("X-Client-Wire-Protocol");e&&this.G.ld(e),this.aa&&((t=t.kb("X-HTTP-Session-Id"))?(this.Fe(t),this.hb.l(this.aa,t)):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},r.dg=function(t,e){for(var n=this.i&&this.i.sc?[]:null,r=0;r<t.length;r++){var i=t[r];if(this.Sb=i[0],i=i[1],2==this.g)if("c"==i[0]){this.ra=i[1],this.na=this.$a(i[2]);var o=i[3];null!=o&&(this.tc=o,this.a.info("VER="+this.tc)),null!=(o=i[4])&&(this.De=o,this.a.info("SVER="+this.De)),null!=(i=i[5])&&"number"==typeof i&&0<i&&(this.Db=i*=1.5,this.a.info("backChannelRequestTimeoutMs_="+i)),this.pc(e),this.g=3,this.i&&this.i.wd(),this.Lg(e)}else"stop"!=i[0]&&"close"!=i[0]||this.sa(7);else 3==this.g&&("stop"==i[0]||"close"==i[0]?(n&&0!=n.length&&(this.i.sc(this,n),n.length=0),"stop"==i[0]?this.sa(7):this.disconnect()):"noop"!=i[0]&&(n?n.push(i):this.i&&this.i.ud(i)),this.Ha=0)}n&&0!=n.length&&this.i.sc(this,n)},r.Lg=function(t){this.md=this.Pd(this.na,this.K),t.lb?(this.a.debug("Upgrade the handshake request to a backchannel."),this.G.ze(t),t.tg(this.Db),this.u=t):this.Kd()},r.sa=function(t){if(this.a.info("Error code "+t),2==t){var e=null;this.i&&(e=null);var n=b(this.Pg,this);e||(e=new Ue("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||e.tb("https"),e.Ub()),function(t,e){var n=new me;n.debug("TestLoadImage: loading "+t);var r=new Image;r.onload=_(on,n,r,"TestLoadImage: loaded",!0,e),r.onerror=_(on,n,r,"TestLoadImage: error",!1,e),r.onabort=_(on,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=_(on,n,r,"TestLoadImage: timeout",!1,e),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}(e.toString(),n)}else _e(2);this.cg(t)},r.Pg=function(t){t?(this.a.info("Successfully pinged google.com"),_e(2)):(this.a.info("Failed to ping google.com"),_e(1))},r.cg=function(t){this.a.debug("HttpChannel: error - "+t),this.g=0,this.i&&this.i.td(t),this.qe(),this.qd()},r.qe=function(){if(this.g=0,this.w=-1,this.i){var t=this.G.la();if(0!=t.length||0!=this.M.length){var e=this;this.a.debug(function(){return"Number of undelivered maps, pending: "+t.length+", outgoing: "+e.M.length}),this.G.$e(),F(this.M),this.M.length=0}this.i.sd()}},r.Sd=function(t){return t=this.Cd(null,t),this.a.debug("GetForwardChannelUri: "+t),t},r.Pd=function(t,e){return t=this.Cd(this.fc()?t:null,e),this.a.debug("GetBackChannelUri: "+t),t},r.Cd=function(t,e){var n=function(t){return t instanceof Ue?t.clone():new Ue(t,void 0)}(e);if(""!=n.xa)t&&n.rb(t+"."+n.xa),n.sb(n.Ca);else{var r=a.location;n=function(t,e,n,r){var i=new Ue(null,void 0);return t&&i.tb(t),e&&i.rb(e),n&&i.sb(n),r&&i.ec(r),i}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return this.gb&&Q(this.gb,function(t,e){n.l(e,t)}),t=this.aa,e=this.Kc,t&&e&&n.l(t,e),n.l("VER",this.tc),this.Ya(n),n},r.Jb=function(t){if(t&&!this.gc)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new sn(this.Xa)).Je(this.gc),t},r.Ba=function(){return!!this.i&&this.i.Ba()},r.fc=function(){return this.gc},(r=mn.prototype).sc=null,r.wd=function(){},r.ud=function(){},r.td=function(){},r.sd=function(){},r.Ba=function(){return!0},r.Ue=function(){},r.$a=function(t){return t},yn.prototype.cf=function(t,e){return new vn(t,e)},S(vn,Lt),(r=vn.prototype).addEventListener=function(t,e,n,r){vn.L.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){vn.L.removeEventListener.call(this,t,e,n,r)},r.open=function(){this.b.Ee(this.vd),this.Og&&this.b.Hg(),this.b.connect(this.Qg,this.yb,this.Rc||void 0)},r.close=function(){this.b.disconnect()},r.send=function(t){if(s(t)){var e={};e.__data__=t,this.b.Zc(e)}else this.zg?((e={}).__data__=qt(t),this.b.Zc(e)):this.b.Zc(t)},r.F=function(){this.b.Ee(null),delete this.vd,this.b.disconnect(),delete this.b,vn.L.F.call(this)},S(gn,Re),S(bn,De),S(_n,mn),_n.prototype.wd=function(){pe(this.b.s,"WebChannel opened on "+this.b.yb),this.b.dispatchEvent("a")},_n.prototype.ud=function(t){this.b.dispatchEvent(new gn(t))},_n.prototype.td=function(t){pe(this.b.s,"WebChannel aborted on "+this.b.yb+" due to channel error: "+t),this.b.dispatchEvent(new bn(t))},_n.prototype.sd=function(){pe(this.b.s,"WebChannel closed on "+this.b.yb),this.b.dispatchEvent("b")};var wn=_(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},yn);function Sn(){this.V=[],this.Z=[]}function En(t,e){if(C.call(this),this.oe=t||0,this.Wb=e||10,this.oe>this.Wb)throw Error(Tn);this.fa=new Sn,this.oa=new Ye,this.Ac=0,this.Nc=null,this.Cb()}(r=Sn.prototype).Vf=function(){0==this.V.length&&(this.V=this.Z,this.V.reverse(),this.Z=[])},r.enqueue=function(t){this.Z.push(t)},r.ab=function(){return this.Vf(),this.V.pop()},r.C=function(){return this.V.length+this.Z.length},r.X=function(){return 0==this.V.length&&0==this.Z.length},r.clear=function(){this.V=[],this.Z=[]},r.contains=function(t){return 0<=A(this.V,t)||0<=A(this.Z,t)},r.remove=function(t){var e=this.V,n=R(e,t);return 0<=n?(Array.prototype.splice.call(e,n,1),e=!0):e=!1,e||k(this.Z,t)},r.H=function(){for(var t=[],e=this.V.length-1;0<=e;--e)t.push(this.V[e]);var n=this.Z.length;for(e=0;e<n;++e)t.push(this.Z[e]);return t},S(En,C);var Tn="[goog.structs.Pool] Min can not be greater than max";function Cn(t,e){this.fe=t,this.gd=e}function xn(t){this.Y=[],t&&this.Lf(t)}function In(){xn.call(this)}function An(t,e){this.Gd=void 0,this.cc=new In,En.call(this,t,e)}function Rn(t,e,n,r){this.Jf=t,this.Ab=!!r,An.call(this,e,n)}(r=En.prototype).Mb=function(){var t=w();if(!(null!=this.Nc&&t-this.Nc<this.Ac)){var e=this.qg();return e&&(this.Nc=t,this.oa.add(e)),e}},r.og=function(t){return!!this.oa.remove(t)&&(this.nc(t),!0)},r.qg=function(){for(var t;0<this.Td()&&(t=this.fa.ab(),!this.Sc(t));)this.Cb();return!t&&this.C()<this.Wb&&(t=this.xc()),t},r.nc=function(t){this.oa.remove(t),this.Sc(t)&&this.C()<this.Wb?this.fa.enqueue(t):this.Bc(t)},r.Cb=function(){for(var t=this.fa;this.C()<this.oe;)t.enqueue(this.xc());for(;this.C()>this.Wb&&0<this.Td();)this.Bc(t.ab())},r.xc=function(){return{}},r.Bc=function(t){if("function"==typeof t.bb)t.bb();else for(var e in t)t[e]=null},r.Sc=function(t){return"function"!=typeof t.Ye||t.Ye()},r.contains=function(t){return this.fa.contains(t)||this.oa.contains(t)},r.C=function(){return this.fa.C()+this.oa.C()},r.rf=function(){return this.oa.C()},r.Td=function(){return this.fa.C()},r.X=function(){return this.fa.X()&&this.oa.X()},r.F=function(){if(En.L.F.call(this),0<this.rf())throw Error("[goog.structs.Pool] Objects not released");delete this.oa;for(var t=this.fa;!t.X();)this.Bc(t.ab());delete this.fa},Cn.prototype.getKey=function(){return this.fe},Cn.prototype.clone=function(){return new Cn(this.fe,this.gd)},(r=xn.prototype).ce=function(t,e){var n=this.Y;n.push(new Cn(t,e)),this.$f(n.length-1)},r.Lf=function(t){if(t instanceof xn){var e=t.W();if(t=t.H(),0>=this.C()){for(var n=this.Y,r=0;r<e.length;r++)n.push(new Cn(e[r],t[r]));return}}else e=z(t),t=H(t);for(r=0;r<e.length;r++)this.ce(e[r],t[r])},r.remove=function(){var t=this.Y,e=t.length,n=t[0];if(!(0>=e))return 1==e?O(t):(t[0]=t.pop(),this.Zf()),n.gd},r.Zf=function(){for(var t=0,e=this.Y,n=e.length,r=e[t];t<n>>1;){var i=this.tf(t),o=this.zf(t);if(e[i=o<n&&e[o].getKey()<e[i].getKey()?o:i].getKey()>r.getKey())break;e[t]=e[i],t=i}e[t]=r},r.$f=function(t){for(var e=this.Y,n=e[t];0<t;){var r=this.wf(t);if(!(e[r].getKey()>n.getKey()))break;e[t]=e[r],t=r}e[t]=n},r.tf=function(t){return 2*t+1},r.zf=function(t){return 2*t+2},r.wf=function(t){return t-1>>1},r.H=function(){for(var t=this.Y,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].gd);return e},r.W=function(){for(var t=this.Y,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].getKey());return e},r.va=function(t){return N(this.Y,function(e){return e.getKey()==t})},r.clone=function(){return new xn(this)},r.C=function(){return this.Y.length},r.X=function(){return 0==this.Y.length},r.clear=function(){O(this.Y)},S(In,xn),In.prototype.enqueue=function(t,e){this.ce(t,e)},In.prototype.ab=function(){return this.remove()},S(An,En),(r=An.prototype).Mb=function(t,e){if(!t)return(t=An.L.Mb.call(this))&&this.Ac&&(this.Gd=a.setTimeout(b(this.Nb,this),this.Ac)),t;this.cc.enqueue(void 0!==e?e:100,t),this.Nb()},r.Nb=function(){for(var t=this.cc;0<t.C();){var e=this.Mb();if(!e)break;t.ab().apply(this,[e])}},r.nc=function(t){An.L.nc.call(this,t),this.Nb()},r.Cb=function(){An.L.Cb.call(this),this.Nb()},r.F=function(){An.L.F.call(this),a.clearTimeout(this.Gd),this.cc.clear(),this.cc=null},S(Rn,An),Rn.prototype.xc=function(){var t=new sn,e=this.Jf;return e&&e.forEach(function(e,n){t.headers.set(n,e)}),this.Ab&&t.Je(!0),t},Rn.prototype.Sc=function(t){return!t.Ka&&!t.Ba()},yn.prototype.createWebChannel=yn.prototype.cf,vn.prototype.send=vn.prototype.send,vn.prototype.open=vn.prototype.open,vn.prototype.close=vn.prototype.close,Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,Te.COMPLETE="complete",xe.EventType=Ae,Ae.OPEN="a",Ae.CLOSE="b",Ae.ERROR="c",Ae.MESSAGE="d",Lt.prototype.listen=Lt.prototype.nb,Rn.prototype.getObject=Rn.prototype.Mb,Rn.prototype.releaseObject=Rn.prototype.og,sn.prototype.listenOnce=sn.prototype.Oc,sn.prototype.getLastError=sn.prototype.Hc,sn.prototype.getLastErrorCode=sn.prototype.Ud,sn.prototype.getStatus=sn.prototype.za,sn.prototype.getStatusText=sn.prototype.Yd,sn.prototype.getResponseJson=sn.prototype.yf,sn.prototype.getResponseText=sn.prototype.ya,sn.prototype.getResponseText=sn.prototype.ya,sn.prototype.send=sn.prototype.send;var Dn={createWebChannelTransport:wn,ErrorCode:Ee,EventType:Te,WebChannel:xe,XhrIoPool:Rn},Nn=Dn.createWebChannelTransport,On=Dn.ErrorCode,kn=Dn.EventType,Pn=Dn.WebChannel,Fn=Dn.XhrIoPool;e.default=Dn}.call(e,n(4))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={apiKey:"AIzaSyAmbhIrrXG990Wvx2fX7_DO2Q94CraOIDY",authDomain:"firestore-algolia.firebaseapp.com",databaseURL:"https://firestore-algolia.firebaseio.com",projectId:"firestore-algolia",storageBucket:"firestore-algolia.appspot.com",messagingSenderId:"547022362725",timestampsInSnapshots:!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(179);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return(t=r,t&&t.__esModule?t:{default:t}).default;var t}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(94),i=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var a=n(182);var s=function(t){n(180)},u=n(89)(i.a,a.a,!1,s,null,null);e.default=u.exports},function(t,e,n){var r=n(181);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(88)("b0299d82",r,!0,{})},function(t,e,n){(t.exports=n(87)(!1)).push([t.i,".search-result__item-title{width:100%;margin-top:0;line-height:1}.search-result__item-image{object-fit:contain;height:130px;margin:20px}.search-result__item-info{display:flex}.search-result__item-meta{flex-direction:column;display:flex;text-align:left;margin:20px}",""])},function(t,e,n){"use strict";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.data.movies?n("div",{staticClass:"search-result__item-info"},[n("img",{staticClass:"search-result__item-image",attrs:{src:t.data.movies.poster,alt:t.data.movies.name}}),t._v(" "),n("div",{staticClass:"search-result__item-meta"},[n("h2",{staticClass:"search-result__item-title"},[t._v("\n      "+t._s(t.data.movies.name)+"\n    ")]),t._v(" "),n("span",[t._v("Director: "+t._s(t.data.movies.director))]),t._v(" "),n("span",[t._v("Stars: "+t._s(t.data.movies.stars))]),t._v(" "),n("span",[t._v("Genre: "+t._s(t.data.movies.genre))]),t._v(" "),n("span",[t._v("Metascore: "+t._s(t.data.movies.metascore))])])]):t._e()},staticRenderFns:[]};e.a=r},function(t,e,n){"use strict";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("ais-index",{attrs:{"app-id":t.appId,"api-key":t.apiKey,"index-name":"movie_title"}},[n("ais-search-box"),t._v(" "),n("ais-results",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.result;return[n("div",{staticClass:"search-result__item"},[r?n("search-result",{key:r.objectID,attrs:{resultID:r.objectID}}):t._e()],1)]}}])})],1)],1)},staticRenderFns:[]};e.a=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Component",function(){return T}),n.d(e,"FACET_AND",function(){return f}),n.d(e,"FACET_OR",function(){return p}),n.d(e,"FACET_TREE",function(){return d}),n.d(e,"createFromAlgoliaCredentials",function(){return m}),n.d(e,"createFromAlgoliaClient",function(){return y}),n.d(e,"createFromSerialized",function(){return v}),n.d(e,"Store",function(){return g}),n.d(e,"Index",function(){return C}),n.d(e,"Highlight",function(){return I}),n.d(e,"Snippet",function(){return A}),n.d(e,"Input",function(){return R}),n.d(e,"Results",function(){return D}),n.d(e,"Stats",function(){return N}),n.d(e,"Pagination",function(){return O}),n.d(e,"ResultsPerPageSelector",function(){return k}),n.d(e,"TreeMenu",function(){return P}),n.d(e,"Menu",function(){return F}),n.d(e,"SortBySelector",function(){return M}),n.d(e,"SearchBox",function(){return L}),n.d(e,"Clear",function(){return j}),n.d(e,"Rating",function(){return q}),n.d(e,"RangeInput",function(){return B}),n.d(e,"NoResults",function(){return U}),n.d(e,"RefinementList",function(){return V}),n.d(e,"PriceRange",function(){return Q}),n.d(e,"PoweredBy",function(){return H});var r=n(185),i=n.n(r),o=n(206),a=n.n(o),s=n(363),u=n.n(s),c=function(t,e,n,r,i){if(h(t))return Object.assign({},t,{value:u()(t.value).replace(new RegExp(e,"g"),r).replace(new RegExp(n,"g"),i)});if(Array.isArray(t)){var o=[];return t.forEach(function(t){o.push(c(t,e,n,r,i))}),o}if(l(t)){var a={};return Object.keys(t).forEach(function(o){a[o]=c(t[o],e,n,r,i)}),a}return t},h=function(t){return l(t)&&"matchLevel"in t&&"value"in t},l=function(t){return"object"==typeof t&&null!==t},f="and",p="or",d="tree",m=function(t,e,n){var r=i()(t,e),o=a()(r);return new g(o,n)},y=function(t,e){var n=a()(t);return new g(n,e)},v=function(t,e){var n=function(t){var e=i()(t.appId,t.apiKey),n=a()(e,t.searchParameters.index,t.searchParameters);return t.response&&(n.lastResults=new a.a.SearchResults(n.state,t.response)),n}(t.helper),r=new g(n,e);return r.highlightPreTag=t.highlightPreTag,r.highlightPostTag=t.highlightPostTag,r},g=function(t,e){void 0===e&&(e={});var n=e.stalledSearchDelay;if(void 0===n&&(n=200),!(t instanceof a.a.AlgoliaSearchHelper))throw new TypeError("Store should be constructed with an AlgoliaSearchHelper instance as first parameter.");this._stoppedCounter=1,this._highlightPreTag="<em>",this._highlightPostTag="</em>",this._cacheEnabled=!0,this._stalledSearchDelay=n,this.algoliaHelper=t},b={algoliaHelper:{},isSearchStalled:{},highlightPreTag:{},highlightPostTag:{},algoliaClient:{},algoliaApiKey:{},algoliaAppId:{},indexName:{},resultsPerPage:{},results:{},page:{},totalPages:{},userData:{},totalResults:{},processingTimeMS:{},maxValuesPerFacet:{},activeRefinements:{},query:{},queryParameters:{}};b.algoliaHelper.set=function(t){this._helper&&(this._helper.removeListener("change",w),this._helper.removeListener("result",S),this._helper.removeListener("search",E)),this._helper=t;var e=this._helper.getPage();this._helper.setQueryParameter("highlightPreTag","__ais-highlight__"),this._helper.setQueryParameter("highlightPostTag","__/ais-highlight__"),this._helper.setPage(e),this._helper.lastResults?S.apply(this,[this._helper.lastResults]):this._results=[],this._helper.on("change",w.bind(this)),this._helper.on("result",S.bind(this)),this._helper.on("search",E.bind(this));var n=this._helper.getClient();"function"==typeof n.addAlgoliaAgent&&n.addAlgoliaAgent("vue-instantsearch 1.7.0"),this._stalledSearchTimer=null,this.isSearchStalled=!0},b.isSearchStalled.get=function(){return this._isSearchStalled},b.isSearchStalled.set=function(t){this._isSearchStalled=t},b.algoliaHelper.get=function(){return this._helper},b.highlightPreTag.get=function(){return this._highlightPreTag},b.highlightPreTag.set=function(t){this._highlightPreTag=t},b.highlightPostTag.get=function(){return this._highlightPostTag},b.highlightPostTag.set=function(t){this._highlightPostTag=t},b.algoliaClient.set=function(t){this._helper.setClient(t),w()},b.algoliaClient.get=function(){return this._helper.getClient()},b.algoliaApiKey.get=function(){return this.algoliaClient.apiKey},b.algoliaAppId.get=function(){return this.algoliaClient.applicationID},g.prototype.start=function(){this._stoppedCounter<1?this._stoppedCounter=0:this._stoppedCounter--},g.prototype.stop=function(){this._stoppedCounter++},b.indexName.set=function(t){this._helper.setIndex(t)},b.indexName.get=function(){return this._helper.getIndex()},b.resultsPerPage.set=function(t){this._helper.setQueryParameter("hitsPerPage",t)},b.resultsPerPage.get=function(){var t=this._helper.getQueryParameter("hitsPerPage");return t||(this._helper.lastResults?this._helper.lastResults.hitsPerPage:0)},b.results.get=function(){return this._results},b.page.get=function(){return this._helper.getPage()+1},b.page.set=function(t){this._helper.setPage(t-1)},b.totalPages.get=function(){return this._helper.lastResults?this._helper.lastResults.nbPages:0},b.userData.get=function(){if(this._helper.lastResults)return this._helper.lastResults.userData},b.totalResults.get=function(){return this._helper.lastResults?this._helper.lastResults.nbHits:0},b.processingTimeMS.get=function(){return this._helper.lastResults?this._helper.lastResults.processingTimeMS:0},b.maxValuesPerFacet.set=function(t){var e=this._helper.state.maxValuesPerFacet||0;this._helper.setQueryParameter("maxValuesPerFacet",Math.max(e,t))},g.prototype.addFacet=function(t,e){if(void 0===e&&(e=f),!this.hasFacet(t,e)){this.stop();var n=null;e===f?this._helper.state.isConjunctiveFacet(t)||(this.removeFacet(t),n=this._helper.state.addFacet(t)):e===p?this._helper.state.isDisjunctiveFacet(t)||(this.removeFacet(t),n=this._helper.state.addDisjunctiveFacet(t)):e===d&&(this._helper.state.isHierarchicalFacet(t.name)||(this.removeFacet(t.name),n=this._helper.state.addHierarchicalFacet(t))),null!==n&&this._helper.setState(n),this.start(),this.refresh()}},g.prototype.removeFacet=function(t){var e=null;if(this._helper.state.isConjunctiveFacet(t))e=this._helper.state.removeFacet(t);else if(this._helper.state.isDisjunctiveFacet(t))e=this._helper.state.removeDisjunctiveFacet(t);else{if(!this._helper.state.isHierarchicalFacet(t))return;e=this._helper.state.removeHierarchicalFacet(t)}this._helper.setState(e)},g.prototype.hasFacet=function(t,e){switch(void 0===e&&(e=f),_(e),e){case f:return this._helper.state.isConjunctiveFacet(t);case p:return this._helper.state.isDisjunctiveFacet(t);case d:return this._helper.state.isHierarchicalFacet(t);default:throw new TypeError(e+" could not be handled.")}},g.prototype.addFacetRefinement=function(t,e){this._helper.state.isConjunctiveFacet(t)?this._helper.addFacetRefinement(t,e):this._helper.state.isDisjunctiveFacet(t)?this._helper.addDisjunctiveFacetRefinement(t,e):this._helper.state.isHierarchicalFacet(t)&&this._helper.addHierarchicalFacetRefinement(t,e)},g.prototype.toggleFacetRefinement=function(t,e){this._helper.toggleRefinement(t,e)},g.prototype.clearRefinements=function(t){this._helper.clearRefinements(t)},g.prototype.getFacetValues=function(t,e,n){if(void 0===n&&(n=-1),!this._helper.lastResults)return[];var r;try{r=this._helper.lastResults.getFacetValues(t,{sortBy:e})}catch(t){r=[]}return-1===n?r:r.slice(0,n)},g.prototype.getFacetStats=function(t){return this._helper.lastResults&&this._helper.lastResults.getFacetStats(t)||{}},b.activeRefinements.get=function(){return this._helper.lastResults?this._helper.lastResults.getRefinements():[]},g.prototype.addNumericRefinement=function(t,e,n){this._helper.addNumericRefinement(t,e,n)},g.prototype.removeNumericRefinement=function(t,e,n){this._helper.removeNumericRefinement(t,e,n)},b.query.set=function(t){this._helper.state.query!==t&&this._helper.setQuery(t)},b.query.get=function(){return this._helper.state.query},b.queryParameters.get=function(){return Object.assign({},this._helper.state,{page:this.page,highlightPreTag:this.highlightPreTag,highlightPostTag:this.highlightPostTag})},b.queryParameters.set=function(t){var e=Object.assign({},t);Object.keys(e).forEach(function(t){null===e[t]&&(e[t]=void 0)}),void 0!==e.page&&(e.page=e.page-1),"highlightPreTag"in e&&(this.highlightPreTag=e.highlightPreTag,delete e.highlightPreTag),"highlightPostTag"in e&&(this.highlightPostTag=e.highlightPostTag,delete e.highlightPostTag);var n=a.a.SearchParameters.make(Object.assign({},this._helper.state,e));this._helper.setState(n)},g.prototype.serialize=function(){return{helper:function(t){if(!(t instanceof a.a.AlgoliaSearchHelper))throw new TypeError("Serialize expects an algolia helper instance.");var e=t.getClient(),n=t.lastResults?t.lastResults._rawResults:null;return{searchParameters:Object.assign({},t.state),appId:e.applicationID,apiKey:e.apiKey,response:n}}(this._helper),highlightPreTag:this.highlightPreTag,highlightPostTag:this.highlightPostTag}},g.prototype.refresh=function(){0===this._stoppedCounter&&(!1===this._cacheEnabled&&this.clearCache(),this._helper.search())},g.prototype.enableCache=function(){this._cacheEnabled=!0},g.prototype.disableCache=function(){this._cacheEnabled=!1},g.prototype.clearCache=function(){this.algoliaClient.clearCache()},g.prototype.waitUntilInSync=function(){var t=this;return new Promise(function(e,n){if(!1!==t._helper.hasPendingRequests()){var r=function(){t._helper.removeListener("error",i),t._stalledSearchTimer=null,clearTimeout(t._stalledSearchTimer),t.isSearchStalled=!1,e()},i=function(e){t._helper.removeListener("searchQueueEmpty",r),t._stalledSearchTimer=null,clearTimeout(t._stalledSearchTimer),t.isSearchStalled=!1,n(e)};t._helper.once("searchQueueEmpty",r),t._helper.once("error",i)}else e()})},Object.defineProperties(g.prototype,b);var _=function(t){if(t!==f&&t!==p&&t!==d)throw new Error("Invalid facet type "+t+".")},w=function(){this.refresh()},S=function(t){this._results=function(t,e,n,r,i){if(void 0===r&&(r="<em>"),void 0===i&&(i="</em>"),!Array.isArray(t))throw new TypeError("Results should be provided as an array.");if("string"!=typeof e||"string"!=typeof n)throw new TypeError("safePreTag and safePostTag should be provided as strings.");for(var o=[],a=0,s=t;a<s.length;a+=1){var u=s[a];"_highlightResult"in u&&(u._highlightResult=c(u._highlightResult,e,n,r,i)),"_snippetResult"in u&&(u._snippetResult=c(u._snippetResult,e,n,r,i)),o.push(u)}return o}(t.hits,"__ais-highlight__","__/ais-highlight__",this.highlightPreTag,this.highlightPostTag),this._helper.hasPendingRequests()||(clearTimeout(this._stalledSearchTimer),this._stalledSearchTimer=null,this.isSearchStalled=!1)},E=function(){var t=this;this._stalledSearchTimer||(this._stalledSearchTimer=setTimeout(function(){t.isSearchStalled=!0},this._stalledSearchDelay))},T={inject:["_searchStore"],props:{searchStore:{type:Object,default:function(){if("object"!=typeof this._searchStore){var t=this.$options._componentTag;throw new TypeError('It looks like you forgot to wrap your Algolia search component \n            "<'+t+'>" inside of an "<ais-index>" component. You can also pass a \n            search store as a prop to your component.')}return this._searchStore}},classNames:{type:Object,default:function(){return{}}}},beforeCreate:function(){for(var t=this;t&&!(t._provided&&"_searchStore"in t._provided);)t=t.$parent;t||(this._provided||(this._provided={}),this._provided._searchStore=void 0)},methods:{bem:function(t,e,n){if(!this.blockClassName)throw new Error("You need to provide 'blockClassName' in your data.");var r=this.blockClassName;if(!t&&!e)return this.customClassName(r);if(!t){var i=r+"--"+e;return this.customClassName(i)}var o=r+"__"+t;if(!e)return this.customClassName(o);var a=o+"--"+e;return void 0!==n&&!1===n?this.customClassName(a):this.customClassName(o)+" "+this.customClassName(a)},customClassName:function(t){return this.classNames[t]?this.classNames[t]:t}}},C={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.bem()},[this._t("default")],2)},staticRenderFns:[],mixins:[T],props:{searchStore:{type:Object,default:function(){return this._searchStore}},searchClient:{type:Object},apiKey:{type:String,default:function(){if(this._searchStore)return this._searchStore.algoliaApiKey}},appId:{type:String,default:function(){if(this._searchStore)return this._searchStore.algoliaAppId}},indexName:{type:String,default:function(){if(this._searchStore)return this._searchStore.indexName}},query:{type:String,default:""},queryParameters:{type:Object},cache:{type:Boolean,default:!0},autoSearch:{type:Boolean,default:!0},stalledSearchDelay:{type:Number,default:200}},data:function(){return{blockClassName:"ais-index"}},provide:function(){if(this.searchClient){if(!this.indexName)throw new Error("vue-instantsearch: `indexName` is required with `searchClient`");if(this.searchStore)throw new Error("`searchStore` cannot be used with `searchClient`");if(this.appId)throw new Error("vue-instantsearch: `appId` cannot be used with `searchClient`");if(this.apiKey)throw new Error("vue-instantsearch: `apiKey` cannot be used with `searchClient`");if("function"!=typeof this.searchClient.search)throw new Error("vue-instantsearch: `searchClient` must implement a method `search(requests)`");this._localSearchStore=y(this.searchClient)}else this.searchStore?this._localSearchStore=this.searchStore:this._localSearchStore=m(this.appId,this.apiKey,{stalledSearchDelay:this.stalledSearchDelay});return this.indexName&&(this._localSearchStore.indexName=this.indexName),this.query&&(this._localSearchStore.query=this.query),this.queryParameters&&(this._localSearchStore.queryParameters=this.queryParameters),this.cache?this._localSearchStore.enableCache():this._localSearchStore.disableCache(),{_searchStore:this._localSearchStore}},mounted:function(){this._localSearchStore.start(),this.autoSearch&&this._localSearchStore.refresh()},watch:{indexName:function(){this._localSearchStore.indexName=this.indexName},query:function(){this._localSearchStore.query=this.query},queryParameters:function(){this._localSearchStore.queryParameters=this.queryParameters}}},x=function(t,e){return e.split(".").reduce(function(t,e){return t&&t[e]},t)};new Set;var I={functional:!0,props:{result:{type:Object,required:!0},attributeName:{type:String,required:!0}},render:function(t,e){var n=e.props.result,r=e.props.attributeName;return t("span",{class:{"ais-highlight":!0},domProps:{innerHTML:x(n,"_highlightResult."+r+".value")}})}},A={functional:!0,props:{result:{type:Object,required:!0},attributeName:{type:String,required:!0}},render:function(t,e){var n=e.props.result,r=e.props.attributeName;return t("span",{class:{"ais-snippet":!0},domProps:{innerHTML:x(n,"_snippetResult."+r+".value")}})}},R={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],class:t.bem(),attrs:{type:"search",autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})},staticRenderFns:[],mixins:[T],data:function(){return{blockClassName:"ais-input"}},computed:{query:{get:function(){return this.searchStore.query},set:function(t){this.searchStore.stop(),this.searchStore.query=t,this.$emit("query",t),this.$nextTick(function(){this.searchStore.start(),this.searchStore.refresh()})}}}},D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{class:t.bem()},[t._t("header"),t._v(" "),t._l(t.results,function(e,n){return t._t("default",[t._v(" Result 'objectID': "+t._s(e.objectID)+" ")],{result:e,index:n})}),t._v(" "),t._t("footer")],2):t._e()},staticRenderFns:[],mixins:[T],props:{stack:{type:Boolean,default:!1},resultsPerPage:{type:Number}},data:function(){return{blockClassName:"ais-results"}},created:function(){this.updateResultsPerPage()},watch:{resultsPerPage:function(){this.updateResultsPerPage()}},methods:{updateResultsPerPage:function(){"number"==typeof this.resultsPerPage&&this.resultsPerPage>0&&(this.searchStore.resultsPerPage=this.resultsPerPage)}},computed:{results:function(){if(!1===this.stack)return this.searchStore.results;if(void 0===this.stackedResults&&(this.stackedResults=[]),1===this.searchStore.page&&(this.stackedResults=[]),0===this.stackedResults.length||0===this.searchStore.results.length)(n=this.stackedResults).push.apply(n,this.searchStore.results);else{var t=this.stackedResults[this.stackedResults.length-1],e=this.searchStore.results[this.searchStore.results.length-1];t.objectID!==e.objectID&&(r=this.stackedResults).push.apply(r,this.searchStore.results)}return this.stackedResults;var n,r},show:function(){return this.results.length>0}}},N={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.totalResults>0?n("div",{class:t.bem()},[t._t("default",[t._v(" "+t._s(t.totalResults.toLocaleString())+" results found in "+t._s(t.processingTime.toLocaleString())+"ms ")],{totalResults:t.totalResults,processingTime:t.processingTime,query:t.query,resultStart:t.resultStart,resultEnd:t.resultEnd})],2):t._e()},staticRenderFns:[],mixins:[T],data:function(){return{blockClassName:"ais-stats"}},computed:{query:function(){return this.searchStore.query},totalResults:function(){return this.searchStore.totalResults},processingTime:function(){return this.searchStore.processingTimeMS},resultStart:function(){return(this.searchStore.page-1)*this.searchStore.resultsPerPage+1},resultEnd:function(){return this.resultStart+this.searchStore.results.length-1}}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{directives:[{name:"show",rawName:"v-show",value:t.totalResults>0,expression:"totalResults > 0"}],class:t.bem()},[n("li",{class:[t.bem("item","first"),1===t.page?t.bem("item","disabled",!1):""]},[n("a",{class:t.bem("link"),attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.goToFirstPage(e)}}},[t._t("first",[t._v("<<")])],2)]),t._v(" "),n("li",{class:[t.bem("item","previous"),1===t.page?t.bem("item","disabled",!1):""]},[n("a",{class:t.bem("link"),attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.goToPreviousPage(e)}}},[t._t("previous",[t._v("<")])],2)]),t._v(" "),t._l(t.pages,function(e){return n("li",{key:e,class:[t.bem("item"),t.page===e?t.bem("item","active",!1):""]},[n("a",{class:t.bem("link"),attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.goToPage(e)}}},[t._t("default",[t._v(" "+t._s(e)+" ")],{value:e,active:e===t.page})],2)])}),t._v(" "),n("li",{class:[t.bem("item","next"),t.page>=t.totalPages?t.bem("item","disabled",!1):""]},[n("a",{class:t.bem("link"),attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.goToNextPage(e)}}},[t._t("next",[t._v(">")])],2)]),t._v(" "),n("li",{class:[t.bem("item","last"),t.page>=t.totalPages?t.bem("item","disabled",!1):""]},[n("a",{class:t.bem("link"),attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.goToLastPage(e)}}},[t._t("last",[t._v(">>")])],2)])],2)},staticRenderFns:[],mixins:[T],props:{padding:{type:Number,default:3,validator:function(t){return t>0}}},data:function(){return{blockClassName:"ais-pagination"}},computed:{page:function(){return this.searchStore.page},totalPages:function(){return this.searchStore.totalPages},pages:function(){var t=2*this.padding;this.totalPages-1<t&&(t=this.totalPages-1);for(var e=[this.page],n=!1,r=this.page,i=this.page;e.length<=t;)if(n=!n){if(i<=1)continue;i--,e.unshift(i)}else{if(r>=this.totalPages)continue;r++,e.push(r)}return e},totalResults:function(){return this.searchStore.totalResults}},methods:{goToPage:function(t){var e=Math.max(1,t);e=Math.min(this.totalPages,e),this.searchStore.page!==e&&(this.searchStore.page=e,this.$emit("page-change",e))},goToFirstPage:function(){this.goToPage(1)},goToPreviousPage:function(){this.goToPage(this.page-1)},goToNextPage:function(){this.goToPage(this.page+1)},goToLastPage:function(){this.goToPage(this.totalPages)}}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{directives:[{name:"model",rawName:"v-model",value:t.resultsPerPage,expression:"resultsPerPage"}],class:t.bem(),on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.resultsPerPage=e.target.multiple?n:n[0]}}},[t._l(t.options,function(e){return[n("option",{key:e,domProps:{value:e}},[t._t("default",[t._v(t._s(e))],{option:e})],2)]})],2)},staticRenderFns:[],mixins:[T],props:{options:{type:Array,default:function(){return[6,12,24]}}},data:function(){return{blockClassName:"ais-results-per-page-selector"}},computed:{resultsPerPage:{get:function(){return this.searchStore.resultsPerPage},set:function(t){this.searchStore.resultsPerPage=Number(t)}}},created:function(){-1===this.options.indexOf(this.searchStore.resultsPerPage)&&(this.searchStore.resultsPerPage=this.options[0])}},P={mixins:[T],props:{attribute:{type:String,default:"tree-menu"},attributes:{type:Array,required:!0},separator:{type:String,default:" > "},limit:{type:Number,default:10},sortBy:{default:function(){return["name:asc"]}}},data:function(){return{blockClassName:"ais-tree-menu"}},created:function(){this.searchStore.addFacet({name:this.attribute,attributes:this.attributes,separator:this.separator},d)},destroyed:function(){this.searchStore.stop(),this.searchStore.removeFacet(this.attribute),this.searchStore.start()},computed:{facetValues:function(){return this.searchStore.getFacetValues(this.attribute,this.sortBy).data||[]},show:function(){return this.facetValues.length>0}},methods:{toggleRefinement:function(t){return this.searchStore.toggleFacetRefinement(this.attribute,t.path)},_renderList:function(t,e,n){var r=this;void 0===n&&(n=!0);for(var i=[],o=function(){var e=s[a],n=[];r.$scopedSlots.default?n.push(r.$scopedSlots.default({value:e.name,count:e.count,active:e.isRefined})):n.push(t("span",{class:r.bem("value")},e.name),t("span",{class:r.bem("count")},e.count));var o=[t("a",{domProps:{href:"#"},on:{click:function(t){t.preventDefault(),r.toggleRefinement(e)}}},n)];e.isRefined&&e.data&&e.data.length>0&&o.push(r._renderList(t,e.data,!1)),i.push(t("li",{class:[r.bem("item"),e.isRefined?r.bem("item","active"):""]},o))},a=0,s=e;a<s.length;a+=1)o();return t("ul",{class:n?this.bem("list"):""},i)}},render:function(t){if(!1!==this.show){var e=[];return this.$slots.header&&e.push(this.$slots.header),e.push(this._renderList(t,this.facetValues)),this.$slots.footer&&e.push(this.$slots.footer),t("div",{class:this.bem()},e)}}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{class:t.bem()},[t._t("header"),t._v(" "),t._l(t.facetValues,function(e){return n("div",{key:e.name,class:e.isRefined?t.bem("item","active"):t.bem("item")},[n("a",{class:t.bem("link"),attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.handleClick(e.path)}}},[t._v(" "+t._s(e.name)+" "),n("span",{class:t.bem("count")},[t._v(t._s(e.count))])])])}),t._v(" "),t._t("footer")],2):t._e()},staticRenderFns:[],mixins:[T],props:{attribute:{type:String,required:!0},limit:{type:Number,default:10},sortBy:{default:function(){return["isRefined:desc","count:desc","name:asc"]}}},computed:{facetValues:function(){var t=this.searchStore.getFacetValues(this.attribute,this.sortBy).data;return Array.isArray(t)?t:[]},show:function(){return this.facetValues.length>0}},methods:{handleClick:function(t){this.searchStore.toggleFacetRefinement(this.attribute,t)}},data:function(){return{blockClassName:"ais-menu"}},created:function(){this.searchStore.stop(),this.searchStore.maxValuesPerFacet=this.limit,this.searchStore.addFacet({name:this.attribute,attributes:[this.attribute]},d),this.searchStore.start(),this.searchStore.refresh()},destroyed:function(){this.searchStore.stop(),this.searchStore.removeFacet(this.attribute),this.searchStore.start()}},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{directives:[{name:"model",rawName:"v-model",value:t.indexName,expression:"indexName"}],class:t.bem(),on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.indexName=e.target.multiple?n:n[0]}}},[t._l(t.indices,function(e){return t._t("default",[n("option",{key:e.name,domProps:{value:e.name}},[t._v(" "+t._s(e.label)+" ")])],{indexName:e.name,label:e.label})})],2)},staticRenderFns:[],mixins:[T],props:{indices:{type:Array,required:!0}},data:function(){return{blockClassName:"ais-sort-by-selector"}},computed:{indexName:{get:function(){return this.searchStore.indexName},set:function(t){this.searchStore.indexName=t}}},created:function(){var t=!1;for(var e in this.indices)this.indices[e].name===this.indexName&&(t=!0);t||(this.indexName=this.indices[0].name)}},j={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:[t.bem(),t.disabled?t.bem(null,"disabled"):""],attrs:{type:"reset",disabled:t.disabled},on:{click:function(e){e.preventDefault(),t.clear(e)}}},[t._t("default",[n("span",{class:t.bem("label")},[t._v("Clear")])])],2)},staticRenderFns:[],mixins:[T],props:{clearsQuery:{type:Boolean,required:!1,default:!0},clearsFacets:{type:Boolean,required:!1,default:!0}},data:function(){return{blockClassName:"ais-clear"}},computed:{disabled:function(){return!(this.clearsQuery&&this.searchStore.query.length>0)&&!(this.clearsFacets&&this.searchStore.activeRefinements.length>0)}},methods:{clear:function(){this.searchStore.stop(),this.clearsQuery&&this.searchStore.query.length>0&&(this.searchStore.query=""),this.clearsFacets&&this.searchStore.activeRefinements.length>0&&this.searchStore.clearRefinements(),this.searchStore.start(),this.searchStore.refresh()}}},L={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{class:t.bem("form"),attrs:{role:"search",action:""},on:{submit:function(e){e.preventDefault(),t.onFormSubmit(e)}}},[t._t("default",[n("ais-input",{attrs:{"search-store":t.searchStore,placeholder:t.placeholder,autofocus:t.autofocus,"class-names":t.classNames}}),t._v(" "),t.showLoadingIndicator?n("div",{class:t.bem("loading-indicator"),attrs:{hidden:!t.searchStore.isSearchStalled}},[t._t("loading-indicator",[n("svg",{attrs:{width:"1em",height:"1em",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#000"}},[n("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[n("g",{attrs:{transform:"translate(1 1)","stroke-width":"2"}},[n("circle",{attrs:{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}}),t._v(" "),n("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18"}},[n("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}})],1)])])])])],2):t._e(),t._v(" "),n("button",{class:t.bem("submit"),attrs:{type:"submit",hidden:t.showLoadingIndicator&&t.searchStore.isSearchStalled}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 40 40"}},[n("title",[t._v(t._s(t.submitTitle))]),t._v(" "),n("path",{attrs:{d:"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z",fillRule:"evenodd"}})])]),t._v(" "),n("ais-clear",{attrs:{"search-store":t.searchStore,"class-names":t.classNames}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"}},[n("title",[t._v(t._s(t.clearTitle))]),t._v(" "),n("path",{attrs:{d:"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z",fillRule:"evenodd"}})])])])],2)},staticRenderFns:[],mixins:[T],props:{placeholder:{type:String,default:""},submitTitle:{type:String,default:"search"},clearTitle:{type:String,default:"clear"},autofocus:{type:Boolean,default:!1},showLoadingIndicator:{type:Boolean,default:!1}},data:function(){return{blockClassName:"ais-search-box"}},methods:{onFormSubmit:function(){this.$el.querySelector("input[type=search]").blur()}},components:{AisInput:R,AisClear:j}},q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{class:t.bem()},[t._t("header"),t._v(" "),t.currentValue?n("a",{class:t.bem("clear"),attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.clear(e)}}},[t._t("clear",[t._v("Clear")])],2):t._e(),t._v(" "),t._l(t.facetValues,function(e,r){return n("div",{key:r,class:[t.bem("item"),e.isRefined?t.bem("item","active"):""]},[n("a",{attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.toggleRefinement(e)}}},[t._t("default",[t._l(t.max,function(r){return[r<=e.value?n("span",{key:r,class:t.bem("star")},[t._v("★")]):n("span",{key:r,class:t.bem("star","empty")},[t._v("☆")])]}),t._v("  & up "),n("span",{class:t.bem("count")},[t._v(t._s(e.count))])],{value:e.value,min:t.min,max:t.max,count:e.count})],2)])}),t._v(" "),t._t("footer")],2):t._e()},staticRenderFns:[],mixins:[T],props:{attributeName:{type:String,required:!0},min:{type:Number,default:1},max:{type:Number,default:5}},data:function(){return{blockClassName:"ais-rating"}},created:function(){this.searchStore.addFacet(this.attributeName,p)},destroyed:function(){this.searchStore.stop(),this.searchStore.removeFacet(this.attributeName),this.searchStore.start()},computed:{show:function(){for(var t in this.facetValues)if(this.facetValues[t].count>0)return!0;return!1},facetValues:function(){for(var t=this.searchStore.getFacetValues(this.attributeName,["name:asc"],this.max+1),e=[],n=!1,r=function(r){var i=r.toString(),o={count:0,isRefined:!1,name:i,value:r};t.forEach(function(t){t.name===i&&!n&&t.isRefined&&(n=!0,o.isRefined=!0)}),e.push(o)},i=0;i<=this.max;i++)r(i);var o=0;return(e=(e=e.reverse()).map(function(e){var n=Object.assign({},e,{count:o});return t.forEach(function(t){t.name===e.name&&(o+=t.count,n.count=o)}),n})).slice(this.min,this.max)},currentValue:function(){for(var t in this.facetValues)if(this.facetValues[t].isRefined)return this.facetValues[t].value}},methods:{toggleRefinement:function(t){if(t.isRefined)return this.searchStore.clearRefinements(this.attributeName);if(0!==t.count){this.searchStore.stop(),this.searchStore.clearRefinements(this.attributeName);for(var e=Number(t.name);e<=this.max;++e)this.searchStore.addFacetRefinement(this.attributeName,e);this.searchStore.start(),this.searchStore.refresh()}},clear:function(){this.searchStore.clearRefinements(this.attributeName)}}},B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.bem()},[t._t("header"),t._v(" "),n("form",{on:{submit:function(e){e.preventDefault(),t.onSubmit(t.refinement)}}},[n("input",{class:t.bem("input","from"),attrs:{type:"number",min:t.range.min,max:t.range.max,step:t.step,placeholder:t.rangeForRendering.min},domProps:{value:t.refinementForRendering.min},on:{input:function(e){t.refinement.min=e.target.value}}}),t._v(" "),t._t("separator",[n("span",{class:t.bem("separator")},[t._v(" to ")])]),t._v(" "),n("input",{class:t.bem("input","to"),attrs:{type:"number",min:t.range.min,max:t.range.max,step:t.step,placeholder:t.rangeForRendering.max},domProps:{value:t.refinementForRendering.max},on:{input:function(e){t.refinement.max=e.target.value}}}),t._v(" "),t._t("submit",[n("button",{class:t.bem("submit")},[t._v("Ok")])])],2),t._v(" "),t._t("footer")],2)},staticRenderFns:[],mixins:[T],props:{attributeName:{type:String,required:!0},min:{type:Number},max:{type:Number},defaultRefinement:{type:Object,default:function(){return{}}},precision:{type:Number,default:0,validator:function(t){return t>=0}}},data:function(){return{blockClassName:"ais-range-input"}},created:function(){var t,e,n=this.defaultRefinement,r=n.min,i=n.max;void 0!==r?t=r:void 0!==this.min&&(t=this.min),void 0!==i?e=i:void 0!==this.max&&(e=this.max),this.searchStore.stop(),this.searchStore.addFacet(this.attributeName,p),void 0!==t&&this.searchStore.addNumericRefinement(this.attributeName,">=",t),void 0!==e&&this.searchStore.addNumericRefinement(this.attributeName,"<=",e),this.searchStore.start(),this.searchStore.refresh()},destroyed:function(){this.searchStore.stop(),this.searchStore.removeFacet(this.attributeName),this.searchStore.start()},computed:{step:function(){return 1/Math.pow(10,this.precision)},refinement:function(){var t=this;return{min:(this.searchStore.activeRefinements.find(function(e){var n=e.attributeName,r=e.type,i=e.operator;return n===t.attributeName&&"numeric"===r&&">="===i})||{}).numericValue,max:(this.searchStore.activeRefinements.find(function(e){var n=e.attributeName,r=e.type,i=e.operator;return n===t.attributeName&&"numeric"===r&&"<="===i})||{}).numericValue}},range:function(){var t,e,n=this.min,r=this.max,i=this.searchStore.getFacetStats(this.attributeName),o=i.min,a=i.max,s=Math.pow(10,this.precision);return t=void 0!==n?n:void 0!==o?o:-1/0,e=void 0!==r?r:void 0!==a?a:1/0,{min:t!==-1/0?Math.floor(t*s)/s:t,max:e!==1/0?Math.ceil(e*s)/s:e}},rangeForRendering:function(){var t=this.range,e=t.min,n=t.max,r=e===-1/0,i=n===1/0;return{min:r||i?"":e,max:r||i?"":n}},refinementForRendering:function(){var t=this.refinement,e=t.min,n=t.max,r=this.range,i=r.min,o=r.max;return{min:void 0!==e&&e!==i?e:"",max:void 0!==n&&n!==o?n:""}}},methods:{nextValueForRefinment:function(t,e,n,r){return t||n!==r?t&&e?n:r:void 0},onSubmit:function(t){var e=t.min;void 0===e&&(e="");var n=t.max;void 0===n&&(n="");var r=this.range,i=r.min,o=r.max,a=void 0!==this.min,s=void 0!==this.max,u=""===e,c=""===n,h=u?void 0:parseFloat(e),l=c?void 0:parseFloat(n),f=this.nextValueForRefinment(a,u,i,h),p=this.nextValueForRefinment(s,c,o,l);this.searchStore.stop(),this.searchStore.removeNumericRefinement(this.attributeName,">="),void 0!==f&&this.searchStore.addNumericRefinement(this.attributeName,">=",f),this.searchStore.removeNumericRefinement(this.attributeName,"<="),void 0!==p&&this.searchStore.addNumericRefinement(this.attributeName,"<=",p),this.searchStore.start(),this.searchStore.refresh()}}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.totalResults<=0&&t.processingTime>0?n("div",{class:t.bem()},[t._t("default",[t._v(" No results matched your query "),n("strong",{class:t.bem("query")},[t._v(t._s(t.query))])],{query:t.query})],2):t._e()},staticRenderFns:[],mixins:[T],data:function(){return{blockClassName:"ais-no-results"}},computed:{totalResults:function(){return this.searchStore.totalResults},processingTime:function(){return this.searchStore.processingTimeMS},query:function(){return this.searchStore.query}}},V={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{class:t.bem()},[t._t("header"),t._v(" "),t._l(t.facetValues,function(e){return n("div",{key:e.name,class:e.isRefined?t.bem("item","active"):t.bem("item")},[n("label",{class:t.bem("label")},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.isRefined,expression:"facet.isRefined"}],class:t.bem("checkbox"),attrs:{type:"checkbox"},domProps:{value:e.name,checked:Array.isArray(e.isRefined)?t._i(e.isRefined,e.name)>-1:e.isRefined},on:{change:[function(n){var r=e.isRefined,i=n.target,o=!!i.checked;if(Array.isArray(r)){var a=e.name,s=t._i(r,a);i.checked?s<0&&(e.isRefined=r.concat([a])):s>-1&&(e.isRefined=r.slice(0,s).concat(r.slice(s+1)))}else t.$set(e,"isRefined",o)},function(n){t.toggleRefinement(e)}]}}),t._t("default",[n("span",{class:t.bem("value")},[t._v(t._s(e.name))]),t._v(" "),n("span",{class:t.bem("count")},[t._v(t._s(e.count))])],{count:e.count,active:e.isRefined,value:e.name})],2)])}),t._v(" "),t._t("footer")],2):t._e()},staticRenderFns:[],mixins:[T],props:{attributeName:{type:String,required:!0},operator:{type:String,default:p,validator:function(t){var e=t.toLowerCase();return e===p||e===f}},limit:{type:Number,default:10},sortBy:{default:function(){return["isRefined:desc","count:desc","name:asc"]}}},data:function(){return{blockClassName:"ais-refinement-list"}},created:function(){this.searchStore.addFacet(this.attributeName,this.operator)},destroyed:function(){this.searchStore.stop(),this.searchStore.removeFacet(this.attributeName),this.searchStore.start()},computed:{facetValues:function(){return this.searchStore.getFacetValues(this.attributeName,this.sortBy,this.limit)},show:function(){return this.facetValues.length>0}},methods:{toggleRefinement:function(t){return this.searchStore.toggleFacetRefinement(this.attributeName,t.name)}},watch:{operator:function(){this.searchStore.addFacet(this.attributeName,this.operator)}}},Q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],class:t.bem()},[t._t("header"),t._v(" "),"left"===t.currencyPlacement?n("span",{class:t.bem("currency","left")},[t._v(" "+t._s(t.currency)+" ")]):t._e(),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.from,expression:"from"}],class:t.bem("input","from"),attrs:{type:"number",placeholder:t.fromPlaceholder},domProps:{value:t.from},on:{input:function(e){e.target.composing||(t.from=e.target.value)}}}),t._v(" "),"right"===t.currencyPlacement?n("span",{class:t.bem("currency","right")},[t._v(" "+t._s(t.currency)+" ")]):t._e(),t._v(" "),t._t("default",[n("span",[t._v("to ")])]),t._v(" "),"left"===t.currencyPlacement?n("span",{class:t.bem("currency","left")},[t._v(" "+t._s(t.currency)+" ")]):t._e(),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.to,expression:"to"}],class:t.bem("input","to"),attrs:{type:"number",placeholder:t.toPlaceholder},domProps:{value:t.to},on:{input:function(e){e.target.composing||(t.to=e.target.value)}}}),t._v(" "),"right"===t.currencyPlacement?n("span",{class:t.bem("currency","right")},[t._v(" "+t._s(t.currency)+" ")]):t._e(),t._v(" "),t._t("footer")],2)},staticRenderFns:[],mixins:[T],props:{fromPlaceholder:{type:String,default:"min"},toPlaceholder:{type:String,default:"max"},attributeName:{type:String,required:!0},currency:{type:String,required:!1,default:"$"},currencyPlacement:{type:String,required:!1,default:"left",validator:function(t){return"left"===t||"right"===t}}},data:function(){return{blockClassName:"ais-price-range"}},computed:{show:function(){return this.from||this.to||this.searchStore.totalResults>0},from:{get:function(){for(var t in this.searchStore.activeRefinements)if(this.searchStore.activeRefinements[t].attributeName===this.attributeName&&"numeric"===this.searchStore.activeRefinements[t].type&&">"===this.searchStore.activeRefinements[t].operator)return this.searchStore.activeRefinements[t].numericValue},set:function(t){var e=Number(t);this.searchStore.stop(),this.searchStore.removeNumericRefinement(this.attributeName,">"),e>0&&this.searchStore.addNumericRefinement(this.attributeName,">",e),e>Number(this.to)&&this.searchStore.removeNumericRefinement(this.attributeName,"<"),this.searchStore.start(),this.searchStore.refresh()}},to:{get:function(){for(var t in this.searchStore.activeRefinements)if(this.searchStore.activeRefinements[t].attributeName===this.attributeName&&"numeric"===this.searchStore.activeRefinements[t].type&&"<"===this.searchStore.activeRefinements[t].operator)return this.searchStore.activeRefinements[t].numericValue},set:function(t){var e=Number(t);e<Number(this.from)||(this.searchStore.stop(),this.searchStore.removeNumericRefinement(this.attributeName,"<"),e>0&&this.searchStore.addNumericRefinement(this.attributeName,"<",e),this.searchStore.start(),this.searchStore.refresh())}}}},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.bem()},[n("a",{attrs:{href:t.algoliaUrl}},[n("svg",{attrs:{width:"130",viewBox:"0 0 130 18",xmlns:"http://www.w3.org/2000/svg"}},[n("title",[t._v("Search by Algolia")]),t._v(" "),n("defs",[n("linearGradient",{attrs:{x1:"-36.868%",y1:"134.936%",x2:"129.432%",y2:"-27.7%",id:"a"}},[n("stop",{attrs:{"stop-color":"#00AEFF",offset:"0%"}}),t._v(" "),n("stop",{attrs:{"stop-color":"#3369E7",offset:"100%"}})],1)],1),t._v(" "),n("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M59.399.022h13.299a2.372 2.372 0 0 1 2.377 2.364V15.62a2.372 2.372 0 0 1-2.377 2.364H59.399a2.372 2.372 0 0 1-2.377-2.364V2.381A2.368 2.368 0 0 1 59.399.022z",fill:"url(#a)"}}),t._v(" "),n("path",{attrs:{d:"M66.257 4.56c-2.815 0-5.1 2.272-5.1 5.078 0 2.806 2.284 5.072 5.1 5.072 2.815 0 5.1-2.272 5.1-5.078 0-2.806-2.279-5.072-5.1-5.072zm0 8.652c-1.983 0-3.593-1.602-3.593-3.574 0-1.972 1.61-3.574 3.593-3.574 1.983 0 3.593 1.602 3.593 3.574a3.582 3.582 0 0 1-3.593 3.574zm0-6.418v2.664c0 .076.082.131.153.093l2.377-1.226c.055-.027.071-.093.044-.147a2.96 2.96 0 0 0-2.465-1.487c-.055 0-.11.044-.11.104l.001-.001zm-3.33-1.956l-.312-.311a.783.783 0 0 0-1.106 0l-.372.37a.773.773 0 0 0 0 1.101l.307.305c.049.049.121.038.164-.011.181-.245.378-.479.597-.697.225-.223.455-.42.707-.599.055-.033.06-.109.016-.158h-.001zm5.001-.806v-.616a.781.781 0 0 0-.783-.779h-1.824a.78.78 0 0 0-.783.779v.632c0 .071.066.12.137.104a5.736 5.736 0 0 1 1.588-.223c.52 0 1.035.071 1.534.207a.106.106 0 0 0 .131-.104z",fill:"#FFF"}}),t._v(" "),n("path",{attrs:{d:"M102.162 13.762c0 1.455-.372 2.517-1.123 3.193-.75.676-1.895 1.013-3.44 1.013-.564 0-1.736-.109-2.673-.316l.345-1.689c.783.163 1.819.207 2.361.207.86 0 1.473-.174 1.84-.523.367-.349.548-.866.548-1.553v-.349a6.374 6.374 0 0 1-.838.316 4.151 4.151 0 0 1-1.194.158 4.515 4.515 0 0 1-1.616-.278 3.385 3.385 0 0 1-1.254-.817 3.744 3.744 0 0 1-.811-1.351c-.192-.539-.29-1.504-.29-2.212 0-.665.104-1.498.307-2.054a3.925 3.925 0 0 1 .904-1.433 4.124 4.124 0 0 1 1.441-.926 5.31 5.31 0 0 1 1.945-.365c.696 0 1.337.087 1.961.191a15.86 15.86 0 0 1 1.588.332v8.456h-.001zm-5.954-4.206c0 .893.197 1.885.592 2.299.394.414.904.621 1.528.621.34 0 .663-.049.964-.142a2.75 2.75 0 0 0 .734-.332v-5.29a8.531 8.531 0 0 0-1.413-.18c-.778-.022-1.369.294-1.786.801-.411.507-.619 1.395-.619 2.223zm16.12 0c0 .719-.104 1.264-.318 1.858a4.389 4.389 0 0 1-.904 1.52c-.389.42-.854.746-1.402.975-.548.229-1.391.36-1.813.36-.422-.005-1.26-.125-1.802-.36a4.088 4.088 0 0 1-1.397-.975 4.486 4.486 0 0 1-.909-1.52 5.037 5.037 0 0 1-.329-1.858c0-.719.099-1.411.318-1.999.219-.588.526-1.09.92-1.509.394-.42.865-.741 1.402-.97a4.547 4.547 0 0 1 1.786-.338 4.69 4.69 0 0 1 1.791.338c.548.229 1.019.55 1.402.97.389.42.69.921.909 1.509.23.588.345 1.28.345 1.999h.001zm-2.191.005c0-.921-.203-1.689-.597-2.223-.394-.539-.948-.806-1.654-.806-.707 0-1.26.267-1.654.806-.394.539-.586 1.302-.586 2.223 0 .932.197 1.558.592 2.098.394.545.948.812 1.654.812.707 0 1.26-.272 1.654-.812.394-.545.592-1.166.592-2.098h-.001zm6.962 4.707c-3.511.016-3.511-2.822-3.511-3.274L113.583.926l2.142-.338v10.003c0 .256 0 1.88 1.375 1.885v1.792h-.001zm3.774 0h-2.153V5.072l2.153-.338v9.534zm-1.079-10.542c.718 0 1.304-.578 1.304-1.291 0-.714-.581-1.291-1.304-1.291-.723 0-1.304.578-1.304 1.291 0 .714.586 1.291 1.304 1.291zm6.431 1.013c.707 0 1.304.087 1.786.262.482.174.871.42 1.156.73.285.311.488.735.608 1.182.126.447.186.937.186 1.476v5.481a25.24 25.24 0 0 1-1.495.251c-.668.098-1.419.147-2.251.147a6.829 6.829 0 0 1-1.517-.158 3.213 3.213 0 0 1-1.178-.507 2.455 2.455 0 0 1-.761-.904c-.181-.37-.274-.893-.274-1.438 0-.523.104-.855.307-1.215.208-.36.487-.654.838-.883a3.609 3.609 0 0 1 1.227-.49 7.073 7.073 0 0 1 2.202-.103c.263.027.537.076.833.147v-.349c0-.245-.027-.479-.088-.697a1.486 1.486 0 0 0-.307-.583c-.148-.169-.34-.3-.581-.392a2.536 2.536 0 0 0-.915-.163c-.493 0-.942.06-1.353.131-.411.071-.75.153-1.008.245l-.257-1.749c.268-.093.668-.185 1.183-.278a9.335 9.335 0 0 1 1.66-.142l-.001-.001zm.181 7.731c.657 0 1.145-.038 1.484-.104v-2.168a5.097 5.097 0 0 0-1.978-.104c-.241.033-.46.098-.652.191a1.167 1.167 0 0 0-.466.392c-.121.169-.175.267-.175.523 0 .501.175.79.493.981.323.196.75.289 1.293.289h.001zM84.109 4.794c.707 0 1.304.087 1.786.262.482.174.871.42 1.156.73.29.316.487.735.608 1.182.126.447.186.937.186 1.476v5.481a25.24 25.24 0 0 1-1.495.251c-.668.098-1.419.147-2.251.147a6.829 6.829 0 0 1-1.517-.158 3.213 3.213 0 0 1-1.178-.507 2.455 2.455 0 0 1-.761-.904c-.181-.37-.274-.893-.274-1.438 0-.523.104-.855.307-1.215.208-.36.487-.654.838-.883a3.609 3.609 0 0 1 1.227-.49 7.073 7.073 0 0 1 2.202-.103c.257.027.537.076.833.147v-.349c0-.245-.027-.479-.088-.697a1.486 1.486 0 0 0-.307-.583c-.148-.169-.34-.3-.581-.392a2.536 2.536 0 0 0-.915-.163c-.493 0-.942.06-1.353.131-.411.071-.75.153-1.008.245l-.257-1.749c.268-.093.668-.185 1.183-.278a8.89 8.89 0 0 1 1.66-.142l-.001-.001zm.186 7.736c.657 0 1.145-.038 1.484-.104v-2.168a5.097 5.097 0 0 0-1.978-.104c-.241.033-.46.098-.652.191a1.167 1.167 0 0 0-.466.392c-.121.169-.175.267-.175.523 0 .501.175.79.493.981.318.191.75.289 1.293.289h.001zm8.682 1.738c-3.511.016-3.511-2.822-3.511-3.274L89.461.926l2.142-.338v10.003c0 .256 0 1.88 1.375 1.885v1.792h-.001z",fill:"#182359"}}),t._v(" "),n("path",{attrs:{d:"M5.027 11.025c0 .698-.252 1.246-.757 1.644-.505.397-1.201.596-2.089.596-.888 0-1.615-.138-2.181-.414v-1.214c.358.168.739.301 1.141.397.403.097.778.145 1.125.145.508 0 .884-.097 1.125-.29a.945.945 0 0 0 .363-.779.978.978 0 0 0-.333-.747c-.222-.204-.68-.446-1.375-.725-.716-.29-1.221-.621-1.515-.994-.294-.372-.44-.82-.44-1.343 0-.655.233-1.171.698-1.547.466-.376 1.09-.564 1.875-.564.752 0 1.5.165 2.245.494l-.408 1.047c-.698-.294-1.321-.44-1.869-.44-.415 0-.73.09-.945.271a.89.89 0 0 0-.322.717c0 .204.043.379.129.524.086.145.227.282.424.411.197.129.551.299 1.063.51.577.24.999.464 1.268.671.269.208.466.442.591.704.125.261.188.569.188.924l-.001.002zm3.98 2.24c-.924 0-1.646-.269-2.167-.808-.521-.539-.782-1.281-.782-2.226 0-.97.242-1.733.725-2.288.483-.555 1.148-.833 1.993-.833.784 0 1.404.238 1.858.714.455.476.682 1.132.682 1.966v.682H7.357c.018.577.174 1.02.467 1.329.294.31.707.465 1.241.465.351 0 .678-.033.98-.099a5.1 5.1 0 0 0 .975-.33v1.026a3.865 3.865 0 0 1-.935.312 5.723 5.723 0 0 1-1.08.091l.002-.001zm-.231-5.199c-.401 0-.722.127-.964.381s-.386.625-.432 1.112h2.696c-.007-.491-.125-.862-.354-1.115-.229-.252-.544-.379-.945-.379l-.001.001zm7.692 5.092l-.252-.827h-.043c-.286.362-.575.608-.865.739-.29.131-.662.196-1.117.196-.584 0-1.039-.158-1.367-.473-.328-.315-.491-.761-.491-1.337 0-.612.227-1.074.682-1.386.455-.312 1.148-.482 2.079-.51l1.026-.032v-.317c0-.38-.089-.663-.266-.851-.177-.188-.452-.282-.824-.282-.304 0-.596.045-.876.134a6.68 6.68 0 0 0-.806.317l-.408-.902a4.414 4.414 0 0 1 1.058-.384 4.856 4.856 0 0 1 1.085-.132c.756 0 1.326.165 1.711.494.385.329.577.847.577 1.552v4.002h-.902l-.001-.001zm-1.88-.859c.458 0 .826-.128 1.104-.384.278-.256.416-.615.416-1.077v-.516l-.763.032c-.594.021-1.027.121-1.297.298s-.406.448-.406.814c0 .265.079.47.236.615.158.145.394.218.709.218h.001zm7.557-5.189c.254 0 .464.018.628.054l-.124 1.176a2.383 2.383 0 0 0-.559-.064c-.505 0-.914.165-1.227.494-.313.329-.47.757-.47 1.284v3.105h-1.262V7.218h.988l.167 1.047h.064c.197-.354.454-.636.771-.843a1.83 1.83 0 0 1 1.023-.312h.001zm4.125 6.155c-.899 0-1.582-.262-2.049-.787-.467-.525-.701-1.277-.701-2.259 0-.999.244-1.767.733-2.304.489-.537 1.195-.806 2.119-.806.627 0 1.191.116 1.692.349l-.381 1.015c-.534-.208-.974-.312-1.321-.312-1.028 0-1.542.682-1.542 2.046 0 .666.128 1.166.384 1.501.256.335.631.502 1.125.502a3.23 3.23 0 0 0 1.595-.419v1.101a2.53 2.53 0 0 1-.722.285 4.356 4.356 0 0 1-.932.086v.002zm8.277-.107h-1.268V9.506c0-.458-.092-.8-.277-1.026-.184-.226-.477-.338-.878-.338-.53 0-.919.158-1.168.475-.249.317-.373.848-.373 1.593v2.949h-1.262V4.801h1.262v2.122c0 .34-.021.704-.064 1.09h.081a1.76 1.76 0 0 1 .717-.666c.306-.158.663-.236 1.072-.236 1.439 0 2.159.725 2.159 2.175v3.873l-.001-.001zm7.649-6.048c.741 0 1.319.269 1.732.806.414.537.62 1.291.62 2.261 0 .974-.209 1.732-.628 2.275-.419.542-1.001.814-1.746.814-.752 0-1.336-.27-1.751-.811h-.086l-.231.704h-.945V4.801h1.262v1.987l-.021.655-.032.553h.054c.401-.591.992-.886 1.772-.886zm-.328 1.031c-.508 0-.875.149-1.098.448-.224.299-.339.799-.346 1.501v.086c0 .723.115 1.247.344 1.571.229.324.603.486 1.123.486.448 0 .787-.177 1.018-.532.231-.354.346-.867.346-1.536 0-1.35-.462-2.025-1.386-2.025l-.001.001zm3.244-.924h1.375l1.209 3.368c.183.48.304.931.365 1.354h.043c.032-.197.091-.436.177-.717.086-.281.541-1.616 1.364-4.004h1.364l-2.541 6.73c-.462 1.235-1.232 1.853-2.31 1.853-.279 0-.551-.03-.816-.091v-.999c.19.043.406.064.65.064.609 0 1.037-.353 1.284-1.058l.22-.559-2.385-5.941h.001z",fill:"#1D3657"}})])])])])},staticRenderFns:[],mixins:[T],props:{searchStore:{type:Object,default:function(){return this._searchStore}}},data:function(){return{blockClassName:"ais-powered-by"}},computed:{algoliaUrl:function(){return"https://www.algolia.com/?utm_source=vue-instantsearch&utm_medium=website&utm_content="+(location?location.hostname:"")+"&utm_campaign=poweredby"}}},z={Index:C,Highlight:I,Snippet:A,Input:R,Results:D,Stats:N,Pagination:O,ResultsPerPageSelector:k,TreeMenu:P,Menu:F,SortBySelector:M,SearchBox:L,Clear:j,Rating:q,RangeInput:B,NoResults:U,RefinementList:V,PriceRange:Q,PoweredBy:H,install:function(t){t.component("ais-index",C),t.component("ais-highlight",I),t.component("ais-snippet",A),t.component("ais-input",R),t.component("ais-results",D),t.component("ais-stats",N),t.component("ais-pagination",O),t.component("ais-results-per-page-selector",k),t.component("ais-tree-menu",P),t.component("ais-menu",F),t.component("ais-sort-by-selector",M),t.component("ais-search-box",L),t.component("ais-clear",j),t.component("ais-rating",q),t.component("ais-range-input",B),t.component("ais-no-results",U),t.component("ais-refinement-list",V),t.component("ais-price-range",Q),t.component("ais-powered-by",H)}};e.default=z},function(t,e,n){"use strict";var r=n(186),i=n(197);t.exports=i(r,"(lite) ")},function(t,e,n){t.exports=u;var r=n(40),i=n(187),o=n(188),a=n(194),s=Object({NODE_ENV:"production"}).RESET_APP_DATA_TIMER&&parseInt(Object({NODE_ENV:"production"}).RESET_APP_DATA_TIMER,10)||12e4;function u(t,e,i){var o=n(43)("algoliasearch"),a=n(14),s=n(41),u=n(42),h="Usage: algoliasearch(applicationID, apiKey, opts)";if(!0!==i._allowEmptyCredentials&&!t)throw new r.AlgoliaSearchError("Please provide an application ID. "+h);if(!0!==i._allowEmptyCredentials&&!e)throw new r.AlgoliaSearchError("Please provide an API key. "+h);this.applicationID=t,this.apiKey=e,this.hosts={read:[],write:[]},i=i||{},this._timeouts=i.timeouts||{connect:1e3,read:2e3,write:3e4},i.timeout&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=i.timeout);var l=i.protocol||"https:";if(/:$/.test(l)||(l+=":"),"http:"!==l&&"https:"!==l)throw new r.AlgoliaSearchError("protocol must be `http:` or `https:` (was `"+i.protocol+"`)");if(this._checkAppIdData(),i.hosts)s(i.hosts)?(this.hosts.read=a(i.hosts),this.hosts.write=a(i.hosts)):(this.hosts.read=a(i.hosts.read),this.hosts.write=a(i.hosts.write));else{var f=u(this._shuffleResult,function(e){return t+"-"+e+".algolianet.com"}),p=(!1===i.dsn?"":"-dsn")+".algolia.net";this.hosts.read=[this.applicationID+p].concat(f),this.hosts.write=[this.applicationID+".algolia.net"].concat(f)}this.hosts.read=u(this.hosts.read,c(l)),this.hosts.write=u(this.hosts.write,c(l)),this.extraHeaders={},this.cache=i._cache||{},this._ua=i._ua,this._useCache=!(void 0!==i._useCache&&!i._cache)||i._useCache,this._useRequestCache=this._useCache&&i._useRequestCache,this._useFallback=void 0===i.useFallback||i.useFallback,this._setTimeout=i._setTimeout,o("init done, %j",this)}function c(t){return function(e){return t+"//"+e.toLowerCase()}}function h(t){if(void 0===Array.prototype.toJSON)return JSON.stringify(t);var e=Array.prototype.toJSON;delete Array.prototype.toJSON;var n=JSON.stringify(t);return Array.prototype.toJSON=e,n}function l(t){var e={};for(var n in t){var r;if(Object.prototype.hasOwnProperty.call(t,n))r="x-algolia-api-key"===n||"x-algolia-application-id"===n?"**hidden for security purposes**":t[n],e[n]=r}return e}u.prototype.initIndex=function(t){return new o(this,t)},u.prototype.setExtraHeader=function(t,e){this.extraHeaders[t.toLowerCase()]=e},u.prototype.getExtraHeader=function(t){return this.extraHeaders[t.toLowerCase()]},u.prototype.unsetExtraHeader=function(t){delete this.extraHeaders[t.toLowerCase()]},u.prototype.addAlgoliaAgent=function(t){-1===this._ua.indexOf(";"+t)&&(this._ua+=";"+t)},u.prototype._jsonRequest=function(t){this._checkAppIdData();var e,o,a,s=n(43)("algoliasearch:"+t.url),u=t.additionalUA||"",c=t.cache,f=this,p=0,d=!1,m=f._useFallback&&f._request.fallback&&t.fallback;this.apiKey.length>500&&void 0!==t.body&&(void 0!==t.body.params||void 0!==t.body.requests)?(t.body.apiKey=this.apiKey,a=this._computeRequestHeaders({additionalUA:u,withApiKey:!1,headers:t.headers})):a=this._computeRequestHeaders({additionalUA:u,headers:t.headers}),void 0!==t.body&&(e=h(t.body)),s("request start");var y=[];function v(t,e,n){return f._useCache&&t&&e&&void 0!==e[n]}function g(e,n){if(v(f._useRequestCache,c,o)&&e.catch(function(){delete c[o]}),"function"!=typeof t.callback)return e.then(n);e.then(function(e){i(function(){t.callback(null,n(e))},f._setTimeout||setTimeout)},function(e){i(function(){t.callback(e)},f._setTimeout||setTimeout)})}if(f._useCache&&f._useRequestCache&&(o=t.url),f._useCache&&f._useRequestCache&&e&&(o+="_body_"+e),v(f._useRequestCache,c,o)){s("serving request from cache");var b=c[o];return g("function"!=typeof b.then?f._promise.resolve({responseText:b}):b,function(t){return JSON.parse(t.responseText)})}var _=function n(i,g){f._checkAppIdData();var b=new Date;if(f._useCache&&!f._useRequestCache&&(o=t.url),f._useCache&&!f._useRequestCache&&e&&(o+="_body_"+g.body),v(!f._useRequestCache,c,o)){s("serving response from cache");var _=c[o];return f._promise.resolve({body:JSON.parse(_),responseText:_})}if(p>=f.hosts[t.hostType].length)return!m||d?(s("could not get any response"),f._promise.reject(new r.AlgoliaSearchError("Cannot connect to the AlgoliaSearch API. Send an email to support@algolia.com to report and resolve the issue. Application id was: "+f.applicationID,{debugData:y}))):(s("switching to fallback"),p=0,g.method=t.fallback.method,g.url=t.fallback.url,g.jsonBody=t.fallback.body,g.jsonBody&&(g.body=h(g.jsonBody)),a=f._computeRequestHeaders({additionalUA:u,headers:t.headers}),g.timeouts=f._getTimeoutsForRequest(t.hostType),f._setHostIndexByType(0,t.hostType),d=!0,n(f._request.fallback,g));var w=f._getHostByType(t.hostType),S=w+g.url,E={body:g.body,jsonBody:g.jsonBody,method:g.method,headers:a,timeouts:g.timeouts,debug:s,forceAuthHeaders:g.forceAuthHeaders};return s("method: %s, url: %s, headers: %j, timeouts: %d",E.method,S,E.headers,E.timeouts),i===f._request.fallback&&s("using fallback"),i.call(f,S,E).then(function(t){var n=t&&t.body&&t.body.message&&t.body.status||t.statusCode||t&&t.body&&200;s("received response: statusCode: %s, computed statusCode: %d, headers: %j",t.statusCode,n,t.headers);var i=2===Math.floor(n/100),u=new Date;if(y.push({currentHost:w,headers:l(a),content:e||null,contentLength:void 0!==e?e.length:null,method:g.method,timeouts:g.timeouts,url:g.url,startTime:b,endTime:u,duration:u-b,statusCode:n}),i)return f._useCache&&!f._useRequestCache&&c&&(c[o]=t.responseText),{responseText:t.responseText,body:t.body};if(4!==Math.floor(n/100))return p+=1,T();s("unrecoverable error");var h=new r.AlgoliaSearchError(t.body&&t.body.message,{debugData:y,statusCode:n});return f._promise.reject(h)},function(o){s("error: %s, stack: %s",o.message,o.stack);var u=new Date;return y.push({currentHost:w,headers:l(a),content:e||null,contentLength:void 0!==e?e.length:null,method:g.method,timeouts:g.timeouts,url:g.url,startTime:b,endTime:u,duration:u-b}),o instanceof r.AlgoliaSearchError||(o=new r.Unknown(o&&o.message,o)),p+=1,o instanceof r.Unknown||o instanceof r.UnparsableJSON||p>=f.hosts[t.hostType].length&&(d||!m)?(o.debugData=y,f._promise.reject(o)):o instanceof r.RequestTimeout?(s("retrying request with higher timeout"),f._incrementHostIndex(t.hostType),f._incrementTimeoutMultipler(),g.timeouts=f._getTimeoutsForRequest(t.hostType),n(i,g)):T()});function T(){return s("retrying request"),f._incrementHostIndex(t.hostType),n(i,g)}}(f._request,{url:t.url,method:t.method,body:e,jsonBody:t.body,timeouts:f._getTimeoutsForRequest(t.hostType),forceAuthHeaders:t.forceAuthHeaders});return f._useCache&&f._useRequestCache&&c&&(c[o]=_),g(_,function(t){return t.body})},u.prototype._getSearchParams=function(t,e){if(void 0===t||null===t)return e;for(var n in t)null!==n&&void 0!==t[n]&&t.hasOwnProperty(n)&&(e+=""===e?"":"&",e+=n+"="+encodeURIComponent("[object Array]"===Object.prototype.toString.call(t[n])?h(t[n]):t[n]));return e},u.prototype._computeRequestHeaders=function(t){var e=n(13),r={"x-algolia-agent":t.additionalUA?this._ua+";"+t.additionalUA:this._ua,"x-algolia-application-id":this.applicationID};return!1!==t.withApiKey&&(r["x-algolia-api-key"]=this.apiKey),this.userToken&&(r["x-algolia-usertoken"]=this.userToken),this.securityTags&&(r["x-algolia-tagfilters"]=this.securityTags),e(this.extraHeaders,function(t,e){r[e]=t}),t.headers&&e(t.headers,function(t,e){r[e]=t}),r},u.prototype.search=function(t,e,r){var i=n(41),o=n(42);if(!i(t))throw new Error("Usage: client.search(arrayOfQueries[, callback])");"function"==typeof e?(r=e,e={}):void 0===e&&(e={});var a=this,s={requests:o(t,function(t){var e="";return void 0!==t.query&&(e+="query="+encodeURIComponent(t.query)),{indexName:t.indexName,params:a._getSearchParams(t.params,e)}})},u=o(s.requests,function(t,e){return e+"="+encodeURIComponent("/1/indexes/"+encodeURIComponent(t.indexName)+"?"+t.params)}).join("&");return void 0!==e.strategy&&(s.strategy=e.strategy),this._jsonRequest({cache:this.cache,method:"POST",url:"/1/indexes/*/queries",body:s,hostType:"read",fallback:{method:"GET",url:"/1/indexes/*",body:{params:u}},callback:r})},u.prototype.searchForFacetValues=function(t){var e=n(41),r=n(42),i="Usage: client.searchForFacetValues([{indexName, params: {facetName, facetQuery, ...params}}, ...queries])";if(!e(t))throw new Error(i);var o=this;return o._promise.all(r(t,function(t){if(!t||void 0===t.indexName||void 0===t.params.facetName||void 0===t.params.facetQuery)throw new Error(i);var e=n(14),r=n(96),a=t.indexName,s=t.params,u=s.facetName,c=r(e(s),function(t){return"facetName"===t}),h=o._getSearchParams(c,"");return o._jsonRequest({cache:o.cache,method:"POST",url:"/1/indexes/"+encodeURIComponent(a)+"/facets/"+encodeURIComponent(u)+"/query",hostType:"read",body:{params:h}})}))},u.prototype.setSecurityTags=function(t){if("[object Array]"===Object.prototype.toString.call(t)){for(var e=[],n=0;n<t.length;++n)if("[object Array]"===Object.prototype.toString.call(t[n])){for(var r=[],i=0;i<t[n].length;++i)r.push(t[n][i]);e.push("("+r.join(",")+")")}else e.push(t[n]);t=e.join(",")}this.securityTags=t},u.prototype.setUserToken=function(t){this.userToken=t},u.prototype.clearCache=function(){this.cache={}},u.prototype.setRequestTimeout=function(t){t&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=t)},u.prototype.setTimeouts=function(t){this._timeouts=t},u.prototype.getTimeouts=function(){return this._timeouts},u.prototype._getAppIdData=function(){var t=a.get(this.applicationID);return null!==t&&this._cacheAppIdData(t),t},u.prototype._setAppIdData=function(t){return t.lastChange=(new Date).getTime(),this._cacheAppIdData(t),a.set(this.applicationID,t)},u.prototype._checkAppIdData=function(){var t=this._getAppIdData(),e=(new Date).getTime();return null===t||e-t.lastChange>s?this._resetInitialAppIdData(t):t},u.prototype._resetInitialAppIdData=function(t){var e=t||{};return e.hostIndexes={read:0,write:0},e.timeoutMultiplier=1,e.shuffleResult=e.shuffleResult||function(t){var e,n,r=t.length;for(;0!==r;)n=Math.floor(Math.random()*r),e=t[r-=1],t[r]=t[n],t[n]=e;return t}([1,2,3]),this._setAppIdData(e)},u.prototype._cacheAppIdData=function(t){this._hostIndexes=t.hostIndexes,this._timeoutMultiplier=t.timeoutMultiplier,this._shuffleResult=t.shuffleResult},u.prototype._partialAppIdDataUpdate=function(t){var e=n(13),r=this._getAppIdData();return e(t,function(t,e){r[e]=t}),this._setAppIdData(r)},u.prototype._getHostByType=function(t){return this.hosts[t][this._getHostIndexByType(t)]},u.prototype._getTimeoutMultiplier=function(){return this._timeoutMultiplier},u.prototype._getHostIndexByType=function(t){return this._hostIndexes[t]},u.prototype._setHostIndexByType=function(t,e){var r=n(14)(this._hostIndexes);return r[e]=t,this._partialAppIdDataUpdate({hostIndexes:r}),t},u.prototype._incrementHostIndex=function(t){return this._setHostIndexByType((this._getHostIndexByType(t)+1)%this.hosts[t].length,t)},u.prototype._incrementTimeoutMultipler=function(){var t=Math.max(this._timeoutMultiplier+1,4);return this._partialAppIdDataUpdate({timeoutMultiplier:t})},u.prototype._getTimeoutsForRequest=function(t){return{connect:this._timeouts.connect*this._timeoutMultiplier,complete:this._timeouts[t]*this._timeoutMultiplier}}},function(t,e){t.exports=function(t,e){e(t,0)}},function(t,e,n){var r=n(95),i=n(189),o=n(190);function a(t,e){this.indexName=e,this.as=t,this.typeAheadArgs=null,this.typeAheadValueOption=null,this.cache={}}t.exports=a,a.prototype.clearCache=function(){this.cache={}},a.prototype.search=r("query"),a.prototype.similarSearch=i(r("similarQuery"),o("index.similarSearch(query[, callback])","index.search({ similarQuery: query }[, callback])")),a.prototype.browse=function(t,e,r){var i,o,a=n(191);0===arguments.length||1===arguments.length&&"function"==typeof arguments[0]?(i=0,r=arguments[0],t=void 0):"number"==typeof arguments[0]?(i=arguments[0],"number"==typeof arguments[1]?o=arguments[1]:"function"==typeof arguments[1]&&(r=arguments[1],o=void 0),t=void 0,e=void 0):"object"==typeof arguments[0]?("function"==typeof arguments[1]&&(r=arguments[1]),e=arguments[0],t=void 0):"string"==typeof arguments[0]&&"function"==typeof arguments[1]&&(r=arguments[1],e=void 0),e=a({},e||{},{page:i,hitsPerPage:o,query:t});var s=this.as._getSearchParams(e,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/browse",body:{params:s},hostType:"read",callback:r})},a.prototype.browseFrom=function(t,e){return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/browse",body:{cursor:t},hostType:"read",callback:e})},a.prototype.searchForFacetValues=function(t,e){var r=n(14),i=n(96);if(void 0===t.facetName||void 0===t.facetQuery)throw new Error("Usage: index.searchForFacetValues({facetName, facetQuery, ...params}[, callback])");var o=t.facetName,a=i(r(t),function(t){return"facetName"===t}),s=this.as._getSearchParams(a,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/facets/"+encodeURIComponent(o)+"/query",hostType:"read",body:{params:s},callback:e})},a.prototype.searchFacet=i(function(t,e){return this.searchForFacetValues(t,e)},o("index.searchFacet(params[, callback])","index.searchForFacetValues(params[, callback])")),a.prototype._search=function(t,e,n,r){return this.as._jsonRequest({cache:this.cache,method:"POST",url:e||"/1/indexes/"+encodeURIComponent(this.indexName)+"/query",body:{params:t},hostType:"read",fallback:{method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName),body:{params:t}},callback:n,additionalUA:r})},a.prototype.getObject=function(t,e,n){1!==arguments.length&&"function"!=typeof e||(n=e,e=void 0);var r="";if(void 0!==e){r="?attributes=";for(var i=0;i<e.length;++i)0!==i&&(r+=","),r+=e[i]}return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/"+encodeURIComponent(t)+r,hostType:"read",callback:n})},a.prototype.getObjects=function(t,e,r){var i=n(41),o=n(42);if(!i(t))throw new Error("Usage: index.getObjects(arrayOfObjectIDs[, callback])");var a=this;1!==arguments.length&&"function"!=typeof e||(r=e,e=void 0);var s={requests:o(t,function(t){var n={indexName:a.indexName,objectID:t};return e&&(n.attributesToRetrieve=e.join(",")),n})};return this.as._jsonRequest({method:"POST",url:"/1/indexes/*/objects",hostType:"read",body:s,callback:r})},a.prototype.as=null,a.prototype.indexName=null,a.prototype.typeAheadArgs=null,a.prototype.typeAheadValueOption=null},function(t,e){t.exports=function(t,e){var n=!1;return function(){return n||(console.warn(e),n=!0),t.apply(this,arguments)}}},function(t,e){t.exports=function(t,e){return"algoliasearch: `"+t+"` was replaced by `"+e+"`. Please see https://github.com/algolia/algoliasearch-client-javascript/wiki/Deprecated#"+t.toLowerCase().replace(/[\.\(\)]/g,"")}},function(t,e,n){var r=n(13);t.exports=function t(e){var n=Array.prototype.slice.call(arguments);return r(n,function(n){for(var r in n)n.hasOwnProperty(r)&&("object"==typeof e[r]&&"object"==typeof n[r]?e[r]=t({},e[r],n[r]):void 0!==n[r]&&(e[r]=n[r]))}),e}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Array.prototype.slice,a=n(193),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),c=s.call(function(){},"prototype"),h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(t){var e=t.constructor;return e&&e.prototype===t},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!f["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{l(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),d=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===i.call(t),o=a(t),s=e&&"[object String]"===i.call(t),f=[];if(!e&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var d=c&&n;if(s&&t.length>0&&!r.call(t,0))for(var m=0;m<t.length;++m)f.push(String(m));if(o&&t.length>0)for(var y=0;y<t.length;++y)f.push(String(y));else for(var v in t)d&&"prototype"===v||!r.call(t,v)||f.push(String(v));if(u)for(var g=function(t){if("undefined"==typeof window||!p)return l(t);try{return l(t)}catch(t){return!1}}(t),b=0;b<h.length;++b)g&&"constructor"===h[b]||!r.call(t,h[b])||f.push(h[b]);return f};d.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var t=Object.keys;Object.keys=function(e){return a(e)?t(o.call(e)):t(e)}}}else Object.keys=d;return Object.keys||d},t.exports=d},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e=r.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===r.call(t.callee)),n}},function(t,e,n){(function(e){var r,i=n(43)("algoliasearch:src/hostIndexState.js"),o="algoliasearch-client-js",a={state:{},set:function(t,e){return this.state[t]=e,this.state[t]},get:function(t){return this.state[t]||null}},s={set:function(t,n){a.set(t,n);try{var r=JSON.parse(e.localStorage[o]);return r[t]=n,e.localStorage[o]=JSON.stringify(r),r[t]}catch(e){return u(t,e)}},get:function(t){try{return JSON.parse(e.localStorage[o])[t]||null}catch(e){return u(t,e)}}};function u(t,n){return i("localStorage failed with",n),function(){try{e.localStorage.removeItem(o)}catch(t){}}(),(r=a).get(t)}function c(t,e){return 1===arguments.length?r.get(t):r.set(t,e)}function h(){try{return"localStorage"in e&&null!==e.localStorage&&(e.localStorage[o]||e.localStorage.setItem(o,JSON.stringify({})),!0)}catch(t){return!1}}r=h()?s:a,t.exports={get:c,set:c,supportsLocalStorage:h}}).call(e,n(4))},function(t,e,n){var r;function i(t){function n(){if(n.enabled){var t=n,i=+new Date,o=i-(r||i);t.diff=o,t.prev=r,t.curr=i,r=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var i=e.formatters[r];if("function"==typeof i){var o=a[u];n=i.call(t,o),a.splice(u,1),u--}return n}),e.formatArgs.call(t,a),(n.log||e.log||console.log.bind(console)).apply(t,a)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}(t),"function"==typeof e.init&&e.init(n),n}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t),e.names=[],e.skips=[];for(var n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(196),e.names=[],e.skips=[],e.formatters={}},function(t,e){var n=1e3,r=60*n,i=60*r,o=24*i,a=365.25*o;function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var u,c=typeof t;if("string"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(t);if("number"===c&&!1===isNaN(t))return e.long?s(u=t,o,"day")||s(u,i,"hour")||s(u,r,"minute")||s(u,n,"second")||u+" ms":function(t){if(t>=o)return Math.round(t/o)+"d";if(t>=i)return Math.round(t/i)+"h";if(t>=r)return Math.round(t/r)+"m";if(t>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){"use strict";var r=n(198),i=r.Promise||n(199).Promise;t.exports=function(t,e){var o=n(58),a=n(40),s=n(200),u=n(201),c=n(202);function h(t,e,r){return(r=n(14)(r||{}))._ua=r._ua||h.ua,new f(t,e,r)}e=e||"",h.version=n(205),h.ua="Algolia for vanilla JavaScript "+e+h.version,h.initPlaces=c(h),r.__algolia={debug:n(43),algoliasearch:h};var l={hasXMLHttpRequest:"XMLHttpRequest"in r,hasXDomainRequest:"XDomainRequest"in r};function f(){t.apply(this,arguments)}return l.hasXMLHttpRequest&&(l.cors="withCredentials"in new XMLHttpRequest),o(f,t),f.prototype._request=function(t,e){return new i(function(n,r){if(l.cors||l.hasXDomainRequest){t=s(t,e.headers);var i,o,u=e.body,c=l.cors?new XMLHttpRequest:new XDomainRequest,h=!1;i=setTimeout(f,e.timeouts.connect),c.onprogress=function(){h||p()},"onreadystatechange"in c&&(c.onreadystatechange=function(){!h&&c.readyState>1&&p()}),c.onload=function(){if(o)return;var t;clearTimeout(i);try{t={body:JSON.parse(c.responseText),responseText:c.responseText,statusCode:c.status,headers:c.getAllResponseHeaders&&c.getAllResponseHeaders()||{}}}catch(e){t=new a.UnparsableJSON({more:c.responseText})}t instanceof a.UnparsableJSON?r(t):n(t)},c.onerror=function(t){if(o)return;clearTimeout(i),r(new a.Network({more:t}))},c instanceof XMLHttpRequest?(c.open(e.method,t,!0),e.forceAuthHeaders&&(c.setRequestHeader("x-algolia-application-id",e.headers["x-algolia-application-id"]),c.setRequestHeader("x-algolia-api-key",e.headers["x-algolia-api-key"]))):c.open(e.method,t),l.cors&&(u&&("POST"===e.method?c.setRequestHeader("content-type","application/x-www-form-urlencoded"):c.setRequestHeader("content-type","application/json")),c.setRequestHeader("accept","application/json")),u?c.send(u):c.send()}else r(new a.Network("CORS not supported"));function f(){o=!0,c.abort(),r(new a.RequestTimeout)}function p(){h=!0,clearTimeout(i),i=setTimeout(f,e.timeouts.complete)}})},f.prototype._request.fallback=function(t,e){return t=s(t,e.headers),new i(function(n,r){u(t,e,function(t,e){t?r(t):n(e)})})},f.prototype._promise={reject:function(t){return i.reject(t)},resolve:function(t){return i.resolve(t)},delay:function(t){return new i(function(e){setTimeout(e,t)})},all:function(t){return i.all(t)}},h}},function(t,e,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(e,n(4))},function(t,e,n){(function(e,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */var r;r=function(){"use strict";function t(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,o=void 0,a=void 0,s=function(t,e){d[i]=t,d[i+1]=e,2===(i+=2)&&(a?a(m):_())};var u="undefined"!=typeof window?window:void 0,c=u||{},h=c.MutationObserver||c.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(m,1)}}var d=new Array(1e3);function m(){for(var t=0;t<i;t+=2){(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0}i=0}var y,v,g,b,_=void 0;function w(t,e){var n=this,r=new this.constructor(T);void 0===r[E]&&q(r);var i=n._state;if(i){var o=arguments[i-1];s(function(){return j(i,r,o,n._result)})}else F(n,r,t,e);return r}function S(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(T);return N(e,t),e}l?_=function(){return e.nextTick(m)}:h?(v=0,g=new h(m),b=document.createTextNode(""),g.observe(b,{characterData:!0}),_=function(){b.data=v=++v%2}):f?((y=new MessageChannel).port1.onmessage=m,_=function(){return y.port2.postMessage(0)}):_=void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(m)}:p()}catch(t){return p()}}():p();var E=Math.random().toString(36).substring(2);function T(){}var C=void 0,x=1,I=2,A={error:null};function R(t){try{return t.then}catch(t){return A.error=t,A}}function D(e,n,r){n.constructor===e.constructor&&r===w&&n.constructor.resolve===S?function(t,e){e._state===x?k(t,e._result):e._state===I?P(t,e._result):F(e,void 0,function(e){return N(t,e)},function(e){return P(t,e)})}(e,n):r===A?(P(e,A.error),A.error=null):void 0===r?k(e,n):t(r)?function(t,e,n){s(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?N(t,n):k(t,n))},function(e){r||(r=!0,P(t,e))},t._label);!r&&i&&(r=!0,P(t,i))},t)}(e,n,r):k(e,n)}function N(t,e){var n,r;t===e?P(t,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=e),null===n||"object"!==r&&"function"!==r?k(t,e):D(t,e,R(e)))}function O(t){t._onerror&&t._onerror(t._result),M(t)}function k(t,e){t._state===C&&(t._result=e,t._state=x,0!==t._subscribers.length&&s(M,t))}function P(t,e){t._state===C&&(t._state=I,t._result=e,s(O,t))}function F(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+x]=n,i[o+I]=r,0===o&&t._state&&s(M,t)}function M(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,a=0;a<e.length;a+=3)r=e[a],i=e[a+n],r?j(n,r,i,o):i(o);t._subscribers.length=0}}function j(e,n,r,i){var o=t(r),a=void 0,s=void 0,u=void 0,c=void 0;if(o){if((a=function(t,e){try{return t(e)}catch(t){return A.error=t,A}}(r,i))===A?(c=!0,s=a.error,a.error=null):u=!0,n===a)return void P(n,new TypeError("A promises callback cannot return that same promise."))}else a=i,u=!0;n._state!==C||(o&&u?N(n,a):c?P(n,s):e===x?k(n,a):e===I&&P(n,a))}var L=0;function q(t){t[E]=L++,t._state=void 0,t._result=void 0,t._subscribers=[]}var B=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(T),this.promise[E]||q(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&k(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===C&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===S){var i=R(t);if(i===w&&t._state!==C)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===U){var o=new n(T);D(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===C&&(this._remaining--,t===I?P(r,n):this._result[e]=n),0===this._remaining&&k(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;F(t,void 0,function(t){return n._settledAt(x,e,t)},function(t){return n._settledAt(I,e,t)})},t}();var U=function(){function e(t){this[E]=L++,this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){N(t,e)},function(e){P(t,e)})}catch(e){P(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return U.prototype.then=w,U.all=function(t){return new B(this,t).promise},U.race=function(t){var e=this;return r(t)?new e(function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},U.resolve=S,U.reject=function(t){var e=new this(T);return P(e,t),e},U._setScheduler=function(t){a=t},U._setAsap=function(t){s=t},U._asap=s,U.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=U},U.Promise=U,U},t.exports=r()}).call(e,n(39),n(4))},function(t,e,n){"use strict";t.exports=function(t,e){/\?/.test(t)?t+="&":t+="?";return t+r(e)};var r=n(97)},function(t,e,n){"use strict";t.exports=function(t,e,n){if("GET"!==e.method)return void n(new Error("Method "+e.method+" "+t+" is not supported by JSONP."));e.debug("JSONP: start");var o=!1,a=!1;i+=1;var s=document.getElementsByTagName("head")[0],u=document.createElement("script"),c="algoliaJSONP_"+i,h=!1;window[c]=function(t){!function(){try{delete window[c],delete window[c+"_loaded"]}catch(t){window[c]=window[c+"_loaded"]=void 0}}(),a?e.debug("JSONP: Late answer, ignoring"):(o=!0,p(),n(null,{body:t,responseText:JSON.stringify(t)}))},t+="&callback="+c,e.jsonBody&&e.jsonBody.params&&(t+="&"+e.jsonBody.params);var l=setTimeout(function(){e.debug("JSONP: Script timeout"),a=!0,p(),n(new r.RequestTimeout)},e.timeouts.complete);function f(){e.debug("JSONP: success"),h||a||(h=!0,o||(e.debug("JSONP: Fail. Script loaded but did not call the callback"),p(),n(new r.JSONPScriptFail)))}function p(){clearTimeout(l),u.onload=null,u.onreadystatechange=null,u.onerror=null,s.removeChild(u)}u.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||f()},u.onload=f,u.onerror=function(){if(e.debug("JSONP: Script error"),h||a)return;p(),n(new r.JSONPScriptError)},u.async=!0,u.defer=!0,u.src=t,s.appendChild(u)};var r=n(40),i=0},function(t,e,n){t.exports=function(t){return function(e,o,a){var s=n(14);(a=a&&s(a)||{}).hosts=a.hosts||["places-dsn.algolia.net","places-1.algolianet.com","places-2.algolianet.com","places-3.algolianet.com"],0!==arguments.length&&"object"!=typeof e&&void 0!==e||(e="",o="",a._allowEmptyCredentials=!0);var u=t(e,o,a),c=u.initIndex("places");return c.search=i("query","/1/places/query"),c.reverse=function(t,e){var n=r.encode(t);return this.as._jsonRequest({method:"GET",url:"/1/places/reverse?"+n,hostType:"read",callback:e})},c.getObject=function(t,e){return this.as._jsonRequest({method:"GET",url:"/1/places/"+encodeURIComponent(t),hostType:"read",callback:e})},c}};var r=n(203),i=n(95)},function(t,e,n){"use strict";e.decode=e.parse=n(204),e.encode=e.stringify=n(97)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var h=0;h<c;++h){var l,f,p,d,m=t[h].replace(s,"%20"),y=m.indexOf(n);y>=0?(l=m.substr(0,y),f=m.substr(y+1)):(l=m,f=""),p=decodeURIComponent(l),d=decodeURIComponent(f),r(a,p)?i(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";t.exports="3.32.0"},function(t,e,n){"use strict";var r=n(207),i=n(59),o=n(142);function a(t,e,n){return new r(t,e,n)}a.version=n(161),a.AlgoliaSearchHelper=r,a.SearchParameters=i,a.SearchResults=o,a.url=n(158),t.exports=a},function(t,e,n){"use strict";var r=n(59),i=n(142),o=n(349),a=n(351),s=n(156),u=n(157),c=n(134),h=n(19),l=n(36),f=n(10),p=n(158),d=n(161);function m(t,e,n){t.addAlgoliaAgent&&!g(t)&&t.addAlgoliaAgent("JS Helper "+d),this.setClient(t);var i=n||{};i.index=e,this.state=r.make(i),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}function y(t){if(t<0)throw new Error("Page requested below 0.");return this._change(this.state.setPage(t)),this}function v(){return this.state.page}function g(t){var e=t._ua;return!!e&&-1!==e.indexOf("JS Helper")}s.inherits(m,u.EventEmitter),m.prototype.search=function(){return this._search(),this},m.prototype.getQuery=function(){var t=this.state;return a._getHitsSearchParams(t)},m.prototype.searchOnce=function(t,e){var n=t?this.state.setQueryParameters(t):this.state,r=a._getQueries(n.index,n),o=this;if(this._currentNbQueries++,this.emit("searchOnce",n),!e)return this.client.search(r).then(function(t){return o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),{content:new i(n,t.results),state:n,_originalResponse:t}},function(t){throw o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),t});this.client.search(r).then(function(t){o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),e(null,new i(n,t.results),n)}).catch(function(t){o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),e(t,null,n)})},m.prototype.searchForFacetValues=function(t,e,n,r){var i=this.state.setQueryParameters(r||{}),o=i.isDisjunctiveFacet(t),s=a.getSearchForFacetQuery(t,e,n,i);this._currentNbQueries++;var u=this;return this.emit("searchForFacetValues",i,t,e),("function"==typeof this.client.searchForFacetValues?this.client.searchForFacetValues([{indexName:i.index,params:s}]):this.client.initIndex(i.index).searchForFacetValues(s)).then(function(e){return u._currentNbQueries--,0===u._currentNbQueries&&u.emit("searchQueueEmpty"),(e=Array.isArray(e)?e[0]:e).facetHits=h(e.facetHits,function(e){e.isRefined=o?i.isDisjunctiveFacetRefined(t,e.value):i.isFacetRefined(t,e.value)}),e},function(t){throw u._currentNbQueries--,0===u._currentNbQueries&&u.emit("searchQueueEmpty"),t})},m.prototype.setQuery=function(t){return this._change(this.state.setPage(0).setQuery(t)),this},m.prototype.clearRefinements=function(t){return this._change(this.state.setPage(0).clearRefinements(t)),this},m.prototype.clearTags=function(){return this._change(this.state.setPage(0).clearTags()),this},m.prototype.addDisjunctiveFacetRefinement=function(t,e){return this._change(this.state.setPage(0).addDisjunctiveFacetRefinement(t,e)),this},m.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},m.prototype.addHierarchicalFacetRefinement=function(t,e){return this._change(this.state.setPage(0).addHierarchicalFacetRefinement(t,e)),this},m.prototype.addNumericRefinement=function(t,e,n){return this._change(this.state.setPage(0).addNumericRefinement(t,e,n)),this},m.prototype.addFacetRefinement=function(t,e){return this._change(this.state.setPage(0).addFacetRefinement(t,e)),this},m.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},m.prototype.addFacetExclusion=function(t,e){return this._change(this.state.setPage(0).addExcludeRefinement(t,e)),this},m.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},m.prototype.addTag=function(t){return this._change(this.state.setPage(0).addTagRefinement(t)),this},m.prototype.removeNumericRefinement=function(t,e,n){return this._change(this.state.setPage(0).removeNumericRefinement(t,e,n)),this},m.prototype.removeDisjunctiveFacetRefinement=function(t,e){return this._change(this.state.setPage(0).removeDisjunctiveFacetRefinement(t,e)),this},m.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},m.prototype.removeHierarchicalFacetRefinement=function(t){return this._change(this.state.setPage(0).removeHierarchicalFacetRefinement(t)),this},m.prototype.removeFacetRefinement=function(t,e){return this._change(this.state.setPage(0).removeFacetRefinement(t,e)),this},m.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},m.prototype.removeFacetExclusion=function(t,e){return this._change(this.state.setPage(0).removeExcludeRefinement(t,e)),this},m.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},m.prototype.removeTag=function(t){return this._change(this.state.setPage(0).removeTagRefinement(t)),this},m.prototype.toggleFacetExclusion=function(t,e){return this._change(this.state.setPage(0).toggleExcludeFacetRefinement(t,e)),this},m.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},m.prototype.toggleRefinement=function(t,e){return this.toggleFacetRefinement(t,e)},m.prototype.toggleFacetRefinement=function(t,e){return this._change(this.state.setPage(0).toggleFacetRefinement(t,e)),this},m.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},m.prototype.toggleTag=function(t){return this._change(this.state.setPage(0).toggleTagRefinement(t)),this},m.prototype.nextPage=function(){return this.setPage(this.state.page+1)},m.prototype.previousPage=function(){return this.setPage(this.state.page-1)},m.prototype.setCurrentPage=y,m.prototype.setPage=y,m.prototype.setIndex=function(t){return this._change(this.state.setPage(0).setIndex(t)),this},m.prototype.setQueryParameter=function(t,e){return this._change(this.state.setPage(0).setQueryParameter(t,e)),this},m.prototype.setState=function(t){return this._change(r.make(t)),this},m.prototype.getState=function(t){return void 0===t?this.state:this.state.filter(t)},m.prototype.getStateAsQueryString=function(t){var e=t&&t.filters||["query","attribute:*"],n=this.getState(e);return p.getQueryStringFromState(n,t)},m.getConfigurationFromQueryString=p.getStateFromQueryString,m.getForeignConfigurationInQueryString=p.getUnrecognizedParametersInQueryString,m.prototype.setStateFromQueryString=function(t,e){var n=e&&e.triggerChange||!1,r=p.getStateFromQueryString(t,e),i=this.state.setQueryParameters(r);n?this.setState(i):this.overrideStateWithoutTriggeringChangeEvent(i)},m.prototype.overrideStateWithoutTriggeringChangeEvent=function(t){return this.state=new r(t),this},m.prototype.isRefined=function(t,e){if(this.state.isConjunctiveFacet(t))return this.state.isFacetRefined(t,e);if(this.state.isDisjunctiveFacet(t))return this.state.isDisjunctiveFacetRefined(t,e);throw new Error(t+" is not properly defined in this helper configuration(use the facets or disjunctiveFacets keys to configure it)")},m.prototype.hasRefinements=function(t){return!l(this.state.getNumericRefinements(t))||(this.state.isConjunctiveFacet(t)?this.state.isFacetRefined(t):this.state.isDisjunctiveFacet(t)?this.state.isDisjunctiveFacetRefined(t):!!this.state.isHierarchicalFacet(t)&&this.state.isHierarchicalFacetRefined(t))},m.prototype.isExcluded=function(t,e){return this.state.isExcludeRefined(t,e)},m.prototype.isDisjunctiveRefined=function(t,e){return this.state.isDisjunctiveFacetRefined(t,e)},m.prototype.hasTag=function(t){return this.state.isTagRefined(t)},m.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},m.prototype.getIndex=function(){return this.state.index},m.prototype.getCurrentPage=v,m.prototype.getPage=v,m.prototype.getTags=function(){return this.state.tagRefinements},m.prototype.getQueryParameter=function(t){return this.state.getQueryParameter(t)},m.prototype.getRefinements=function(t){var e=[];if(this.state.isConjunctiveFacet(t)){var n=this.state.getConjunctiveRefinements(t);h(n,function(t){e.push({value:t,type:"conjunctive"})});var r=this.state.getExcludeRefinements(t);h(r,function(t){e.push({value:t,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(t)){var i=this.state.getDisjunctiveRefinements(t);h(i,function(t){e.push({value:t,type:"disjunctive"})})}var o=this.state.getNumericRefinements(t);return h(o,function(t,n){e.push({value:t,operator:n,type:"numeric"})}),e},m.prototype.getNumericRefinement=function(t,e){return this.state.getNumericRefinement(t,e)},m.prototype.getHierarchicalFacetBreadcrumb=function(t){return this.state.getHierarchicalFacetBreadcrumb(t)},m.prototype._search=function(){var t=this.state,e=a._getQueries(t.index,t),n=[{state:t,queriesCount:e.length,helper:this}];this.emit("search",t,this.lastResults);var r=f(this.derivedHelpers,function(e){var r=e.getModifiedState(t),i=a._getQueries(r.index,r);return n.push({state:r,queriesCount:i.length,helper:e}),e.emit("search",r,e.lastResults),i}),i=e.concat(c(r)),o=this._queryId++;this._currentNbQueries++;try{this.client.search(i).then(this._dispatchAlgoliaResponse.bind(this,n,o)).catch(this._dispatchAlgoliaError.bind(this,o))}catch(t){this.emit("error",t)}},m.prototype._dispatchAlgoliaResponse=function(t,e,n){if(!(e<this._lastQueryIdReceived)){this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,0===this._currentNbQueries&&this.emit("searchQueueEmpty");var r=n.results.slice();h(t,function(t){var e=t.state,n=t.queriesCount,o=t.helper,a=r.splice(0,n),s=o.lastResults=new i(e,a);o.emit("result",s,e)})}},m.prototype._dispatchAlgoliaError=function(t,e){t<this._lastQueryIdReceived||(this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,this.emit("error",e),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},m.prototype.containsRefinement=function(t,e,n,r){return t||0!==e.length||0!==n.length||0!==r.length},m.prototype._hasDisjunctiveRefinements=function(t){return this.state.disjunctiveRefinements[t]&&this.state.disjunctiveRefinements[t].length>0},m.prototype._change=function(t){t!==this.state&&(this.state=t,this.emit("change",this.state,this.lastResults))},m.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},m.prototype.setClient=function(t){return this.client===t?this:(t.addAlgoliaAgent&&!g(t)&&t.addAlgoliaAgent("JS Helper "+d),this.client=t,this)},m.prototype.getClient=function(){return this.client},m.prototype.derive=function(t){var e=new o(this,t);return this.derivedHelpers.push(e),e},m.prototype.detachDerivedHelper=function(t){var e=this.derivedHelpers.indexOf(t);if(-1===e)throw new Error("Derived helper already detached");this.derivedHelpers.splice(e,1)},m.prototype.hasPendingRequests=function(){return this._currentNbQueries>0},t.exports=m},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(8),i=n(2),o="[object Arguments]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,e,n){var r=n(15),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(8),i=n(61),o=n(2),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(101)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(9),i=n(216),o=n(18),a=n(244),s=o(function(t){var e=r(t,a);return e.length&&e[0]===t[0]?i(e):[]});t.exports=s},function(t,e,n){var r=n(102),i=n(104),o=n(242),a=n(9),s=n(27),u=n(106),c=Math.min;t.exports=function(t,e,n){for(var h=n?o:i,l=t[0].length,f=t.length,p=f,d=Array(f),m=1/0,y=[];p--;){var v=t[p];p&&e&&(v=a(v,s(e))),m=c(v.length,m),d[p]=!n&&(e||l>=120&&v.length>=120)?new r(p&&v):void 0}v=t[0];var g=-1,b=d[0];t:for(;++g<l&&y.length<m;){var _=v[g],w=e?e(_):_;if(_=n||0!==_?_:0,!(b?u(b,w):h(y,w,n))){for(p=f;--p;){var S=d[p];if(!(S?u(S,w):h(t[p],w,n)))continue t}b&&b.push(w),y.push(_)}}return y}},function(t,e,n){var r=n(218),i=n(47),o=n(64);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(219),i=n(224),o=n(225),a=n(226),s=n(227);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(46);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e,n){var r=n(16),i=n(221),o=n(3),a=n(103),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,h=u.toString,l=c.hasOwnProperty,f=RegExp("^"+h.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:s).test(a(t))}},function(t,e,n){var r,i=n(222),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(1)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(46),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(46),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(46),i="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(48),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},function(t,e,n){var r=n(48);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(48);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(48);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(49);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(49);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(49);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(49);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){var r=n(108),i=n(109),o=n(12),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},function(t,e,n){var r=n(111);t.exports=function(t){return r(t)?t:[]}},function(t,e,n){var r=n(29),i=n(113);t.exports=function(t,e){return t&&r(t,i(e))}},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}},function(t,e,n){var r=n(7);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(t,e,n){var r=n(50);t.exports=function(t,e){var n=[];return r(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}},function(t,e,n){var r=n(250),i=n(265),o=n(122);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(51),i=n(69),o=1,a=2;t.exports=function(t,e,n,s){var u=n.length,c=u,h=!s;if(null==t)return!c;for(t=Object(t);u--;){var l=n[u];if(h&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++u<c;){var f=(l=n[u])[0],p=t[f],d=l[1];if(h&&l[2]){if(void 0===p&&!(f in t))return!1}else{var m=new r;if(s)var y=s(p,d,f,t,e,m);if(!(void 0===y?i(d,p,o|a,s,m):y))return!1}}return!0}},function(t,e,n){var r=n(47);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(47),i=n(64),o=n(63),a=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(51),i=n(115),o=n(258),a=n(261),s=n(30),u=n(0),c=n(25),h=n(44),l=1,f="[object Arguments]",p="[object Array]",d="[object Object]",m=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,y,v,g){var b=u(t),_=u(e),w=b?p:s(t),S=_?p:s(e),E=(w=w==f?d:w)==d,T=(S=S==f?d:S)==d,C=w==S;if(C&&c(t)){if(!c(e))return!1;b=!0,E=!1}if(C&&!E)return g||(g=new r),b||h(t)?i(t,e,n,y,v,g):o(t,e,w,n,y,v,g);if(!(n&l)){var x=E&&m.call(t,"__wrapped__"),I=T&&m.call(e,"__wrapped__");if(x||I){var A=x?t.value():t,R=I?e.value():e;return g||(g=new r),v(A,R,n,y,g)}}return!!C&&(g||(g=new r),a(t,e,n,y,v,g))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(15),i=n(116),o=n(17),a=n(115),s=n(259),u=n(260),c=1,h=2,l="[object Boolean]",f="[object Date]",p="[object Error]",d="[object Map]",m="[object Number]",y="[object RegExp]",v="[object Set]",g="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",S=r?r.prototype:void 0,E=S?S.valueOf:void 0;t.exports=function(t,e,n,r,S,T,C){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!T(new i(t),new i(e)));case l:case f:case m:return o(+t,+e);case p:return t.name==e.name&&t.message==e.message;case y:case g:return t==e+"";case d:var x=s;case v:var I=r&c;if(x||(x=u),t.size!=e.size&&!I)return!1;var A=C.get(t);if(A)return A==e;r|=h,C.set(t,e);var R=a(x(t),x(e),r,S,T,C);return C.delete(t),R;case b:if(E)return E.call(t)==E.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){var r=n(117),i=1,o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,s,u){var c=n&i,h=r(t),l=h.length;if(l!=r(e).length&&!c)return!1;for(var f=l;f--;){var p=h[f];if(!(c?p in e:o.call(e,p)))return!1}var d=u.get(t);if(d&&u.get(e))return d==e;var m=!0;u.set(t,e),u.set(e,t);for(var y=c;++f<l;){var v=t[p=h[f]],g=e[p];if(a)var b=c?a(g,v,p,e,t,u):a(v,g,p,t,e,u);if(!(void 0===b?v===g||s(v,g,n,a,u):b)){m=!1;break}y||(y="constructor"==p)}if(m&&!y){var _=t.constructor,w=e.constructor;_!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w)&&(m=!1)}return u.delete(t),u.delete(e),m}},function(t,e,n){var r=n(11)(n(1),"DataView");t.exports=r},function(t,e,n){var r=n(11)(n(1),"Promise");t.exports=r},function(t,e,n){var r=n(11)(n(1),"Set");t.exports=r},function(t,e,n){var r=n(121),i=n(6);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},function(t,e,n){var r=n(69),i=n(123),o=n(124),a=n(72),s=n(121),u=n(122),c=n(21),h=1,l=2;t.exports=function(t,e){return a(t)&&s(e)?u(c(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,h|l)}}},function(t,e,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=n(268)(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)}),e});t.exports=o},function(t,e,n){var r=n(269),i=500;t.exports=function(t){var e=r(t,function(t){return n.size===i&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=n(63),i="Expected a function";function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(i);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(20),i=n(24),o=n(0),a=n(26),s=n(61),u=n(21);t.exports=function(t,e,n){for(var c=-1,h=(e=r(e,t)).length,l=!1;++c<h;){var f=u(e[c]);if(!(l=null!=t&&n(t,f)))break;t=t[f]}return l||++c!=h?l:!!(h=null==t?0:t.length)&&s(h)&&a(f,h)&&(o(t)||i(t))}},function(t,e,n){var r=n(273),i=n(274),o=n(72),a=n(21);t.exports=function(t){return o(t)?r(a(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(52);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},function(t,e){t.exports=function(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}},function(t,e,n){var r=n(51),i=n(67),o=n(75),a=n(278),s=n(279),u=n(127),c=n(53),h=n(282),l=n(283),f=n(117),p=n(77),d=n(30),m=n(284),y=n(285),v=n(130),g=n(0),b=n(25),_=n(289),w=n(3),S=n(291),E=n(6),T=1,C=2,x=4,I="[object Arguments]",A="[object Function]",R="[object GeneratorFunction]",D="[object Object]",N={};N[I]=N["[object Array]"]=N["[object ArrayBuffer]"]=N["[object DataView]"]=N["[object Boolean]"]=N["[object Date]"]=N["[object Float32Array]"]=N["[object Float64Array]"]=N["[object Int8Array]"]=N["[object Int16Array]"]=N["[object Int32Array]"]=N["[object Map]"]=N["[object Number]"]=N[D]=N["[object RegExp]"]=N["[object Set]"]=N["[object String]"]=N["[object Symbol]"]=N["[object Uint8Array]"]=N["[object Uint8ClampedArray]"]=N["[object Uint16Array]"]=N["[object Uint32Array]"]=!0,N["[object Error]"]=N[A]=N["[object WeakMap]"]=!1,t.exports=function t(e,n,O,k,P,F){var M,j=n&T,L=n&C,q=n&x;if(O&&(M=P?O(e,k,P,F):O(e)),void 0!==M)return M;if(!w(e))return e;var B=g(e);if(B){if(M=m(e),!j)return c(e,M)}else{var U=d(e),V=U==A||U==R;if(b(e))return u(e,j);if(U==D||U==I||V&&!P){if(M=L||V?{}:v(e),!j)return L?l(e,s(M,e)):h(e,a(M,e))}else{if(!N[U])return P?e:{};M=y(e,U,j)}}F||(F=new r);var Q=F.get(e);if(Q)return Q;if(F.set(e,M),S(e))return e.forEach(function(r){M.add(t(r,n,O,r,e,F))}),M;if(_(e))return e.forEach(function(r,i){M.set(i,t(r,n,O,i,e,F))}),M;var H=q?L?p:f:L?keysIn:E,z=B?void 0:H(e);return i(z||e,function(r,i){z&&(r=e[i=r]),o(M,i,t(r,n,O,i,e,F))}),M}},function(t,e,n){var r=n(22),i=n(6);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(22),i=n(34);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(3),i=n(45),o=n(281),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(22),i=n(71);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(22),i=n(128);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(78),i=n(286),o=n(287),a=n(288),s=n(129),u="[object Boolean]",c="[object Date]",h="[object Map]",l="[object Number]",f="[object RegExp]",p="[object Set]",d="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",v="[object DataView]",g="[object Float32Array]",b="[object Float64Array]",_="[object Int8Array]",w="[object Int16Array]",S="[object Int32Array]",E="[object Uint8Array]",T="[object Uint8ClampedArray]",C="[object Uint16Array]",x="[object Uint32Array]";t.exports=function(t,e,n){var I=t.constructor;switch(e){case y:return r(t);case u:case c:return new I(+t);case v:return i(t,n);case g:case b:case _:case w:case S:case E:case T:case C:case x:return s(t,n);case h:return new I;case l:case d:return new I(t);case f:return o(t);case p:return new I;case m:return a(t)}}},function(t,e,n){var r=n(78);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(15),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,n){var r=n(290),i=n(27),o=n(62),a=o&&o.isMap,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(30),i=n(2),o="[object Map]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,e,n){var r=n(292),i=n(27),o=n(62),a=o&&o.isSet,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(30),i=n(2),o="[object Set]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,e,n){var r=n(20),i=n(131),o=n(294),a=n(21);t.exports=function(t,e){return e=r(e,t),null==(t=o(t,e))||delete t[a(i(e))]}},function(t,e,n){var r=n(52),i=n(132);t.exports=function(t,e){return e.length<2?t:r(t,i(e,0,-1))}},function(t,e,n){var r=n(79);t.exports=function(t){return r(t)?void 0:t}},function(t,e,n){var r=n(70),i=n(297);t.exports=function t(e,n,o,a,s){var u=-1,c=e.length;for(o||(o=i),s||(s=[]);++u<c;){var h=e[u];n>0&&o(h)?n>1?t(h,n-1,o,a,s):r(s,h):a||(s[s.length]=h)}return s}},function(t,e,n){var r=n(15),i=n(24),o=n(0),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},function(t,e,n){var r=n(299),i=1/0,o=1.7976931348623157e308;t.exports=function(t){return t?(t=r(t))===i||t===-i?(t<0?-1:1)*o:t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(3),i=n(31),o=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,h=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return o;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=u.test(t);return n||c.test(t)?h(t.slice(2),n?2:8):s.test(t)?o:+t}},function(t,e,n){var r=n(135);t.exports=function(t){return r(t)&&t!=+t}},function(t,e,n){var r=n(69);t.exports=function(t,e){return r(t,e)}},function(t,e,n){var r=n(5),i=n(7),o=n(6);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!i(e)){var u=r(n,3);e=o(e),n=function(t){return u(s[t],t,s)}}var c=t(e,n,a);return c>-1?s[u?e[c]:c]:void 0}}},function(t,e,n){var r=n(132);t.exports=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}},function(t,e,n){var r=n(28);t.exports=function(t,e){for(var n=t.length;n--&&r(e,t[n],0)>-1;);return n}},function(t,e,n){var r=n(28);t.exports=function(t,e){for(var n=-1,i=t.length;++n<i&&r(e,t[n],0)>-1;);return n}},function(t,e,n){var r=n(307),i=n(308),o=n(309);t.exports=function(t){return i(t)?o(t):r(t)}},function(t,e){t.exports=function(t){return t.split("")}},function(t,e){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return n.test(t)}},function(t,e){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[o,a,s].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),h="(?:"+[o+r+"?",r,a,s,n].join("|")+")",l=RegExp(i+"(?="+i+")|"+h+c,"g");t.exports=function(t){return t.match(l)||[]}},function(t,e,n){var r=n(51),i=n(140),o=n(112),a=n(311),s=n(3),u=n(34),c=n(141);t.exports=function t(e,n,h,l,f){e!==n&&o(n,function(o,u){if(s(o))f||(f=new r),a(e,n,u,h,t,l,f);else{var p=l?l(c(e,u),o,u+"",e,n,f):void 0;void 0===p&&(p=o),i(e,u,p)}},u)}},function(t,e,n){var r=n(140),i=n(127),o=n(129),a=n(53),s=n(130),u=n(24),c=n(0),h=n(111),l=n(25),f=n(16),p=n(3),d=n(79),m=n(44),y=n(141),v=n(312);t.exports=function(t,e,n,g,b,_,w){var S=y(t,n),E=y(e,n),T=w.get(E);if(T)r(t,n,T);else{var C=_?_(S,E,n+"",t,e,w):void 0,x=void 0===C;if(x){var I=c(E),A=!I&&l(E),R=!I&&!A&&m(E);C=E,I||A||R?c(S)?C=S:h(S)?C=a(S):A?(x=!1,C=i(E,!0)):R?(x=!1,C=o(E,!0)):C=[]:d(E)||u(E)?(C=S,u(S)?C=v(S):p(S)&&!f(S)||(C=s(E))):x=!1}x&&(w.set(E,C),b(C,E,g,_,w),w.delete(E)),r(t,n,C)}}},function(t,e,n){var r=n(22),i=n(34);t.exports=function(t){return r(t,i(t))}},function(t,e,n){var r=n(18),i=n(139);t.exports=function(t){return r(function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e})}},function(t,e,n){"use strict";var r=n(10),i=n(135),o=n(37);t.exports=function t(e){if(i(e))return e;if(o(e))return parseFloat(e);if(Array.isArray(e))return r(e,t);throw new Error("The value should be a number, a parseable string or an array of those.")}},function(t,e,n){"use strict";var r=n(19),i=n(68),o=n(10),a=n(36),s=n(55);t.exports=function(t,e){var n={},u=i(e,function(t){return-1!==t.indexOf("attribute:")}),c=o(u,function(t){return t.split(":")[1]});-1===s(c,"*")?r(c,function(e){t.isConjunctiveFacet(e)&&t.isFacetRefined(e)&&(n.facetsRefinements||(n.facetsRefinements={}),n.facetsRefinements[e]=t.facetsRefinements[e]),t.isDisjunctiveFacet(e)&&t.isDisjunctiveFacetRefined(e)&&(n.disjunctiveFacetsRefinements||(n.disjunctiveFacetsRefinements={}),n.disjunctiveFacetsRefinements[e]=t.disjunctiveFacetsRefinements[e]),t.isHierarchicalFacet(e)&&t.isHierarchicalFacetRefined(e)&&(n.hierarchicalFacetsRefinements||(n.hierarchicalFacetsRefinements={}),n.hierarchicalFacetsRefinements[e]=t.hierarchicalFacetsRefinements[e]);var r=t.getNumericRefinements(e);a(r)||(n.numericRefinements||(n.numericRefinements={}),n.numericRefinements[e]=t.numericRefinements[e])}):(a(t.numericRefinements)||(n.numericRefinements=t.numericRefinements),a(t.facetsRefinements)||(n.facetsRefinements=t.facetsRefinements),a(t.disjunctiveFacetsRefinements)||(n.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements),a(t.hierarchicalFacetsRefinements)||(n.hierarchicalFacetsRefinements=t.hierarchicalFacetsRefinements));var h=i(e,function(t){return-1===t.indexOf("attribute:")});return r(h,function(e){n[e]=t[e]}),n}},function(t,e,n){"use strict";var r=n(136),i=n(37),o=n(16),a=n(36),s=n(80),u=n(32),c=n(68),h=n(126),l={addRefinement:function(t,e,n){if(l.isRefined(t,e,n))return t;var r=""+n,i=t[e]?t[e].concat(r):[r],o={};return o[e]=i,s({},o,t)},removeRefinement:function(t,e,n){if(r(n))return l.clearRefinement(t,e);var i=""+n;return l.clearRefinement(t,function(t,n){return e===n&&i===t})},toggleRefinement:function(t,e,n){if(r(n))throw new Error("toggleRefinement should be used with a value");return l.isRefined(t,e,n)?l.removeRefinement(t,e,n):l.addRefinement(t,e,n)},clearRefinement:function(t,e,n){if(r(e))return a(t)?t:{};if(i(e))return a(t[e])?t:h(t,e);if(o(e)){var s=!1,l=u(t,function(t,r,i){var o=c(r,function(t){return!e(t,i,n)});return a(o)?s=!0:(o.length!==r.length&&(s=!0),t[i]=o),t},{});return s?l:t}},isRefined:function(t,e,i){var o=n(55),a=!!t[e]&&t[e].length>0;if(r(i)||!a)return a;var s=""+i;return-1!==o(t[e],s)}};t.exports=l},function(t,e){t.exports=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}},function(t,e,n){var r=n(5),i=n(319);t.exports=function(t,e){return t&&t.length?i(t,r(e,2)):0}},function(t,e){t.exports=function(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}},function(t,e,n){var r=n(28),i=n(7),o=n(37),a=n(35),s=n(321),u=Math.max;t.exports=function(t,e,n,c){t=i(t)?t:s(t),n=n&&!c?a(n):0;var h=t.length;return n<0&&(n=u(h+n,0)),o(t)?n<=h&&t.indexOf(e,n)>-1:!!h&&r(t,e,n)>-1}},function(t,e,n){var r=n(322),i=n(6);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){var r=n(9);t.exports=function(t,e){return r(e,function(e){return t[e]})}},function(t,e,n){var r=n(9),i=n(5),o=n(125),a=n(324),s=n(27),u=n(325),c=n(12);t.exports=function(t,e,n){var h=-1;e=r(e.length?e:[c],s(i));var l=o(t,function(t,n,i){return{criteria:r(e,function(e){return e(t)}),index:++h,value:t}});return a(l,function(t,e){return u(t,e,n)})}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(326);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,u=n.length;++i<s;){var c=r(o[i],a[i]);if(c)return i>=u?c:c*("desc"==n[i]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(31);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t==t,a=r(t),s=void 0!==e,u=null===e,c=e==e,h=r(e);if(!u&&!h&&!a&&t>e||a&&s&&c&&!u&&!h||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!h&&t<e||h&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}},function(t,e,n){var r=n(18),i=n(82),o=n(38),a=n(23),s=r(function(t,e){var n=a(e,o(s));return i(t,32,void 0,e,n)});s.placeholder={},t.exports=s},function(t,e,n){var r=n(57),i=n(1),o=1;t.exports=function(t,e,n){var a=e&o,s=r(t);return function e(){return(this&&this!==i&&this instanceof e?s:t).apply(a?n:this,arguments)}}},function(t,e,n){var r=n(65),i=n(57),o=n(146),a=n(149),s=n(38),u=n(23),c=n(1);t.exports=function(t,e,n){var h=i(t);return function i(){for(var l=arguments.length,f=Array(l),p=l,d=s(i);p--;)f[p]=arguments[p];var m=l<3&&f[0]!==d&&f[l-1]!==d?[]:u(f,d);return(l-=m.length)<n?a(t,e,o,i.placeholder,void 0,f,m,void 0,void 0,n-l):r(this&&this!==c&&this instanceof i?h:t,this,f)}}},function(t,e){t.exports=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}},function(t,e,n){var r=n(83),i=n(150),o=n(333),a=n(335);t.exports=function(t){var e=o(t),n=a[e];if("function"!=typeof n||!(e in r.prototype))return!1;if(t===n)return!0;var s=i(n);return!!s&&t===s[0]}},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(334),i=Object.prototype.hasOwnProperty;t.exports=function(t){for(var e=t.name+"",n=r[e],o=i.call(r,e)?n.length:0;o--;){var a=n[o],s=a.func;if(null==s||s==t)return a.name}return e}},function(t,e){t.exports={}},function(t,e,n){var r=n(83),i=n(151),o=n(84),a=n(0),s=n(2),u=n(336),c=Object.prototype.hasOwnProperty;function h(t){if(s(t)&&!a(t)&&!(t instanceof r)){if(t instanceof i)return t;if(c.call(t,"__wrapped__"))return u(t)}return new i(t)}h.prototype=o.prototype,h.prototype.constructor=h,t.exports=h},function(t,e,n){var r=n(83),i=n(151),o=n(53);t.exports=function(t){if(t instanceof r)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=o(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}},function(t,e){var n=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;t.exports=function(t){var e=t.match(n);return e?e[1].split(r):[]}},function(t,e){var n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;t.exports=function(t,e){var r=e.length;if(!r)return t;var i=r-1;return e[i]=(r>1?"& ":"")+e[i],e=e.join(r>2?", ":" "),t.replace(n,"{\n/* [wrapped with "+e+"] */\n")}},function(t,e,n){var r=n(67),i=n(104),o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];t.exports=function(t,e){return r(o,function(n){var r="_."+n[0];e&n[1]&&!i(t,r)&&t.push(r)}),t.sort()}},function(t,e,n){var r=n(53),i=n(26),o=Math.min;t.exports=function(t,e){for(var n=t.length,a=o(e.length,n),s=r(t);a--;){var u=e[a];t[a]=i(u,n)?s[u]:void 0}return t}},function(t,e,n){var r=n(65),i=n(57),o=n(1),a=1;t.exports=function(t,e,n,s){var u=e&a,c=i(t);return function e(){for(var i=-1,a=arguments.length,h=-1,l=s.length,f=Array(l+a),p=this&&this!==o&&this instanceof e?c:t;++h<l;)f[h]=s[h];for(;a--;)f[h++]=arguments[++i];return r(p,u?n:this,f)}}},function(t,e,n){var r=n(147),i=n(148),o=n(23),a="__lodash_placeholder__",s=1,u=2,c=4,h=8,l=128,f=256,p=Math.min;t.exports=function(t,e){var n=t[1],d=e[1],m=n|d,y=m<(s|u|l),v=d==l&&n==h||d==l&&n==f&&t[7].length<=e[8]||d==(l|f)&&e[7].length<=e[8]&&n==h;if(!y&&!v)return t;d&s&&(t[2]=e[2],m|=n&s?0:c);var g=e[3];if(g){var b=t[3];t[3]=b?r(b,g,e[4]):g,t[4]=b?o(t[3],a):e[4]}return(g=e[5])&&(b=t[5],t[5]=b?i(b,g,e[6]):g,t[6]=b?o(t[5],a):e[6]),(g=e[7])&&(t[7]=g),d&l&&(t[8]=null==t[8]?e[8]:p(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=m,t}},function(t,e,n){var r=n(18),i=n(82),o=n(38),a=n(23),s=r(function(t,e){var n=a(e,o(s));return i(t,64,void 0,e,n)});s.placeholder={},t.exports=s},function(t,e,n){var r=n(345),i=n(74),o=n(35),a=n(73);t.exports=function(t,e,n){return t=a(t),n=null==n?0:r(o(n),0,t.length),e=i(e),t.slice(n,n+e.length)==e}},function(t,e){t.exports=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}},function(t,e,n){"use strict";t.exports=function(t){return function(e,n){var l=t.hierarchicalFacets[n],f=t.hierarchicalFacetsRefinements[l.name]&&t.hierarchicalFacetsRefinements[l.name][0]||"",p=t._getHierarchicalFacetSeparator(l),d=t._getHierarchicalRootPath(l),m=t._getHierarchicalShowParentLevel(l),y=h(t._getHierarchicalFacetSortBy(l)),v=function(t,e,n,o,h){return function(l,f,p){var d=l;if(p>0){var m=0;for(d=l;m<p;)d=d&&u(d.data,{isRefined:!0}),m++}if(d){var y=function(t,e,n,r,i){return function(o,a){return(!r||0===a.indexOf(r)&&r!==a)&&(!r&&-1===a.indexOf(n)||r&&a.split(n).length-r.split(n).length==1||-1===a.indexOf(n)&&-1===e.indexOf(n)||0===e.indexOf(a)||0===a.indexOf(t+n)&&(i||0===a.indexOf(e)))}}(d.path||n,h,e,n,o);d.data=a(i(c(f.data,y),function(t,e){return function(n,i){return{name:s(r(i.split(t))),path:i,count:n,isRefined:e===i||0===e.indexOf(i+t),data:null}}}(e,h)),t[0],t[1])}return l}}(y,p,d,m,f),g=e;return d&&(g=e.slice(d.split(p).length)),o(g,v,{name:t.hierarchicalFacets[n].name,count:null,isRefined:!0,path:null,data:null})}};var r=n(131),i=n(10),o=n(32),a=n(143),s=n(138),u=n(56),c=n(347),h=n(154)},function(t,e,n){var r=n(9),i=n(5),o=n(155),a=n(77);t.exports=function(t,e){if(null==t)return{};var n=r(a(t),function(t){return[t]});return e=i(e),o(t,n,function(t,n){return e(t,n[0])})}},function(t,e,n){var r=n(75),i=n(20),o=n(26),a=n(3),s=n(21);t.exports=function(t,e,n,u){if(!a(t))return t;for(var c=-1,h=(e=i(e,t)).length,l=h-1,f=t;null!=f&&++c<h;){var p=s(e[c]),d=n;if(c!=l){var m=f[p];void 0===(d=u?u(m,p,f):void 0)&&(d=a(m)?m:o(e[c+1])?[]:{})}r(f,p,d),f=f[p]}return t}},function(t,e,n){"use strict";var r=n(156),i=n(157);function o(t,e){this.main=t,this.fn=e,this.lastResults=null}r.inherits(o,i.EventEmitter),o.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},o.prototype.getModifiedState=function(t){return this.fn(t)},t.exports=o},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){"use strict";var r=n(19),i=n(10),o=n(32),a=n(81),s={_getQueries:function(t,e){var n=[];return n.push({indexName:t,params:s._getHitsSearchParams(e)}),r(e.getRefinedDisjunctiveFacets(),function(r){n.push({indexName:t,params:s._getDisjunctiveFacetSearchParams(e,r)})}),r(e.getRefinedHierarchicalFacets(),function(r){var i=e.getHierarchicalFacetByName(r),o=e.getHierarchicalRefinement(r),a=e._getHierarchicalFacetSeparator(i);o.length>0&&o[0].split(a).length>1&&n.push({indexName:t,params:s._getDisjunctiveFacetSearchParams(e,r,!0)})}),n},_getHitsSearchParams:function(t){var e=t.facets.concat(t.disjunctiveFacets).concat(s._getHitsHierarchicalFacetsAttributes(t)),n=s._getFacetFilters(t),r=s._getNumericFilters(t),i={facets:e,tagFilters:s._getTagFilters(t)};return n.length>0&&(i.facetFilters=n),r.length>0&&(i.numericFilters=r),a(t.getQueryParams(),i)},_getDisjunctiveFacetSearchParams:function(t,e,n){var r=s._getFacetFilters(t,e,n),i=s._getNumericFilters(t,e),o={hitsPerPage:1,page:0,attributesToRetrieve:[],attributesToHighlight:[],attributesToSnippet:[],tagFilters:s._getTagFilters(t),analytics:!1,clickAnalytics:!1},u=t.getHierarchicalFacetByName(e);return o.facets=u?s._getDisjunctiveHierarchicalFacetAttribute(t,u,n):e,i.length>0&&(o.numericFilters=i),r.length>0&&(o.facetFilters=r),a(t.getQueryParams(),o)},_getNumericFilters:function(t,e){if(t.numericFilters)return t.numericFilters;var n=[];return r(t.numericRefinements,function(t,o){r(t,function(t,a){e!==o&&r(t,function(t){if(Array.isArray(t)){var e=i(t,function(t){return o+a+t});n.push(e)}else n.push(o+a+t)})})}),n},_getTagFilters:function(t){return t.tagFilters?t.tagFilters:t.tagRefinements.join(",")},_getFacetFilters:function(t,e,n){var i=[];return r(t.facetsRefinements,function(t,e){r(t,function(t){i.push(e+":"+t)})}),r(t.facetsExcludes,function(t,e){r(t,function(t){i.push(e+":-"+t)})}),r(t.disjunctiveFacetsRefinements,function(t,n){if(n!==e&&t&&0!==t.length){var o=[];r(t,function(t){o.push(n+":"+t)}),i.push(o)}}),r(t.hierarchicalFacetsRefinements,function(r,o){var a=r[0];if(void 0!==a){var s,u,c=t.getHierarchicalFacetByName(o),h=t._getHierarchicalFacetSeparator(c),l=t._getHierarchicalRootPath(c);if(e===o){if(-1===a.indexOf(h)||!l&&!0===n||l&&l.split(h).length===a.split(h).length)return;l?(u=l.split(h).length-1,a=l):(u=a.split(h).length-2,a=a.slice(0,a.lastIndexOf(h))),s=c.attributes[u]}else u=a.split(h).length-1,s=c.attributes[u];s&&i.push([s+":"+a])}}),i},_getHitsHierarchicalFacetsAttributes:function(t){return o(t.hierarchicalFacets,function(e,n){var r=t.getHierarchicalRefinement(n.name)[0];if(!r)return e.push(n.attributes[0]),e;var i=t._getHierarchicalFacetSeparator(n),o=r.split(i).length,a=n.attributes.slice(0,o+1);return e.concat(a)},[])},_getDisjunctiveHierarchicalFacetAttribute:function(t,e,n){var r=t._getHierarchicalFacetSeparator(e);if(!0===n){var i=t._getHierarchicalRootPath(e),o=0;return i&&(o=i.split(r).length),[e.attributes[o]]}var a=(t.getHierarchicalRefinement(e.name)[0]||"").split(r).length-1;return e.attributes.slice(0,a+1)},getSearchForFacetQuery:function(t,e,n,r){var i=r.isDisjunctiveFacet(t)?r.clearRefinements(t):r,o={facetQuery:e,facetName:t};return"number"==typeof n&&(o.maxFacetHits=n),a(s._getHitsSearchParams(i),o)}};t.exports=s},function(t,e,n){"use strict";var r=n(159),i=n(6),o={advancedSyntax:"aS",allowTyposOnNumericTokens:"aTONT",analyticsTags:"aT",analytics:"a",aroundLatLngViaIP:"aLLVIP",aroundLatLng:"aLL",aroundPrecision:"aP",aroundRadius:"aR",attributesToHighlight:"aTH",attributesToRetrieve:"aTR",attributesToSnippet:"aTS",disjunctiveFacetsRefinements:"dFR",disjunctiveFacets:"dF",distinct:"d",facetsExcludes:"fE",facetsRefinements:"fR",facets:"f",getRankingInfo:"gRI",hierarchicalFacetsRefinements:"hFR",hierarchicalFacets:"hF",highlightPostTag:"hPoT",highlightPreTag:"hPrT",hitsPerPage:"hPP",ignorePlurals:"iP",index:"idx",insideBoundingBox:"iBB",insidePolygon:"iPg",length:"l",maxValuesPerFacet:"mVPF",minimumAroundRadius:"mAR",minProximity:"mP",minWordSizefor1Typo:"mWS1T",minWordSizefor2Typos:"mWS2T",numericFilters:"nF",numericRefinements:"nR",offset:"o",optionalWords:"oW",page:"p",queryType:"qT",query:"q",removeWordsIfNoResults:"rWINR",replaceSynonymsInHighlight:"rSIH",restrictSearchableAttributes:"rSA",synonyms:"s",tagFilters:"tF",tagRefinements:"tR",typoTolerance:"tT",optionalTagFilters:"oTF",optionalFacetFilters:"oFF",snippetEllipsisText:"sET",disableExactOnAttributes:"dEOA",enableExactOnSingleWordQuery:"eEOSWQ"},a=r(o);t.exports={ENCODED_PARAMETERS:i(a),decode:function(t){return a[t]},encode:function(t){return o[t]}}},function(t,e,n){var r=n(354);t.exports=function(t,e){return function(n,i){return r(n,t,e(i),{})}}},function(t,e,n){var r=n(29);t.exports=function(t,e,n,i){return r(t,function(t,r,o){e(i,n(t),r,o)}),i}},function(t,e,n){"use strict";var r=n(356),i=n(357),o=n(160);t.exports={formats:o,parse:i,stringify:r}},function(t,e,n){"use strict";var r=n(85),i=n(160),o={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},a=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(t){return a.call(t)},skipNulls:!1,strictNullHandling:!1},u=function t(e,n,i,o,a,u,c,h,l,f,p,d){var m=e;if("function"==typeof c)m=c(n,m);else if(m instanceof Date)m=f(m);else if(null===m){if(o)return u&&!d?u(n,s.encoder):n;m=""}if("string"==typeof m||"number"==typeof m||"boolean"==typeof m||r.isBuffer(m))return u?[p(d?n:u(n,s.encoder))+"="+p(u(m,s.encoder))]:[p(n)+"="+p(String(m))];var y,v=[];if(void 0===m)return v;if(Array.isArray(c))y=c;else{var g=Object.keys(m);y=h?g.sort(h):g}for(var b=0;b<y.length;++b){var _=y[b];a&&null===m[_]||(v=Array.isArray(m)?v.concat(t(m[_],i(n,_),i,o,a,u,c,h,l,f,p,d)):v.concat(t(m[_],n+(l?"."+_:"["+_+"]"),i,o,a,u,c,h,l,f,p,d)))}return v};t.exports=function(t,e){var n=t,a=e?r.assign({},e):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===a.delimiter?s.delimiter:a.delimiter,h="boolean"==typeof a.strictNullHandling?a.strictNullHandling:s.strictNullHandling,l="boolean"==typeof a.skipNulls?a.skipNulls:s.skipNulls,f="boolean"==typeof a.encode?a.encode:s.encode,p="function"==typeof a.encoder?a.encoder:s.encoder,d="function"==typeof a.sort?a.sort:null,m=void 0!==a.allowDots&&a.allowDots,y="function"==typeof a.serializeDate?a.serializeDate:s.serializeDate,v="boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:s.encodeValuesOnly;if(void 0===a.format)a.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,a.format))throw new TypeError("Unknown format option provided.");var g,b,_=i.formatters[a.format];"function"==typeof a.filter?n=(b=a.filter)("",n):Array.isArray(a.filter)&&(g=b=a.filter);var w,S=[];if("object"!=typeof n||null===n)return"";w=a.arrayFormat in o?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var E=o[w];g||(g=Object.keys(n)),d&&g.sort(d);for(var T=0;T<g.length;++T){var C=g[T];l&&null===n[C]||(S=S.concat(u(n[C],C,E,h,l,f?p:null,b,d,m,y,_,v)))}var x=S.join(c),I=!0===a.addQueryPrefix?"?":"";return x.length>0?I+x:""}},function(t,e,n){"use strict";var r=n(85),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(r),s=a?r.slice(0,a.index):r,u=[];if(s){if(!n.plainObjects&&i.call(Object.prototype,s)&&!n.allowPrototypes)return;u.push(s)}for(var c=0;null!==(a=o.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+r.slice(a.index)+"]"),function(t,e,n){for(var r=e,i=t.length-1;i>=0;--i){var o,a=t[i];if("[]"===a)o=(o=[]).concat(r);else{o=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(s,10);!isNaN(u)&&a!==s&&String(u)===s&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(o=[])[u]=r:o[s]=r}r=o}return r}(u,e,n)}};t.exports=function(t,e){var n=e?r.assign({},e):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:o.delimiter,n.depth="number"==typeof n.depth?n.depth:o.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:o.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:o.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:o.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:o.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:o.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:o.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:o.strictNullHandling,""===t||null===t||void 0===t)return n.plainObjects?Object.create(null):{};for(var s="string"==typeof t?function(t,e){for(var n={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=e.parameterLimit===1/0?void 0:e.parameterLimit,s=r.split(e.delimiter,a),u=0;u<s.length;++u){var c,h,l=s[u],f=l.indexOf("]="),p=-1===f?l.indexOf("="):f+1;-1===p?(c=e.decoder(l,o.decoder),h=e.strictNullHandling?null:""):(c=e.decoder(l.slice(0,p),o.decoder),h=e.decoder(l.slice(p+1),o.decoder)),i.call(n,c)?n[c]=[].concat(n[c]).concat(h):n[c]=h}return n}(t,n):t,u=n.plainObjects?Object.create(null):{},c=Object.keys(s),h=0;h<c.length;++h){var l=c[h],f=a(l,s[l],n);u=r.merge(u,f,n)}return r.compact(u)}},function(t,e,n){var r=n(18),i=n(82),o=n(38),a=n(23),s=r(function(t,e,n){var r=1;if(n.length){var u=a(n,o(s));r|=32}return i(t,r,e,n,u)});s.placeholder={},t.exports=s},function(t,e,n){var r=n(360),i=n(133)(function(t,e){return null==t?{}:r(t,e)});t.exports=i},function(t,e,n){var r=n(155),i=n(124);t.exports=function(t,e){return r(t,e,function(e,n){return i(t,n)})}},function(t,e,n){var r=n(33),i=n(29),o=n(5);t.exports=function(t,e){var n={};return e=o(e,3),i(t,function(t,i,o){r(n,e(t,i,o),t)}),n}},function(t,e,n){var r=n(33),i=n(29),o=n(5);t.exports=function(t,e){var n={};return e=o(e,3),i(t,function(t,i,o){r(n,i,e(t,i,o))}),n}},function(t,e,n){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var r=/["'&<>]/;t.exports=function(t){var e,n=""+t,i=r.exec(n);if(!i)return n;var o="",a=0,s=0;for(a=i.index;a<n.length;a++){switch(n.charCodeAt(a)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==a&&(o+=n.substring(s,a)),s=a+1,o+=e}return s!==a?o+n.substring(s,a):o}}]);